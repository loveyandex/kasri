! function(t) {
    var n = {};

    function e(r) {
        if (n[r]) return n[r].exports;
        var i = n[r] = {
            i: r,
            l: !1,
            exports: {}
        };
        return t[r].call(i.exports, i, i.exports, e), i.l = !0, i.exports
    }
    e.m = t, e.c = n, e.d = function(t, n, r) {
        e.o(t, n) || Object.defineProperty(t, n, {
            enumerable: !0,
            get: r
        })
    }, e.r = function(t) {
        "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, {
            value: "Module"
        }), Object.defineProperty(t, "__esModule", {
            value: !0
        })
    }, e.t = function(t, n) {
        if (1 & n && (t = e(t)), 8 & n) return t;
        if (4 & n && "object" == typeof t && t && t.__esModule) return t;
        var r = Object.create(null);
        if (e.r(r), Object.defineProperty(r, "default", {
                enumerable: !0,
                value: t
            }), 2 & n && "string" != typeof t)
            for (var i in t) e.d(r, i, function(n) {
                return t[n]
            }.bind(null, i));
        return r
    }, e.n = function(t) {
        var n = t && t.__esModule ? function() {
            return t.default
        } : function() {
            return t
        };
        return e.d(n, "a", n), n
    }, e.o = function(t, n) {
        return Object.prototype.hasOwnProperty.call(t, n)
    }, e.p = "", e(e.s = 43)
}([function(t, n, e) {
    (function(t, e) {
        var r;

        function i(t) {
            return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
                return typeof t
            } : function(t) {
                return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
            })(t)
        }! function() {
            var o = "object" == ("undefined" == typeof self ? "undefined" : i(self)) && self.self === self && self || "object" == (void 0 === t ? "undefined" : i(t)) && t.global === t && t || this || {},
                a = o._,
                u = Array.prototype,
                c = Object.prototype,
                l = "undefined" != typeof Symbol ? Symbol.prototype : null,
                s = u.push,
                f = u.slice,
                h = c.toString,
                d = c.hasOwnProperty,
                p = Array.isArray,
                v = Object.keys,
                m = Object.create,
                y = function() {},
                g = function t(n) {
                    return n instanceof t ? n : this instanceof t ? void(this._wrapped = n) : new t(n)
                };
            n.nodeType ? o._ = g : (!e.nodeType && e.exports && (n = e.exports = g), n._ = g), g.VERSION = "1.9.1";
            var b, w = function(t, n, e) {
                    if (void 0 === n) return t;
                    switch (null == e ? 3 : e) {
                        case 1:
                            return function(e) {
                                return t.call(n, e)
                            };
                        case 3:
                            return function(e, r, i) {
                                return t.call(n, e, r, i)
                            };
                        case 4:
                            return function(e, r, i, o) {
                                return t.call(n, e, r, i, o)
                            }
                    }
                    return function() {
                        return t.apply(n, arguments)
                    }
                },
                _ = function(t, n, e) {
                    return g.iteratee !== b ? g.iteratee(t, n) : null == t ? g.identity : g.isFunction(t) ? w(t, n, e) : g.isObject(t) && !g.isArray(t) ? g.matcher(t) : g.property(t)
                };
            g.iteratee = b = function(t, n) {
                return _(t, n, 1 / 0)
            };
            var x = function(t, n) {
                    return n = null == n ? t.length - 1 : +n,
                        function() {
                            for (var e = Math.max(arguments.length - n, 0), r = Array(e), i = 0; i < e; i++) r[i] = arguments[i + n];
                            switch (n) {
                                case 0:
                                    return t.call(this, r);
                                case 1:
                                    return t.call(this, arguments[0], r);
                                case 2:
                                    return t.call(this, arguments[0], arguments[1], r)
                            }
                            var o = Array(n + 1);
                            for (i = 0; i < n; i++) o[i] = arguments[i];
                            return o[n] = r, t.apply(this, o)
                        }
                },
                T = function(t) {
                    if (!g.isObject(t)) return {};
                    if (m) return m(t);
                    y.prototype = t;
                    var n = new y;
                    return y.prototype = null, n
                },
                k = function(t) {
                    return function(n) {
                        return null == n ? void 0 : n[t]
                    }
                },
                M = function(t, n) {
                    return null != t && d.call(t, n)
                },
                E = function(t, n) {
                    for (var e = n.length, r = 0; r < e; r++) {
                        if (null == t) return;
                        t = t[n[r]]
                    }
                    return e ? t : void 0
                },
                S = Math.pow(2, 53) - 1,
                A = k("length"),
                j = function(t) {
                    var n = A(t);
                    return "number" == typeof n && n >= 0 && n <= S
                };
            g.each = g.forEach = function(t, n, e) {
                var r, i;
                if (n = w(n, e), j(t))
                    for (r = 0, i = t.length; r < i; r++) n(t[r], r, t);
                else {
                    var o = g.keys(t);
                    for (r = 0, i = o.length; r < i; r++) n(t[o[r]], o[r], t)
                }
                return t
            }, g.map = g.collect = function(t, n, e) {
                n = _(n, e);
                for (var r = !j(t) && g.keys(t), i = (r || t).length, o = Array(i), a = 0; a < i; a++) {
                    var u = r ? r[a] : a;
                    o[a] = n(t[u], u, t)
                }
                return o
            };
            var N = function(t) {
                return function(n, e, r, i) {
                    var o = arguments.length >= 3;
                    return function(n, e, r, i) {
                        var o = !j(n) && g.keys(n),
                            a = (o || n).length,
                            u = t > 0 ? 0 : a - 1;
                        for (i || (r = n[o ? o[u] : u], u += t); u >= 0 && u < a; u += t) {
                            var c = o ? o[u] : u;
                            r = e(r, n[c], c, n)
                        }
                        return r
                    }(n, w(e, i, 4), r, o)
                }
            };
            g.reduce = g.foldl = g.inject = N(1), g.reduceRight = g.foldr = N(-1), g.find = g.detect = function(t, n, e) {
                var r = (j(t) ? g.findIndex : g.findKey)(t, n, e);
                if (void 0 !== r && -1 !== r) return t[r]
            }, g.filter = g.select = function(t, n, e) {
                var r = [];
                return n = _(n, e), g.each(t, function(t, e, i) {
                    n(t, e, i) && r.push(t)
                }), r
            }, g.reject = function(t, n, e) {
                return g.filter(t, g.negate(_(n)), e)
            }, g.every = g.all = function(t, n, e) {
                n = _(n, e);
                for (var r = !j(t) && g.keys(t), i = (r || t).length, o = 0; o < i; o++) {
                    var a = r ? r[o] : o;
                    if (!n(t[a], a, t)) return !1
                }
                return !0
            }, g.some = g.any = function(t, n, e) {
                n = _(n, e);
                for (var r = !j(t) && g.keys(t), i = (r || t).length, o = 0; o < i; o++) {
                    var a = r ? r[o] : o;
                    if (n(t[a], a, t)) return !0
                }
                return !1
            }, g.contains = g.includes = g.include = function(t, n, e, r) {
                return j(t) || (t = g.values(t)), ("number" != typeof e || r) && (e = 0), g.indexOf(t, n, e) >= 0
            }, g.invoke = x(function(t, n, e) {
                var r, i;
                return g.isFunction(n) ? i = n : g.isArray(n) && (r = n.slice(0, -1), n = n[n.length - 1]), g.map(t, function(t) {
                    var o = i;
                    if (!o) {
                        if (r && r.length && (t = E(t, r)), null == t) return;
                        o = t[n]
                    }
                    return null == o ? o : o.apply(t, e)
                })
            }), g.pluck = function(t, n) {
                return g.map(t, g.property(n))
            }, g.where = function(t, n) {
                return g.filter(t, g.matcher(n))
            }, g.findWhere = function(t, n) {
                return g.find(t, g.matcher(n))
            }, g.max = function(t, n, e) {
                var r, o, a = -1 / 0,
                    u = -1 / 0;
                if (null == n || "number" == typeof n && "object" != i(t[0]) && null != t)
                    for (var c = 0, l = (t = j(t) ? t : g.values(t)).length; c < l; c++) null != (r = t[c]) && r > a && (a = r);
                else n = _(n, e), g.each(t, function(t, e, r) {
                    ((o = n(t, e, r)) > u || o === -1 / 0 && a === -1 / 0) && (a = t, u = o)
                });
                return a
            }, g.min = function(t, n, e) {
                var r, o, a = 1 / 0,
                    u = 1 / 0;
                if (null == n || "number" == typeof n && "object" != i(t[0]) && null != t)
                    for (var c = 0, l = (t = j(t) ? t : g.values(t)).length; c < l; c++) null != (r = t[c]) && r < a && (a = r);
                else n = _(n, e), g.each(t, function(t, e, r) {
                    ((o = n(t, e, r)) < u || o === 1 / 0 && a === 1 / 0) && (a = t, u = o)
                });
                return a
            }, g.shuffle = function(t) {
                return g.sample(t, 1 / 0)
            }, g.sample = function(t, n, e) {
                if (null == n || e) return j(t) || (t = g.values(t)), t[g.random(t.length - 1)];
                var r = j(t) ? g.clone(t) : g.values(t),
                    i = A(r);
                n = Math.max(Math.min(n, i), 0);
                for (var o = i - 1, a = 0; a < n; a++) {
                    var u = g.random(a, o),
                        c = r[a];
                    r[a] = r[u], r[u] = c
                }
                return r.slice(0, n)
            }, g.sortBy = function(t, n, e) {
                var r = 0;
                return n = _(n, e), g.pluck(g.map(t, function(t, e, i) {
                    return {
                        value: t,
                        index: r++,
                        criteria: n(t, e, i)
                    }
                }).sort(function(t, n) {
                    var e = t.criteria,
                        r = n.criteria;
                    if (e !== r) {
                        if (e > r || void 0 === e) return 1;
                        if (e < r || void 0 === r) return -1
                    }
                    return t.index - n.index
                }), "value")
            };
            var O = function(t, n) {
                return function(e, r, i) {
                    var o = n ? [
                        [],
                        []
                    ] : {};
                    return r = _(r, i), g.each(e, function(n, i) {
                        var a = r(n, i, e);
                        t(o, n, a)
                    }), o
                }
            };
            g.groupBy = O(function(t, n, e) {
                M(t, e) ? t[e].push(n) : t[e] = [n]
            }), g.indexBy = O(function(t, n, e) {
                t[e] = n
            }), g.countBy = O(function(t, n, e) {
                M(t, e) ? t[e]++ : t[e] = 1
            });
            var P = /[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;
            g.toArray = function(t) {
                return t ? g.isArray(t) ? f.call(t) : g.isString(t) ? t.match(P) : j(t) ? g.map(t, g.identity) : g.values(t) : []
            }, g.size = function(t) {
                return null == t ? 0 : j(t) ? t.length : g.keys(t).length
            }, g.partition = O(function(t, n, e) {
                t[e ? 0 : 1].push(n)
            }, !0), g.first = g.head = g.take = function(t, n, e) {
                return null == t || t.length < 1 ? null == n ? void 0 : [] : null == n || e ? t[0] : g.initial(t, t.length - n)
            }, g.initial = function(t, n, e) {
                return f.call(t, 0, Math.max(0, t.length - (null == n || e ? 1 : n)))
            }, g.last = function(t, n, e) {
                return null == t || t.length < 1 ? null == n ? void 0 : [] : null == n || e ? t[t.length - 1] : g.rest(t, Math.max(0, t.length - n))
            }, g.rest = g.tail = g.drop = function(t, n, e) {
                return f.call(t, null == n || e ? 1 : n)
            }, g.compact = function(t) {
                return g.filter(t, Boolean)
            };
            var R = function t(n, e, r, i) {
                for (var o = (i = i || []).length, a = 0, u = A(n); a < u; a++) {
                    var c = n[a];
                    if (j(c) && (g.isArray(c) || g.isArguments(c)))
                        if (e)
                            for (var l = 0, s = c.length; l < s;) i[o++] = c[l++];
                        else t(c, e, r, i), o = i.length;
                    else r || (i[o++] = c)
                }
                return i
            };
            g.flatten = function(t, n) {
                return R(t, n, !1)
            }, g.without = x(function(t, n) {
                return g.difference(t, n)
            }), g.uniq = g.unique = function(t, n, e, r) {
                g.isBoolean(n) || (r = e, e = n, n = !1), null != e && (e = _(e, r));
                for (var i = [], o = [], a = 0, u = A(t); a < u; a++) {
                    var c = t[a],
                        l = e ? e(c, a, t) : c;
                    n && !e ? (a && o === l || i.push(c), o = l) : e ? g.contains(o, l) || (o.push(l), i.push(c)) : g.contains(i, c) || i.push(c)
                }
                return i
            }, g.union = x(function(t) {
                return g.uniq(R(t, !0, !0))
            }), g.intersection = function(t) {
                for (var n = [], e = arguments.length, r = 0, i = A(t); r < i; r++) {
                    var o = t[r];
                    if (!g.contains(n, o)) {
                        var a;
                        for (a = 1; a < e && g.contains(arguments[a], o); a++);
                        a === e && n.push(o)
                    }
                }
                return n
            }, g.difference = x(function(t, n) {
                return n = R(n, !0, !0), g.filter(t, function(t) {
                    return !g.contains(n, t)
                })
            }), g.unzip = function(t) {
                for (var n = t && g.max(t, A).length || 0, e = Array(n), r = 0; r < n; r++) e[r] = g.pluck(t, r);
                return e
            }, g.zip = x(g.unzip), g.object = function(t, n) {
                for (var e = {}, r = 0, i = A(t); r < i; r++) n ? e[t[r]] = n[r] : e[t[r][0]] = t[r][1];
                return e
            };
            var C = function(t) {
                return function(n, e, r) {
                    e = _(e, r);
                    for (var i = A(n), o = t > 0 ? 0 : i - 1; o >= 0 && o < i; o += t)
                        if (e(n[o], o, n)) return o;
                    return -1
                }
            };
            g.findIndex = C(1), g.findLastIndex = C(-1);
            var F = function(t, n, e) {
                return function(r, i, o) {
                    var a = 0,
                        u = A(r);
                    if ("number" == typeof o) t > 0 ? a = o >= 0 ? o : Math.max(o + u, a) : u = o >= 0 ? Math.min(o + 1, u) : o + u + 1;
                    else if (e && o && u) return r[o = e(r, i)] === i ? o : -1;
                    if (i != i) return (o = n(f.call(r, a, u), g.isNaN)) >= 0 ? o + a : -1;
                    for (o = t > 0 ? a : u - 1; o >= 0 && o < u; o += t)
                        if (r[o] === i) return o;
                    return -1
                }
            };
            g.indexOf = F(1, g.findIndex, g.sortedIndex = function(t, n, e, r) {
                for (var i = (e = _(e, r, 1))(n), o = 0, a = A(t); o < a;) {
                    var u = Math.floor((o + a) / 2);
                    e(t[u]) < i ? o = u + 1 : a = u
                }
                return o
            }), g.lastIndexOf = F(-1, g.findLastIndex), g.range = function(t, n, e) {
                null == n && (n = t || 0, t = 0), e || (e = n < t ? -1 : 1);
                for (var r = Math.max(Math.ceil((n - t) / e), 0), i = Array(r), o = 0; o < r; o++, t += e) i[o] = t;
                return i
            }, g.chunk = function(t, n) {
                if (null == n || n < 1) return [];
                for (var e = [], r = 0, i = t.length; r < i;) e.push(f.call(t, r, r += n));
                return e
            };
            var z = function(t, n, e, r, i) {
                if (!(r instanceof n)) return t.apply(e, i);
                var o = T(t.prototype),
                    a = t.apply(o, i);
                return g.isObject(a) ? a : o
            };
            g.bind = x(function(t, n, e) {
                if (!g.isFunction(t)) throw new TypeError("Bind must be called on a function");
                var r = x(function(i) {
                    return z(t, r, n, this, e.concat(i))
                });
                return r
            }), (g.partial = x(function(t, n) {
                var e = g.partial.placeholder;
                return function r() {
                    for (var i = 0, o = n.length, a = Array(o), u = 0; u < o; u++) a[u] = n[u] === e ? arguments[i++] : n[u];
                    for (; i < arguments.length;) a.push(arguments[i++]);
                    return z(t, r, this, this, a)
                }
            })).placeholder = g, g.bindAll = x(function(t, n) {
                var e = (n = R(n, !1, !1)).length;
                if (e < 1) throw new Error("bindAll must be passed function names");
                for (; e--;) {
                    var r = n[e];
                    t[r] = g.bind(t[r], t)
                }
            }), g.memoize = function(t, n) {
                var e = function e(r) {
                    var i = e.cache,
                        o = "" + (n ? n.apply(this, arguments) : r);
                    return M(i, o) || (i[o] = t.apply(this, arguments)), i[o]
                };
                return e.cache = {}, e
            }, g.delay = x(function(t, n, e) {
                return setTimeout(function() {
                    return t.apply(null, e)
                }, n)
            }), g.defer = g.partial(g.delay, g, 1), g.throttle = function(t, n, e) {
                var r, i, o, a, u = 0;
                e || (e = {});
                var c = function() {
                        u = !1 === e.leading ? 0 : g.now(), r = null, a = t.apply(i, o), r || (i = o = null)
                    },
                    l = function() {
                        var l = g.now();
                        u || !1 !== e.leading || (u = l);
                        var s = n - (l - u);
                        return i = this, o = arguments, s <= 0 || s > n ? (r && (clearTimeout(r), r = null), u = l, a = t.apply(i, o), r || (i = o = null)) : r || !1 === e.trailing || (r = setTimeout(c, s)), a
                    };
                return l.cancel = function() {
                    clearTimeout(r), u = 0, r = i = o = null
                }, l
            }, g.debounce = function(t, n, e) {
                var r, i, o = function(n, e) {
                        r = null, e && (i = t.apply(n, e))
                    },
                    a = x(function(a) {
                        if (r && clearTimeout(r), e) {
                            var u = !r;
                            r = setTimeout(o, n), u && (i = t.apply(this, a))
                        } else r = g.delay(o, n, this, a);
                        return i
                    });
                return a.cancel = function() {
                    clearTimeout(r), r = null
                }, a
            }, g.wrap = function(t, n) {
                return g.partial(n, t)
            }, g.negate = function(t) {
                return function() {
                    return !t.apply(this, arguments)
                }
            }, g.compose = function() {
                var t = arguments,
                    n = t.length - 1;
                return function() {
                    for (var e = n, r = t[n].apply(this, arguments); e--;) r = t[e].call(this, r);
                    return r
                }
            }, g.after = function(t, n) {
                return function() {
                    if (--t < 1) return n.apply(this, arguments)
                }
            }, g.once = g.partial(g.before = function(t, n) {
                var e;
                return function() {
                    return --t > 0 && (e = n.apply(this, arguments)), t <= 1 && (n = null), e
                }
            }, 2), g.restArguments = x;
            var L = !{
                    toString: null
                }.propertyIsEnumerable("toString"),
                I = ["valueOf", "isPrototypeOf", "toString", "propertyIsEnumerable", "hasOwnProperty", "toLocaleString"],
                D = function(t, n) {
                    var e = I.length,
                        r = t.constructor,
                        i = g.isFunction(r) && r.prototype || c,
                        o = "constructor";
                    for (M(t, o) && !g.contains(n, o) && n.push(o); e--;)(o = I[e]) in t && t[o] !== i[o] && !g.contains(n, o) && n.push(o)
                };
            g.keys = function(t) {
                if (!g.isObject(t)) return [];
                if (v) return v(t);
                var n = [];
                for (var e in t) M(t, e) && n.push(e);
                return L && D(t, n), n
            }, g.allKeys = function(t) {
                if (!g.isObject(t)) return [];
                var n = [];
                for (var e in t) n.push(e);
                return L && D(t, n), n
            }, g.values = function(t) {
                for (var n = g.keys(t), e = n.length, r = Array(e), i = 0; i < e; i++) r[i] = t[n[i]];
                return r
            }, g.mapObject = function(t, n, e) {
                n = _(n, e);
                for (var r = g.keys(t), i = r.length, o = {}, a = 0; a < i; a++) {
                    var u = r[a];
                    o[u] = n(t[u], u, t)
                }
                return o
            }, g.pairs = function(t) {
                for (var n = g.keys(t), e = n.length, r = Array(e), i = 0; i < e; i++) r[i] = [n[i], t[n[i]]];
                return r
            }, g.invert = function(t) {
                for (var n = {}, e = g.keys(t), r = 0, i = e.length; r < i; r++) n[t[e[r]]] = e[r];
                return n
            }, g.functions = g.methods = function(t) {
                var n = [];
                for (var e in t) g.isFunction(t[e]) && n.push(e);
                return n.sort()
            };
            var q = function(t, n) {
                return function(e) {
                    var r = arguments.length;
                    if (n && (e = Object(e)), r < 2 || null == e) return e;
                    for (var i = 1; i < r; i++)
                        for (var o = arguments[i], a = t(o), u = a.length, c = 0; c < u; c++) {
                            var l = a[c];
                            n && void 0 !== e[l] || (e[l] = o[l])
                        }
                    return e
                }
            };
            g.extend = q(g.allKeys), g.extendOwn = g.assign = q(g.keys), g.findKey = function(t, n, e) {
                n = _(n, e);
                for (var r, i = g.keys(t), o = 0, a = i.length; o < a; o++)
                    if (n(t[r = i[o]], r, t)) return r
            };
            var U, H, G = function(t, n, e) {
                return n in e
            };
            g.pick = x(function(t, n) {
                var e = {},
                    r = n[0];
                if (null == t) return e;
                g.isFunction(r) ? (n.length > 1 && (r = w(r, n[1])), n = g.allKeys(t)) : (r = G, n = R(n, !1, !1), t = Object(t));
                for (var i = 0, o = n.length; i < o; i++) {
                    var a = n[i],
                        u = t[a];
                    r(u, a, t) && (e[a] = u)
                }
                return e
            }), g.omit = x(function(t, n) {
                var e, r = n[0];
                return g.isFunction(r) ? (r = g.negate(r), n.length > 1 && (e = n[1])) : (n = g.map(R(n, !1, !1), String), r = function(t, e) {
                    return !g.contains(n, e)
                }), g.pick(t, r, e)
            }), g.defaults = q(g.allKeys, !0), g.create = function(t, n) {
                var e = T(t);
                return n && g.extendOwn(e, n), e
            }, g.clone = function(t) {
                return g.isObject(t) ? g.isArray(t) ? t.slice() : g.extend({}, t) : t
            }, g.tap = function(t, n) {
                return n(t), t
            }, g.isMatch = function(t, n) {
                var e = g.keys(n),
                    r = e.length;
                if (null == t) return !r;
                for (var i = Object(t), o = 0; o < r; o++) {
                    var a = e[o];
                    if (n[a] !== i[a] || !(a in i)) return !1
                }
                return !0
            }, U = function(t, n, e, r) {
                if (t === n) return 0 !== t || 1 / t == 1 / n;
                if (null == t || null == n) return !1;
                if (t != t) return n != n;
                var o = i(t);
                return ("function" === o || "object" === o || "object" == i(n)) && H(t, n, e, r)
            }, H = function(t, n, e, r) {
                t instanceof g && (t = t._wrapped), n instanceof g && (n = n._wrapped);
                var o = h.call(t);
                if (o !== h.call(n)) return !1;
                switch (o) {
                    case "[object RegExp]":
                    case "[object String]":
                        return "" + t == "" + n;
                    case "[object Number]":
                        return +t != +t ? +n != +n : 0 == +t ? 1 / +t == 1 / n : +t == +n;
                    case "[object Date]":
                    case "[object Boolean]":
                        return +t == +n;
                    case "[object Symbol]":
                        return l.valueOf.call(t) === l.valueOf.call(n)
                }
                var a = "[object Array]" === o;
                if (!a) {
                    if ("object" != i(t) || "object" != i(n)) return !1;
                    var u = t.constructor,
                        c = n.constructor;
                    if (u !== c && !(g.isFunction(u) && u instanceof u && g.isFunction(c) && c instanceof c) && "constructor" in t && "constructor" in n) return !1
                }
                r = r || [];
                for (var s = (e = e || []).length; s--;)
                    if (e[s] === t) return r[s] === n;
                if (e.push(t), r.push(n), a) {
                    if ((s = t.length) !== n.length) return !1;
                    for (; s--;)
                        if (!U(t[s], n[s], e, r)) return !1
                } else {
                    var f, d = g.keys(t);
                    if (s = d.length, g.keys(n).length !== s) return !1;
                    for (; s--;)
                        if (f = d[s], !M(n, f) || !U(t[f], n[f], e, r)) return !1
                }
                return e.pop(), r.pop(), !0
            }, g.isEqual = function(t, n) {
                return U(t, n)
            }, g.isEmpty = function(t) {
                return null == t || (j(t) && (g.isArray(t) || g.isString(t) || g.isArguments(t)) ? 0 === t.length : 0 === g.keys(t).length)
            }, g.isElement = function(t) {
                return !(!t || 1 !== t.nodeType)
            }, g.isArray = p || function(t) {
                return "[object Array]" === h.call(t)
            }, g.isObject = function(t) {
                var n = i(t);
                return "function" === n || "object" === n && !!t
            }, g.each(["Arguments", "Function", "String", "Number", "Date", "RegExp", "Error", "Symbol", "Map", "WeakMap", "Set", "WeakSet"], function(t) {
                g["is" + t] = function(n) {
                    return h.call(n) === "[object " + t + "]"
                }
            }), g.isArguments(arguments) || (g.isArguments = function(t) {
                return M(t, "callee")
            });
            var X = o.document && o.document.childNodes;
            "object" != ("undefined" == typeof Int8Array ? "undefined" : i(Int8Array)) && "function" != typeof X && (g.isFunction = function(t) {
                return "function" == typeof t || !1
            }), g.isFinite = function(t) {
                return !g.isSymbol(t) && isFinite(t) && !isNaN(parseFloat(t))
            }, g.isNaN = function(t) {
                return g.isNumber(t) && isNaN(t)
            }, g.isBoolean = function(t) {
                return !0 === t || !1 === t || "[object Boolean]" === h.call(t)
            }, g.isNull = function(t) {
                return null === t
            }, g.isUndefined = function(t) {
                return void 0 === t
            }, g.has = function(t, n) {
                if (!g.isArray(n)) return M(t, n);
                for (var e = n.length, r = 0; r < e; r++) {
                    var i = n[r];
                    if (null == t || !d.call(t, i)) return !1;
                    t = t[i]
                }
                return !!e
            }, g.noConflict = function() {
                return o._ = a, this
            }, g.identity = function(t) {
                return t
            }, g.constant = function(t) {
                return function() {
                    return t
                }
            }, g.noop = function() {}, g.property = function(t) {
                return g.isArray(t) ? function(n) {
                    return E(n, t)
                } : k(t)
            }, g.propertyOf = function(t) {
                return null == t ? function() {} : function(n) {
                    return g.isArray(n) ? E(t, n) : t[n]
                }
            }, g.matcher = g.matches = function(t) {
                return t = g.extendOwn({}, t),
                    function(n) {
                        return g.isMatch(n, t)
                    }
            }, g.times = function(t, n, e) {
                var r = Array(Math.max(0, t));
                n = w(n, e, 1);
                for (var i = 0; i < t; i++) r[i] = n(i);
                return r
            }, g.random = function(t, n) {
                return null == n && (n = t, t = 0), t + Math.floor(Math.random() * (n - t + 1))
            }, g.now = Date.now || function() {
                return (new Date).getTime()
            };
            var W = {
                    "&": "&amp;",
                    "<": "&lt;",
                    ">": "&gt;",
                    '"': "&quot;",
                    "'": "&#x27;",
                    "`": "&#x60;"
                },
                B = g.invert(W),
                V = function(t) {
                    var n = function(n) {
                            return t[n]
                        },
                        e = "(?:" + g.keys(t).join("|") + ")",
                        r = RegExp(e),
                        i = RegExp(e, "g");
                    return function(t) {
                        return t = null == t ? "" : "" + t, r.test(t) ? t.replace(i, n) : t
                    }
                };
            g.escape = V(W), g.unescape = V(B), g.result = function(t, n, e) {
                g.isArray(n) || (n = [n]);
                var r = n.length;
                if (!r) return g.isFunction(e) ? e.call(t) : e;
                for (var i = 0; i < r; i++) {
                    var o = null == t ? void 0 : t[n[i]];
                    void 0 === o && (o = e, i = r), t = g.isFunction(o) ? o.call(t) : o
                }
                return t
            };
            var $ = 0;
            g.uniqueId = function(t) {
                var n = ++$ + "";
                return t ? t + n : n
            }, g.templateSettings = {
                evaluate: /<%([\s\S]+?)%>/g,
                interpolate: /<%=([\s\S]+?)%>/g,
                escape: /<%-([\s\S]+?)%>/g
            };
            var Y = /(.)^/,
                K = {
                    "'": "'",
                    "\\": "\\",
                    "\r": "r",
                    "\n": "n",
                    "\u2028": "u2028",
                    "\u2029": "u2029"
                },
                J = /\\|'|\r|\n|\u2028|\u2029/g,
                Z = function(t) {
                    return "\\" + K[t]
                };
            g.template = function(t, n, e) {
                !n && e && (n = e), n = g.defaults({}, n, g.templateSettings);
                var r, i = RegExp([(n.escape || Y).source, (n.interpolate || Y).source, (n.evaluate || Y).source].join("|") + "|$", "g"),
                    o = 0,
                    a = "__p+='";
                t.replace(i, function(n, e, r, i, u) {
                    return a += t.slice(o, u).replace(J, Z), o = u + n.length, e ? a += "'+\n((__t=(" + e + "))==null?'':_.escape(__t))+\n'" : r ? a += "'+\n((__t=(" + r + "))==null?'':__t)+\n'" : i && (a += "';\n" + i + "\n__p+='"), n
                }), a += "';\n", n.variable || (a = "with(obj||{}){\n" + a + "}\n"), a = "var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n" + a + "return __p;\n";
                try {
                    r = new Function(n.variable || "obj", "_", a)
                } catch (t) {
                    throw t.source = a, t
                }
                var u = function(t) {
                        return r.call(this, t, g)
                    },
                    c = n.variable || "obj";
                return u.source = "function(" + c + "){\n" + a + "}", u
            }, g.chain = function(t) {
                var n = g(t);
                return n._chain = !0, n
            };
            var Q = function(t, n) {
                return t._chain ? g(n).chain() : n
            };
            g.mixin = function(t) {
                return g.each(g.functions(t), function(n) {
                    var e = g[n] = t[n];
                    g.prototype[n] = function() {
                        var t = [this._wrapped];
                        return s.apply(t, arguments), Q(this, e.apply(g, t))
                    }
                }), g
            }, g.mixin(g), g.each(["pop", "push", "reverse", "shift", "sort", "splice", "unshift"], function(t) {
                var n = u[t];
                g.prototype[t] = function() {
                    var e = this._wrapped;
                    return n.apply(e, arguments), "shift" !== t && "splice" !== t || 0 !== e.length || delete e[0], Q(this, e)
                }
            }), g.each(["concat", "join", "slice"], function(t) {
                var n = u[t];
                g.prototype[t] = function() {
                    return Q(this, n.apply(this._wrapped, arguments))
                }
            }), g.prototype.value = function() {
                return this._wrapped
            }, g.prototype.valueOf = g.prototype.toJSON = g.prototype.value, g.prototype.toString = function() {
                return String(this._wrapped)
            }, void 0 === (r = function() {
                return g
            }.apply(n, [])) || (e.exports = r)
        }()
    }).call(this, e(9), e(48)(t))
}, function(t, n, e) {
    "use strict";
    e.d(n, "p", function() {
        return l
    }), e.d(n, "D", function() {
        return s
    }), e.d(n, "C", function() {
        return f
    }), e.d(n, "w", function() {
        return h
    }), e.d(n, "x", function() {
        return d
    }), e.d(n, "f", function() {
        return p
    }), e.d(n, "h", function() {
        return v
    }), e.d(n, "B", function() {
        return m
    }), e.d(n, "e", function() {
        return y
    }), e.d(n, "r", function() {
        return g
    }), e.d(n, "t", function() {
        return b
    }), e.d(n, "v", function() {
        return w
    }), e.d(n, "q", function() {
        return _
    }), e.d(n, "d", function() {
        return x
    }), e.d(n, "F", function() {
        return T
    }), e.d(n, "A", function() {
        return k
    }), e.d(n, "z", function() {
        return M
    }), e.d(n, "G", function() {
        return E
    }), e.d(n, "j", function() {
        return S
    }), e.d(n, "k", function() {
        return A
    }), e.d(n, "l", function() {
        return j
    }), e.d(n, "i", function() {
        return N
    }), e.d(n, "g", function() {
        return R
    }), e.d(n, "m", function() {
        return C
    }), e.d(n, "u", function() {
        return F
    }), e.d(n, "s", function() {
        return z
    }), e.d(n, "o", function() {
        return L
    }), e.d(n, "b", function() {
        return I
    }), e.d(n, "y", function() {
        return D
    }), e.d(n, "E", function() {
        return q
    }), e.d(n, "a", function() {
        return U
    }), e.d(n, "n", function() {
        return H
    }), e.d(n, "c", function() {
        return W
    }), e.d(n, "H", function() {
        return B
    });
    var r = e(4),
        i = e(0),
        o = e(24),
        a = e(2),
        u = e(3);

    function c(t) {
        return (c = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
            return typeof t
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
        })(t)
    }

    function l() {
        return 8081 == +window.location.port
    }

    function s() {
        return o.a("html").attr("lang") || "en"
    }

    function f() {
        var t = (window.location.hostname.match(/(.*)\.nullschool\.net$/) || [])[1] || "earth";
        return "earth" === t ? "" : t
    }

    function h(t) {
        return !!t
    }

    function d(t) {
        return null != t
    }

    function p(t, n) {
        return d(t) ? t : n
    }

    function v(t) {
        return i.isString(t) && t.indexOf("/") >= 0 && (t = t.split("/")), H(t) && 2 === t.length ? t[0] / t[1] : +t
    }

    function m(t) {
        return H(t) ? t[2] : t
    }

    function y(t) {
        return 0 === t.length ? t : t.charAt(0).toUpperCase() + t.substr(1)
    }

    function g() {
        return /firefox/i.test(navigator.userAgent)
    }

    function b() {
        return /ipad|iphone|ipod/i.test(navigator.userAgent)
    }

    function w() {
        return /android|blackberry|iemobile|ipad|iphone|ipod|opera mini|webos/i.test(navigator.userAgent)
    }

    function _() {
        return self !== top
    }

    function x(t, n) {
        return d(t) && t[n] ? t[n].bind(t) : null
    }

    function T() {
        var t = document.getElementById("display");
        return {
            width: t.clientWidth,
            height: t.clientHeight
        }
    }

    function k(t) {
        for (; t.firstChild;) t.removeChild(t.firstChild)
    }

    function M() {
        try {
            return new MouseEvent("click", {
                view: window,
                bubbles: !0,
                cancelable: !0
            })
        } catch (n) {
            var t = document.createEvent("MouseEvents");
            return t.initMouseEvent("click", !0, !0, window, 1, 0, 0, 0, 0, !1, !1, !1, !1, 0, null), t
        }
    }

    function E(t, n) {
        for (var e = [], r = 85; r <= 255; r += t) e.push("rgb(".concat(r, ",").concat(r, ",").concat(r, ")"));
        return e.indexFor = function(t) {
            return Math.floor(Math.min(t, n) / n * (e.length - 1))
        }, e
    }

    function S(t, n) {
        return Math.abs(n).toFixed(2) + "° " + (n >= 0 ? "N" : "S") + ", " + Math.abs(t).toFixed(2) + "° " + (t >= 0 ? "E" : "W")
    }

    function A(t, n) {
        return n.conversion(t).toFixed(n.precision)
    }

    function j(t, n) {
        t = "into" === n.convention ? [-t[0], -t[1]] : t;
        var e = Object(u.g)(Object(u.i)(t), 5);
        return "".concat(e.toFixed(0), "° @ ").concat(A(Object(u.d)(t), n))
    }

    function N(t, n, e, i, o) {
        var a = n < 0 ? O : -O,
            u = e < 0 ? O : -O,
            c = t([n + a, e]),
            l = t([n, e + u]),
            s = a * Math.cos(e * r.c);
        return [(c[0] - i) / s, (c[1] - o) / s, (l[0] - i) / u, (l[1] - o) / u]
    }
    var O = 36e-6;

    function P(t) {
        return i.object(t.split(/[?&]/).filter(h).map(function(t) {
            return t.split("=").map(decodeURIComponent).concat([null])
        }))
    }

    function R(t) {
        return {
            date: a.d(t)
        }
    }

    function C() {
        return i.has(P(window.location.search), "app")
    }

    function F() {
        var t = document.referrer.split("/")[2] || "",
            n = /dailymail/i.test(t);
        return i.has(P(window.location.search), "kiosk") && !n
    }

    function z() {
        return i.has(P(window.location.search), "fixed")
    }

    function L() {
        return i.has(P(window.location.search), "debug")
    }

    function I(t, n) {
        for (var e = 0; e < t.length; e++) {
            var r = t[e],
                i = n[e];
            if (r !== i && !(r != r && i != i || H(r) && I(r, i))) return !1
        }
        return t.length === n.length
    }

    function D(t, n) {
        for (var e = new Float32Array(2 * t.length), r = 0; r < t.length; r++) {
            var i = 2 * r;
            e[i] = t[r], e[i + 1] = n[r]
        }
        return e
    }

    function q(t) {
        return Array.prototype.slice.call(t)
    }

    function U(t) {
        var n, e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1 / 0;
        switch (t.byteLength % 4) {
            case 0:
                n = new Int32Array(t.buffer);
                break;
            case 2:
                n = new Int16Array(t.buffer);
                break;
            default:
                n = new Int8Array(t.buffer)
        }
        return function(t, n) {
            for (var e = new Int32Array([t.byteLength]), r = Math.max(t.length / n, 1), i = 0; i < t.length; i += r) e[0] = 31 * e[0] + t[Math.floor(i)];
            return e[0]
        }(n, e)
    }

    function H(t) {
        if (Array.isArray(t)) return !0;
        if ("object" !== c(t) || !t) return !1;
        var n = t.length;
        return "number" == typeof n && n >= 0
    }
    var G = Object.prototype.hasOwnProperty;

    function X(t, n) {
        if (null != n)
            for (var e in n) G.call(n, e) && (t[e] = n[e])
    }

    function W(t, n) {
        for (var e = 1; e < arguments.length; e++) X(t, arguments[e]);
        return t
    }

    function B(t) {
        for (var n = Object.create(null), e = 0; e < arguments.length; e++) X(n, arguments[e]);
        return n
    }
}, function(t, n, e) {
    "use strict";
    e.d(n, "f", function() {
        return c
    }), e.d(n, "c", function() {
        return l
    }), e.d(n, "b", function() {
        return s
    }), e.d(n, "d", function() {
        return f
    }), e.d(n, "a", function() {
        return d
    }), e.d(n, "g", function() {
        return p
    }), e.d(n, "e", function() {
        return v
    }), e.d(n, "h", function() {
        return m
    });
    var r = e(0),
        i = e(14),
        o = ["year", "month", "day", "hour", "minute", "second", "milli"];

    function a(t, n) {
        return null != t ? t : n
    }

    function u(t) {
        return t = a(t, ""), (r.isString(t) || r.isNumber(t)) && (t = new Date(t)), t
    }

    function c(t) {
        return {
            year: (t = u(t)).getUTCFullYear(),
            month: t.getUTCMonth() + 1,
            day: t.getUTCDate(),
            hour: t.getUTCHours(),
            minute: t.getUTCMinutes(),
            second: t.getUTCSeconds(),
            milli: t.getUTCMilliseconds()
        }
    }

    function l(t) {
        return {
            year: (t = u(t)).getFullYear(),
            month: t.getMonth() + 1,
            day: t.getDate(),
            hour: t.getHours(),
            minute: t.getMinutes(),
            second: t.getSeconds(),
            milli: t.getMilliseconds()
        }
    }

    function s(t) {
        var n = +a(t.year, 0),
            e = new Date(Date.UTC(n, a(t.month, 1) - 1, a(t.day, 1), a(t.hour, 0), a(t.minute, 0), a(t.second, 0), a(t.milli, 0)));
        return +e == +e && 0 <= n && n <= 99 && e.setUTCFullYear(n), e
    }

    function f(t) {
        return h(s(t))
    }
    var h = c;

    function d(t, n) {
        var e = r.clone(t);
        return r.intersection(Object.keys(n), o).forEach(function(t) {
            e[t] = +a(e[t], 0) + +n[t]
        }), e
    }

    function p(t, n) {
        for (var e = [], r = 0; r < n.length; r++) {
            var o = n[r];
            if ("{" === o) {
                var a = "";
                for (r++; r < n.length; r++) {
                    if ("}" === (o = n[r])) {
                        var u = NaN;
                        switch (a[0]) {
                            case "y":
                                u = +t.year;
                                break;
                            case "M":
                                u = +t.month;
                                break;
                            case "d":
                                u = +t.day;
                                break;
                            case "h":
                                u = +t.hour;
                                break;
                            case "m":
                                u = +t.minute;
                                break;
                            case "s":
                                u = +t.second;
                                break;
                            case "S":
                                u = +t.milli
                        }
                        u == u ? e.push(Object(i.a)(u, a.length)) : e.push("{", a, "}");
                        break
                    }
                    a += o
                }
            } else e.push(o)
        }
        return e.join("")
    }

    function v(t, n, e) {
        var r = {};

        function i(t, n) {
            n == n && (r[t] = n)
        }
        e = e || {
            year: 1,
            month: 2,
            day: 3,
            hour: 4,
            minute: 5,
            second: 6,
            milli: 7
        };
        var o = n.exec(t);
        return o && (i("year", +o[e.year]), i("month", +o[e.month]), i("day", +o[e.day]), i("hour", +o[e.hour]), i("minute", +o[e.minute]), i("second", +o[e.second]), i("milli", +o[e.milli])), r
    }

    function m(t) {
        return s(t).toISOString()
    }
}, function(t, n, e) {
    "use strict";
    e.d(n, "c", function() {
        return o
    }), e.d(n, "f", function() {
        return a
    }), e.d(n, "g", function() {
        return c
    }), e.d(n, "a", function() {
        return l
    }), e.d(n, "e", function() {
        return s
    }), e.d(n, "h", function() {
        return f
    }), e.d(n, "d", function() {
        return h
    }), e.d(n, "b", function() {
        return d
    }), e.d(n, "i", function() {
        return p
    });
    var r = e(4);

    function i(t, n) {
        return function(t) {
            if (Array.isArray(t)) return t
        }(t) || function(t, n) {
            var e = [],
                r = !0,
                i = !1,
                o = void 0;
            try {
                for (var a, u = t[Symbol.iterator](); !(r = (a = u.next()).done) && (e.push(a.value), !n || e.length !== n); r = !0);
            } catch (t) {
                i = !0, o = t
            } finally {
                try {
                    r || null == u.return || u.return()
                } finally {
                    if (i) throw o
                }
            }
            return e
        }(t, n) || function() {
            throw new TypeError("Invalid attempt to destructure non-iterable instance")
        }()
    }

    function o(t, n) {
        var e = t - n * Math.floor(t / n);
        return e === n ? 0 : e
    }

    function a(t) {
        var n = Math.abs(t);
        return n < u && (n += u, n -= u), Math.sign(t) * n
    }
    var u = Math.pow(2, 52);

    function c(t, n) {
        return a(t / n) * n
    }

    function l(t, n, e) {
        return Math.max(n, Math.min(t, e))
    }

    function s(t, n, e) {
        return (t - n) / (e - n)
    }

    function f(t, n, e) {
        return t * (e - n) + n
    }

    function h(t) {
        var n = i(t, 2),
            e = n[0],
            r = n[1];
        return Math.sqrt(e * e + r * r)
    }

    function d(t, n) {
        return h([n[0] - t[0], n[1] - t[1]])
    }

    function p(t) {
        return (Math.atan2(t[0], t[1]) * r.a + 360) % 360
    }
}, function(t, n, e) {
    "use strict";
    e.d(n, "d", function() {
        return r
    }), e.d(n, "e", function() {
        return i
    }), e.d(n, "a", function() {
        return o
    }), e.d(n, "c", function() {
        return a
    }), e.d(n, "b", function() {
        return u
    });
    var r = Math.PI,
        i = 2 * r,
        o = 360 / i,
        a = i / 360,
        u = 6e4
}, , , function(t, n, e) {
    "use strict";
    var r = e(15),
        i = e(28),
        o = e(29),
        a = function(t) {
            return new Array(t.length)
        };

    function u(t, n) {
        this.ownerDocument = t.ownerDocument, this.namespaceURI = t.namespaceURI, this._next = null, this._parent = t, this.__data__ = n
    }
    u.prototype = {
        constructor: u,
        appendChild: function(t) {
            return this._parent.insertBefore(t, this._next)
        },
        insertBefore: function(t, n) {
            return this._parent.insertBefore(t, n)
        },
        querySelector: function(t) {
            return this._parent.querySelector(t)
        },
        querySelectorAll: function(t) {
            return this._parent.querySelectorAll(t)
        }
    };
    var c = "$";

    function l(t, n, e, r, i, o) {
        for (var a, c = 0, l = n.length, s = o.length; c < s; ++c)(a = n[c]) ? (a.__data__ = o[c], r[c] = a) : e[c] = new u(t, o[c]);
        for (; c < l; ++c)(a = n[c]) && (i[c] = a)
    }

    function s(t, n, e, r, i, o, a) {
        var l, s, f, h = {},
            d = n.length,
            p = o.length,
            v = new Array(d);
        for (l = 0; l < d; ++l)(s = n[l]) && (v[l] = f = c + a.call(s, s.__data__, l, n), f in h ? i[l] = s : h[f] = s);
        for (l = 0; l < p; ++l)(s = h[f = c + a.call(t, o[l], l, o)]) ? (r[l] = s, s.__data__ = o[l], h[f] = null) : e[l] = new u(t, o[l]);
        for (l = 0; l < d; ++l)(s = n[l]) && h[v[l]] === s && (i[l] = s)
    }

    function f(t, n) {
        return t < n ? -1 : t > n ? 1 : t >= n ? 0 : NaN
    }
    var h = e(16);
    var d = e(30);

    function p(t) {
        return t.trim().split(/^|\s+/)
    }

    function v(t) {
        return t.classList || new m(t)
    }

    function m(t) {
        this._node = t, this._names = p(t.getAttribute("class") || "")
    }

    function y(t, n) {
        for (var e = v(t), r = -1, i = n.length; ++r < i;) e.add(n[r])
    }

    function g(t, n) {
        for (var e = v(t), r = -1, i = n.length; ++r < i;) e.remove(n[r])
    }
    m.prototype = {
        add: function(t) {
            this._names.indexOf(t) < 0 && (this._names.push(t), this._node.setAttribute("class", this._names.join(" ")))
        },
        remove: function(t) {
            var n = this._names.indexOf(t);
            n >= 0 && (this._names.splice(n, 1), this._node.setAttribute("class", this._names.join(" ")))
        },
        contains: function(t) {
            return this._names.indexOf(t) >= 0
        }
    };

    function b() {
        this.textContent = ""
    }

    function w() {
        this.innerHTML = ""
    }

    function _() {
        this.nextSibling && this.parentNode.appendChild(this)
    }

    function x() {
        this.previousSibling && this.parentNode.insertBefore(this, this.parentNode.firstChild)
    }
    var T = e(10);
    var k = function(t) {
        var n = Object(h.a)(t);
        return (n.local ? function(t) {
            return function() {
                return this.ownerDocument.createElementNS(t.space, t.local)
            }
        } : function(t) {
            return function() {
                var n = this.ownerDocument,
                    e = this.namespaceURI;
                return e === T.b && n.documentElement.namespaceURI === T.b ? n.createElement(t) : n.createElementNS(e, t)
            }
        })(n)
    };

    function M() {
        return null
    }

    function E() {
        var t = this.parentNode;
        t && t.removeChild(this)
    }

    function S() {
        return this.parentNode.insertBefore(this.cloneNode(!1), this.nextSibling)
    }

    function A() {
        return this.parentNode.insertBefore(this.cloneNode(!0), this.nextSibling)
    }
    var j = e(18),
        N = e(17);

    function O(t, n, e) {
        var r = Object(N.a)(t),
            i = r.CustomEvent;
        "function" == typeof i ? i = new i(n, e) : (i = r.document.createEvent("Event"), e ? (i.initEvent(n, e.bubbles, e.cancelable), i.detail = e.detail) : i.initEvent(n, !1, !1)), t.dispatchEvent(i)
    }
    e.d(n, "c", function() {
        return P
    }), e.d(n, "a", function() {
        return R
    });
    var P = [null];

    function R(t, n) {
        this._groups = t, this._parents = n
    }

    function C() {
        return new R([
            [document.documentElement]
        ], P)
    }
    R.prototype = C.prototype = {
        constructor: R,
        select: function(t) {
            "function" != typeof t && (t = Object(r.a)(t));
            for (var n = this._groups, e = n.length, i = new Array(e), o = 0; o < e; ++o)
                for (var a, u, c = n[o], l = c.length, s = i[o] = new Array(l), f = 0; f < l; ++f)(a = c[f]) && (u = t.call(a, a.__data__, f, c)) && ("__data__" in a && (u.__data__ = a.__data__), s[f] = u);
            return new R(i, this._parents)
        },
        selectAll: function(t) {
            "function" != typeof t && (t = Object(i.a)(t));
            for (var n = this._groups, e = n.length, r = [], o = [], a = 0; a < e; ++a)
                for (var u, c = n[a], l = c.length, s = 0; s < l; ++s)(u = c[s]) && (r.push(t.call(u, u.__data__, s, c)), o.push(u));
            return new R(r, o)
        },
        filter: function(t) {
            "function" != typeof t && (t = Object(o.a)(t));
            for (var n = this._groups, e = n.length, r = new Array(e), i = 0; i < e; ++i)
                for (var a, u = n[i], c = u.length, l = r[i] = [], s = 0; s < c; ++s)(a = u[s]) && t.call(a, a.__data__, s, u) && l.push(a);
            return new R(r, this._parents)
        },
        data: function(t, n) {
            if (!t) return m = new Array(this.size()), h = -1, this.each(function(t) {
                m[++h] = t
            }), m;
            var e, r = n ? s : l,
                i = this._parents,
                o = this._groups;
            "function" != typeof t && (e = t, t = function() {
                return e
            });
            for (var a = o.length, u = new Array(a), c = new Array(a), f = new Array(a), h = 0; h < a; ++h) {
                var d = i[h],
                    p = o[h],
                    v = p.length,
                    m = t.call(d, d && d.__data__, h, i),
                    y = m.length,
                    g = c[h] = new Array(y),
                    b = u[h] = new Array(y);
                r(d, p, g, b, f[h] = new Array(v), m, n);
                for (var w, _, x = 0, T = 0; x < y; ++x)
                    if (w = g[x]) {
                        for (x >= T && (T = x + 1); !(_ = b[T]) && ++T < y;);
                        w._next = _ || null
                    }
            }
            return (u = new R(u, i))._enter = c, u._exit = f, u
        },
        enter: function() {
            return new R(this._enter || this._groups.map(a), this._parents)
        },
        exit: function() {
            return new R(this._exit || this._groups.map(a), this._parents)
        },
        join: function(t, n, e) {
            var r = this.enter(),
                i = this,
                o = this.exit();
            return r = "function" == typeof t ? t(r) : r.append(t + ""), null != n && (i = n(i)), null == e ? o.remove() : e(o), r && i ? r.merge(i).order() : i
        },
        merge: function(t) {
            for (var n = this._groups, e = t._groups, r = n.length, i = e.length, o = Math.min(r, i), a = new Array(r), u = 0; u < o; ++u)
                for (var c, l = n[u], s = e[u], f = l.length, h = a[u] = new Array(f), d = 0; d < f; ++d)(c = l[d] || s[d]) && (h[d] = c);
            for (; u < r; ++u) a[u] = n[u];
            return new R(a, this._parents)
        },
        order: function() {
            for (var t = this._groups, n = -1, e = t.length; ++n < e;)
                for (var r, i = t[n], o = i.length - 1, a = i[o]; --o >= 0;)(r = i[o]) && (a && 4 ^ r.compareDocumentPosition(a) && a.parentNode.insertBefore(r, a), a = r);
            return this
        },
        sort: function(t) {
            function n(n, e) {
                return n && e ? t(n.__data__, e.__data__) : !n - !e
            }
            t || (t = f);
            for (var e = this._groups, r = e.length, i = new Array(r), o = 0; o < r; ++o) {
                for (var a, u = e[o], c = u.length, l = i[o] = new Array(c), s = 0; s < c; ++s)(a = u[s]) && (l[s] = a);
                l.sort(n)
            }
            return new R(i, this._parents).order()
        },
        call: function() {
            var t = arguments[0];
            return arguments[0] = this, t.apply(null, arguments), this
        },
        nodes: function() {
            var t = new Array(this.size()),
                n = -1;
            return this.each(function() {
                t[++n] = this
            }), t
        },
        node: function() {
            for (var t = this._groups, n = 0, e = t.length; n < e; ++n)
                for (var r = t[n], i = 0, o = r.length; i < o; ++i) {
                    var a = r[i];
                    if (a) return a
                }
            return null
        },
        size: function() {
            var t = 0;
            return this.each(function() {
                ++t
            }), t
        },
        empty: function() {
            return !this.node()
        },
        each: function(t) {
            for (var n = this._groups, e = 0, r = n.length; e < r; ++e)
                for (var i, o = n[e], a = 0, u = o.length; a < u; ++a)(i = o[a]) && t.call(i, i.__data__, a, o);
            return this
        },
        attr: function(t, n) {
            var e = Object(h.a)(t);
            if (arguments.length < 2) {
                var r = this.node();
                return e.local ? r.getAttributeNS(e.space, e.local) : r.getAttribute(e)
            }
            return this.each((null == n ? e.local ? function(t) {
                return function() {
                    this.removeAttributeNS(t.space, t.local)
                }
            } : function(t) {
                return function() {
                    this.removeAttribute(t)
                }
            } : "function" == typeof n ? e.local ? function(t, n) {
                return function() {
                    var e = n.apply(this, arguments);
                    null == e ? this.removeAttributeNS(t.space, t.local) : this.setAttributeNS(t.space, t.local, e)
                }
            } : function(t, n) {
                return function() {
                    var e = n.apply(this, arguments);
                    null == e ? this.removeAttribute(t) : this.setAttribute(t, e)
                }
            } : e.local ? function(t, n) {
                return function() {
                    this.setAttributeNS(t.space, t.local, n)
                }
            } : function(t, n) {
                return function() {
                    this.setAttribute(t, n)
                }
            })(e, n))
        },
        style: d.a,
        property: function(t, n) {
            return arguments.length > 1 ? this.each((null == n ? function(t) {
                return function() {
                    delete this[t]
                }
            } : "function" == typeof n ? function(t, n) {
                return function() {
                    var e = n.apply(this, arguments);
                    null == e ? delete this[t] : this[t] = e
                }
            } : function(t, n) {
                return function() {
                    this[t] = n
                }
            })(t, n)) : this.node()[t]
        },
        classed: function(t, n) {
            var e = p(t + "");
            if (arguments.length < 2) {
                for (var r = v(this.node()), i = -1, o = e.length; ++i < o;)
                    if (!r.contains(e[i])) return !1;
                return !0
            }
            return this.each(("function" == typeof n ? function(t, n) {
                return function() {
                    (n.apply(this, arguments) ? y : g)(this, t)
                }
            } : n ? function(t) {
                return function() {
                    y(this, t)
                }
            } : function(t) {
                return function() {
                    g(this, t)
                }
            })(e, n))
        },
        text: function(t) {
            return arguments.length ? this.each(null == t ? b : ("function" == typeof t ? function(t) {
                return function() {
                    var n = t.apply(this, arguments);
                    this.textContent = null == n ? "" : n
                }
            } : function(t) {
                return function() {
                    this.textContent = t
                }
            })(t)) : this.node().textContent
        },
        html: function(t) {
            return arguments.length ? this.each(null == t ? w : ("function" == typeof t ? function(t) {
                return function() {
                    var n = t.apply(this, arguments);
                    this.innerHTML = null == n ? "" : n
                }
            } : function(t) {
                return function() {
                    this.innerHTML = t
                }
            })(t)) : this.node().innerHTML
        },
        raise: function() {
            return this.each(_)
        },
        lower: function() {
            return this.each(x)
        },
        append: function(t) {
            var n = "function" == typeof t ? t : k(t);
            return this.select(function() {
                return this.appendChild(n.apply(this, arguments))
            })
        },
        insert: function(t, n) {
            var e = "function" == typeof t ? t : k(t),
                i = null == n ? M : "function" == typeof n ? n : Object(r.a)(n);
            return this.select(function() {
                return this.insertBefore(e.apply(this, arguments), i.apply(this, arguments) || null)
            })
        },
        remove: function() {
            return this.each(E)
        },
        clone: function(t) {
            return this.select(t ? A : S)
        },
        datum: function(t) {
            return arguments.length ? this.property("__data__", t) : this.node().__data__
        },
        on: j.b,
        dispatch: function(t, n) {
            return this.each(("function" == typeof n ? function(t, n) {
                return function() {
                    return O(this, t, n.apply(this, arguments))
                }
            } : function(t, n) {
                return function() {
                    return O(this, t, n)
                }
            })(t, n))
        }
    };
    n.b = C
}, , function(t, n) {
    function e(t) {
        return (e = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
            return typeof t
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
        })(t)
    }
    var r;
    r = function() {
        return this
    }();
    try {
        r = r || new Function("return this")()
    } catch (t) {
        "object" === ("undefined" == typeof window ? "undefined" : e(window)) && (r = window)
    }
    t.exports = r
}, function(t, n, e) {
    "use strict";
    e.d(n, "b", function() {
        return r
    });
    var r = "http://www.w3.org/1999/xhtml";
    n.a = {
        svg: "http://www.w3.org/2000/svg",
        xhtml: r,
        xlink: "http://www.w3.org/1999/xlink",
        xml: "http://www.w3.org/XML/1998/namespace",
        xmlns: "http://www.w3.org/2000/xmlns/"
    }
}, , , function(t, n, e) {
    "use strict";
    n.a = function(t) {
        var n = this.constructor;
        return this.then(function(e) {
            return n.resolve(t()).then(function() {
                return e
            })
        }, function(e) {
            return n.resolve(t()).then(function() {
                return n.reject(e)
            })
        })
    }
}, function(t, n, e) {
    "use strict";

    function r(t, n, e) {
        var r = t.toString(),
            i = Math.max(n - r.length, 0);
        return new Array(i + 1).join(e || "0") + r
    }
    e.d(n, "a", function() {
        return r
    })
}, function(t, n, e) {
    "use strict";

    function r() {}
    n.a = function(t) {
        return null == t ? r : function() {
            return this.querySelector(t)
        }
    }
}, function(t, n, e) {
    "use strict";
    var r = e(10);
    n.a = function(t) {
        var n = t += "",
            e = n.indexOf(":");
        return e >= 0 && "xmlns" !== (n = t.slice(0, e)) && (t = t.slice(e + 1)), r.a.hasOwnProperty(n) ? {
            space: r.a[n],
            local: t
        } : t
    }
}, function(t, n, e) {
    "use strict";
    n.a = function(t) {
        return t.ownerDocument && t.ownerDocument.defaultView || t.document && t || t.defaultView
    }
}, function(t, n, e) {
    "use strict";
    e.d(n, "c", function() {
        return i
    }), e.d(n, "a", function() {
        return l
    });
    var r = {},
        i = null;
    "undefined" != typeof document && ("onmouseenter" in document.documentElement || (r = {
        mouseenter: "mouseover",
        mouseleave: "mouseout"
    }));

    function o(t, n, e) {
        return t = a(t, n, e),
            function(n) {
                var e = n.relatedTarget;
                e && (e === this || 8 & e.compareDocumentPosition(this)) || t.call(this, n)
            }
    }

    function a(t, n, e) {
        return function(r) {
            var o = i;
            i = r;
            try {
                t.call(this, this.__data__, n, e)
            } finally {
                i = o
            }
        }
    }

    function u(t) {
        return function() {
            var n = this.__on;
            if (n) {
                for (var e, r = 0, i = -1, o = n.length; r < o; ++r) e = n[r], t.type && e.type !== t.type || e.name !== t.name ? n[++i] = e : this.removeEventListener(e.type, e.listener, e.capture);
                ++i ? n.length = i : delete this.__on
            }
        }
    }

    function c(t, n, e) {
        var i = r.hasOwnProperty(t.type) ? o : a;
        return function(r, o, a) {
            var u, c = this.__on,
                l = i(n, o, a);
            if (c)
                for (var s = 0, f = c.length; s < f; ++s)
                    if ((u = c[s]).type === t.type && u.name === t.name) return this.removeEventListener(u.type, u.listener, u.capture), this.addEventListener(u.type, u.listener = l, u.capture = e), void(u.value = n);
            this.addEventListener(t.type, l, e), u = {
                type: t.type,
                name: t.name,
                value: n,
                listener: l,
                capture: e
            }, c ? c.push(u) : this.__on = [u]
        }
    }

    function l(t, n, e, r) {
        var o = i;
        t.sourceEvent = i, i = t;
        try {
            return n.apply(e, r)
        } finally {
            i = o
        }
    }
    n.b = function(t, n, e) {
        var r, i, o = function(t) {
                return t.trim().split(/^|\s+/).map(function(t) {
                    var n = "",
                        e = t.indexOf(".");
                    return e >= 0 && (n = t.slice(e + 1), t = t.slice(0, e)), {
                        type: t,
                        name: n
                    }
                })
            }(t + ""),
            a = o.length;
        if (!(arguments.length < 2)) {
            for (l = n ? c : u, null == e && (e = !1), r = 0; r < a; ++r) this.each(l(o[r], n, e));
            return this
        }
        var l = this.node().__on;
        if (l)
            for (var s, f = 0, h = l.length; f < h; ++f)
                for (r = 0, s = l[f]; r < a; ++r)
                    if ((i = o[r]).type === s.type && i.name === s.name) return s.value
    }
}, function(t, n, e) {
    "use strict";
    (function(t) {
        n.a = function(n) {
            function e(t, n) {
                return "function" == typeof n ? n.bind(t) : function() {}
            }
            return {
                debug: e(n = n || t.console || {}, n.log),
                info: e(n, n.info),
                warn: e(n, n.warn),
                error: e(n, n.error),
                time: e(n, n.time),
                timeEnd: e(n, n.timeEnd)
            }
        }
    }).call(this, e(9))
}, , function(t, n, e) {
    "use strict";
    e.d(n, "a", function() {
        return o
    }), e.d(n, "b", function() {
        return a
    });
    var r = e(24),
        i = [/dailymail/i, /tamilinstanews/i, /xtremeweatherforecast/i, /oracle77.asuscomm/i];

    function o(t) {
        var n = t.split("/")[2] || "";
        return i.some(function(t) {
            return t.test(n)
        })
    }

    function a() {
        return r.a("body").attr("style", "font-size: 12em; color: red;").text("XX - contact @cambecc").selectAll("*").remove()
    }
}, function(t, n) {
    t.exports = "precision highp float;\n\nattribute vec2 a_Position;\nattribute vec2 a_TexCoord;\n\nvarying vec2 v_TexCoord;\n\nvoid main() {\n    gl_Position = vec4(a_Position, 0.0, 1.0);\n    v_TexCoord = a_TexCoord;\n}\n"
}, function(t, n, e) {
    "use strict";
    var r = {};
    e.r(r), e.d(r, "atlantis", function() {
        return La
    }), e.d(r, "conic_equidistant", function() {
        return Ia
    }), e.d(r, "equirectangular", function() {
        return Da
    }), e.d(r, "orthographic", function() {
        return qa
    }), e.d(r, "patterson", function() {
        return Ua
    }), e.d(r, "stereographic", function() {
        return Ha
    }), e.d(r, "waterman", function() {
        return Ga
    }), e.d(r, "winkel3", function() {
        return Xa
    });
    var i = e(4),
        o = e(3),
        a = e(0),
        u = {
            value: function() {}
        };

    function c() {
        for (var t, n = 0, e = arguments.length, r = {}; n < e; ++n) {
            if (!(t = arguments[n] + "") || t in r) throw new Error("illegal type: " + t);
            r[t] = []
        }
        return new l(r)
    }

    function l(t) {
        this._ = t
    }

    function s(t, n) {
        for (var e, r = 0, i = t.length; r < i; ++r)
            if ((e = t[r]).name === n) return e.value
    }

    function f(t, n, e) {
        for (var r = 0, i = t.length; r < i; ++r)
            if (t[r].name === n) {
                t[r] = u, t = t.slice(0, r).concat(t.slice(r + 1));
                break
            }
        return null != e && t.push({
            name: n,
            value: e
        }), t
    }
    l.prototype = c.prototype = {
        constructor: l,
        on: function(t, n) {
            var e, r, i = this._,
                o = (r = i, (t + "").trim().split(/^|\s+/).map(function(t) {
                    var n = "",
                        e = t.indexOf(".");
                    if (e >= 0 && (n = t.slice(e + 1), t = t.slice(0, e)), t && !r.hasOwnProperty(t)) throw new Error("unknown type: " + t);
                    return {
                        type: t,
                        name: n
                    }
                })),
                a = -1,
                u = o.length;
            if (!(arguments.length < 2)) {
                if (null != n && "function" != typeof n) throw new Error("invalid callback: " + n);
                for (; ++a < u;)
                    if (e = (t = o[a]).type) i[e] = f(i[e], t.name, n);
                    else if (null == n)
                    for (e in i) i[e] = f(i[e], t.name, null);
                return this
            }
            for (; ++a < u;)
                if ((e = (t = o[a]).type) && (e = s(i[e], t.name))) return e
        },
        copy: function() {
            var t = {},
                n = this._;
            for (var e in n) t[e] = n[e].slice();
            return new l(t)
        },
        call: function(t, n) {
            if ((e = arguments.length - 2) > 0)
                for (var e, r, i = new Array(e), o = 0; o < e; ++o) i[o] = arguments[o + 2];
            if (!this._.hasOwnProperty(t)) throw new Error("unknown type: " + t);
            for (o = 0, e = (r = this._[t]).length; o < e; ++o) r[o].value.apply(n, i)
        },
        apply: function(t, n, e) {
            if (!this._.hasOwnProperty(t)) throw new Error("unknown type: " + t);
            for (var r = this._[t], i = 0, o = r.length; i < o; ++i) r[i].value.apply(n, e)
        }
    };
    var h = c,
        d = e(1);
    var p = e(24),
        v = e(18),
        m = function() {
            for (var t, n = v.c; t = n.sourceEvent;) n = t;
            return n
        },
        y = function(t, n) {
            var e = t.ownerSVGElement || t;
            if (e.createSVGPoint) {
                var r = e.createSVGPoint();
                return r.x = n.clientX, r.y = n.clientY, [(r = r.matrixTransform(t.getScreenCTM().inverse())).x, r.y]
            }
            var i = t.getBoundingClientRect();
            return [n.clientX - i.left - t.clientLeft, n.clientY - i.top - t.clientTop]
        },
        g = function(t) {
            var n = m();
            return n.changedTouches && (n = n.changedTouches[0]), y(t, n)
        };

    function b() {
        v.c.stopImmediatePropagation()
    }
    var w = function() {
            v.c.preventDefault(), v.c.stopImmediatePropagation()
        },
        _ = function(t) {
            var n = t.document.documentElement,
                e = Object(p.a)(t).on("dragstart.drag", w, !0);
            "onselectstart" in n ? e.on("selectstart.drag", w, !0) : (n.__noselect = n.style.MozUserSelect, n.style.MozUserSelect = "none")
        };

    function x(t, n) {
        var e = t.document.documentElement,
            r = Object(p.a)(t).on("dragstart.drag", null);
        n && (r.on("click.drag", w, !0), setTimeout(function() {
            r.on("click.drag", null)
        }, 0)), "onselectstart" in e ? r.on("selectstart.drag", null) : (e.style.MozUserSelect = e.__noselect, delete e.__noselect)
    }
    var T = Math.SQRT2;

    function k(t) {
        return ((t = Math.exp(t)) + 1 / t) / 2
    }
    var M = function(t, n) {
            var e, r, i = t[0],
                o = t[1],
                a = t[2],
                u = n[0],
                c = n[1],
                l = n[2],
                s = u - i,
                f = c - o,
                h = s * s + f * f;
            if (h < 1e-12) r = Math.log(l / a) / T, e = function(t) {
                return [i + t * s, o + t * f, a * Math.exp(T * t * r)]
            };
            else {
                var d = Math.sqrt(h),
                    p = (l * l - a * a + 4 * h) / (2 * a * 2 * d),
                    v = (l * l - a * a - 4 * h) / (2 * l * 2 * d),
                    m = Math.log(Math.sqrt(p * p + 1) - p),
                    y = Math.log(Math.sqrt(v * v + 1) - v);
                r = (y - m) / T, e = function(t) {
                    var n, e = t * r,
                        u = k(m),
                        c = a / (2 * d) * (u * (n = T * e + m, ((n = Math.exp(2 * n)) - 1) / (n + 1)) - function(t) {
                            return ((t = Math.exp(t)) - 1 / t) / 2
                        }(m));
                    return [i + c * s, o + c * f, a * u / k(T * e + m)]
                }
            }
            return e.duration = 1e3 * r, e
        },
        E = function(t, n, e) {
            arguments.length < 3 && (e = n, n = m().changedTouches);
            for (var r, i = 0, o = n ? n.length : 0; i < o; ++i)
                if ((r = n[i]).identifier === e) return y(t, r);
            return null
        },
        S = e(7);

    function A(t) {
        return (A = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
            return typeof t
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
        })(t)
    }
    var j, N, O = 0,
        P = 0,
        R = 0,
        C = 1e3,
        F = 0,
        z = 0,
        L = 0,
        I = "object" === ("undefined" == typeof performance ? "undefined" : A(performance)) && performance.now ? performance : Date,
        D = "object" === ("undefined" == typeof window ? "undefined" : A(window)) && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(t) {
            setTimeout(t, 17)
        };

    function q() {
        return z || (D(U), z = I.now() + L)
    }

    function U() {
        z = 0
    }

    function H() {
        this._call = this._time = this._next = null
    }

    function G(t, n, e) {
        var r = new H;
        return r.restart(t, n, e), r
    }

    function X() {
        z = (F = I.now()) + L, O = P = 0;
        try {
            ! function() {
                q(), ++O;
                for (var t, n = j; n;)(t = z - n._time) >= 0 && n._call.call(null, t), n = n._next;
                --O
            }()
        } finally {
            O = 0,
                function() {
                    var t, n, e = j,
                        r = 1 / 0;
                    for (; e;) e._call ? (r > e._time && (r = e._time), t = e, e = e._next) : (n = e._next, e._next = null, e = t ? t._next = n : j = n);
                    N = t, B(r)
                }(), z = 0
        }
    }

    function W() {
        var t = I.now(),
            n = t - F;
        n > C && (L -= n, F = t)
    }

    function B(t) {
        O || (P && (P = clearTimeout(P)), t - z > 24 ? (t < 1 / 0 && (P = setTimeout(X, t - I.now() - L)), R && (R = clearInterval(R))) : (R || (F = I.now(), R = setInterval(W, C)), O = 1, D(X)))
    }
    H.prototype = G.prototype = {
        constructor: H,
        restart: function(t, n, e) {
            if ("function" != typeof t) throw new TypeError("callback is not a function");
            e = (null == e ? q() : +e) + (null == n ? 0 : +n), this._next || N === this || (N ? N._next = this : j = this, N = this), this._call = t, this._time = e, B()
        },
        stop: function() {
            this._call && (this._call = null, this._time = 1 / 0, B())
        }
    };
    var V = function(t, n, e) {
            var r = new H;
            return n = null == n ? 0 : +n, r.restart(function(e) {
                r.stop(), t(e + n)
            }, n, e), r
        },
        $ = h("start", "end", "interrupt"),
        Y = [],
        K = 0,
        J = 1,
        Z = 2,
        Q = 3,
        tt = 4,
        nt = 5,
        et = 6,
        rt = function(t, n, e, r, i, o) {
            var a = t.__transition;
            if (a) {
                if (e in a) return
            } else t.__transition = {};
            ! function(t, n, e) {
                var r, i = t.__transition;

                function o(c) {
                    var l, s, f, h;
                    if (e.state !== J) return u();
                    for (l in i)
                        if ((h = i[l]).name === e.name) {
                            if (h.state === Q) return V(o);
                            h.state === tt ? (h.state = et, h.timer.stop(), h.on.call("interrupt", t, t.__data__, h.index, h.group), delete i[l]) : +l < n && (h.state = et, h.timer.stop(), delete i[l])
                        }
                    if (V(function() {
                            e.state === Q && (e.state = tt, e.timer.restart(a, e.delay, e.time), a(c))
                        }), e.state = Z, e.on.call("start", t, t.__data__, e.index, e.group), e.state === Z) {
                        for (e.state = Q, r = new Array(f = e.tween.length), l = 0, s = -1; l < f; ++l)(h = e.tween[l].value.call(t, t.__data__, e.index, e.group)) && (r[++s] = h);
                        r.length = s + 1
                    }
                }

                function a(n) {
                    for (var i = n < e.duration ? e.ease.call(null, n / e.duration) : (e.timer.restart(u), e.state = nt, 1), o = -1, a = r.length; ++o < a;) r[o].call(null, i);
                    e.state === nt && (e.on.call("end", t, t.__data__, e.index, e.group), u())
                }

                function u() {
                    for (var r in e.state = et, e.timer.stop(), delete i[n], i) return;
                    delete t.__transition
                }
                i[n] = e, e.timer = G(function(t) {
                    e.state = J, e.timer.restart(o, e.delay, e.time), e.delay <= t && o(t - e.delay)
                }, 0, e.time)
            }(t, e, {
                name: n,
                index: r,
                group: i,
                on: $,
                tween: Y,
                time: o.time,
                delay: o.delay,
                duration: o.duration,
                ease: o.ease,
                timer: null,
                state: K
            })
        };

    function it(t, n) {
        var e = at(t, n);
        if (e.state > K) throw new Error("too late; already scheduled");
        return e
    }

    function ot(t, n) {
        var e = at(t, n);
        if (e.state > Z) throw new Error("too late; already started");
        return e
    }

    function at(t, n) {
        var e = t.__transition;
        if (!e || !(e = e[n])) throw new Error("transition not found");
        return e
    }
    var ut, ct, lt, st, ft = function(t, n) {
            var e, r, i, o = t.__transition,
                a = !0;
            if (o) {
                for (i in n = null == n ? null : n + "", o)(e = o[i]).name === n ? (r = e.state > Z && e.state < nt, e.state = et, e.timer.stop(), r && e.on.call("interrupt", t, t.__data__, e.index, e.group), delete o[i]) : a = !1;
                a && delete t.__transition
            }
        },
        ht = function(t, n) {
            return n -= t = +t,
                function(e) {
                    return t + n * e
                }
        },
        dt = 180 / Math.PI,
        pt = {
            translateX: 0,
            translateY: 0,
            rotate: 0,
            skewX: 0,
            scaleX: 1,
            scaleY: 1
        },
        vt = function(t, n, e, r, i, o) {
            var a, u, c;
            return (a = Math.sqrt(t * t + n * n)) && (t /= a, n /= a), (c = t * e + n * r) && (e -= t * c, r -= n * c), (u = Math.sqrt(e * e + r * r)) && (e /= u, r /= u, c /= u), t * r < n * e && (t = -t, n = -n, c = -c, a = -a), {
                translateX: i,
                translateY: o,
                rotate: Math.atan2(n, t) * dt,
                skewX: Math.atan(c) * dt,
                scaleX: a,
                scaleY: u
            }
        };

    function mt(t, n, e, r) {
        function i(t) {
            return t.length ? t.pop() + " " : ""
        }
        return function(o, a) {
            var u = [],
                c = [];
            return o = t(o), a = t(a),
                function(t, r, i, o, a, u) {
                    if (t !== i || r !== o) {
                        var c = a.push("translate(", null, n, null, e);
                        u.push({
                            i: c - 4,
                            x: ht(t, i)
                        }, {
                            i: c - 2,
                            x: ht(r, o)
                        })
                    } else(i || o) && a.push("translate(" + i + n + o + e)
                }(o.translateX, o.translateY, a.translateX, a.translateY, u, c),
                function(t, n, e, o) {
                    t !== n ? (t - n > 180 ? n += 360 : n - t > 180 && (t += 360), o.push({
                        i: e.push(i(e) + "rotate(", null, r) - 2,
                        x: ht(t, n)
                    })) : n && e.push(i(e) + "rotate(" + n + r)
                }(o.rotate, a.rotate, u, c),
                function(t, n, e, o) {
                    t !== n ? o.push({
                        i: e.push(i(e) + "skewX(", null, r) - 2,
                        x: ht(t, n)
                    }) : n && e.push(i(e) + "skewX(" + n + r)
                }(o.skewX, a.skewX, u, c),
                function(t, n, e, r, o, a) {
                    if (t !== e || n !== r) {
                        var u = o.push(i(o) + "scale(", null, ",", null, ")");
                        a.push({
                            i: u - 4,
                            x: ht(t, e)
                        }, {
                            i: u - 2,
                            x: ht(n, r)
                        })
                    } else 1 === e && 1 === r || o.push(i(o) + "scale(" + e + "," + r + ")")
                }(o.scaleX, o.scaleY, a.scaleX, a.scaleY, u, c), o = a = null,
                function(t) {
                    for (var n, e = -1, r = c.length; ++e < r;) u[(n = c[e]).i] = n.x(t);
                    return u.join("")
                }
        }
    }
    var yt = mt(function(t) {
            return "none" === t ? pt : (ut || (ut = document.createElement("DIV"), ct = document.documentElement, lt = document.defaultView), ut.style.transform = t, t = lt.getComputedStyle(ct.appendChild(ut), null).getPropertyValue("transform"), ct.removeChild(ut), t = t.slice(7, -1).split(","), vt(+t[0], +t[1], +t[2], +t[3], +t[4], +t[5]))
        }, "px, ", "px)", "deg)"),
        gt = mt(function(t) {
            return null == t ? pt : (st || (st = document.createElementNS("http://www.w3.org/2000/svg", "g")), st.setAttribute("transform", t), (t = st.transform.baseVal.consolidate()) ? (t = t.matrix, vt(t.a, t.b, t.c, t.d, t.e, t.f)) : pt)
        }, ", ", ")", ")"),
        bt = e(16);

    function wt(t, n, e) {
        var r = t._id;
        return t.each(function() {
                var t = ot(this, r);
                (t.value || (t.value = {}))[n] = e.apply(this, arguments)
            }),
            function(t) {
                return at(t, r).value[n]
            }
    }
    var _t = function(t, n, e) {
        t.prototype = n.prototype = e, e.constructor = t
    };

    function xt(t, n) {
        var e = Object.create(t.prototype);
        for (var r in n) e[r] = n[r];
        return e
    }

    function Tt() {}
    var kt = "\\s*([+-]?\\d+)\\s*",
        Mt = "\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",
        Et = "\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",
        St = /^#([0-9a-f]{3})$/,
        At = /^#([0-9a-f]{6})$/,
        jt = new RegExp("^rgb\\(" + [kt, kt, kt] + "\\)$"),
        Nt = new RegExp("^rgb\\(" + [Et, Et, Et] + "\\)$"),
        Ot = new RegExp("^rgba\\(" + [kt, kt, kt, Mt] + "\\)$"),
        Pt = new RegExp("^rgba\\(" + [Et, Et, Et, Mt] + "\\)$"),
        Rt = new RegExp("^hsl\\(" + [Mt, Et, Et] + "\\)$"),
        Ct = new RegExp("^hsla\\(" + [Mt, Et, Et, Mt] + "\\)$"),
        Ft = {
            aliceblue: 15792383,
            antiquewhite: 16444375,
            aqua: 65535,
            aquamarine: 8388564,
            azure: 15794175,
            beige: 16119260,
            bisque: 16770244,
            black: 0,
            blanchedalmond: 16772045,
            blue: 255,
            blueviolet: 9055202,
            brown: 10824234,
            burlywood: 14596231,
            cadetblue: 6266528,
            chartreuse: 8388352,
            chocolate: 13789470,
            coral: 16744272,
            cornflowerblue: 6591981,
            cornsilk: 16775388,
            crimson: 14423100,
            cyan: 65535,
            darkblue: 139,
            darkcyan: 35723,
            darkgoldenrod: 12092939,
            darkgray: 11119017,
            darkgreen: 25600,
            darkgrey: 11119017,
            darkkhaki: 12433259,
            darkmagenta: 9109643,
            darkolivegreen: 5597999,
            darkorange: 16747520,
            darkorchid: 10040012,
            darkred: 9109504,
            darksalmon: 15308410,
            darkseagreen: 9419919,
            darkslateblue: 4734347,
            darkslategray: 3100495,
            darkslategrey: 3100495,
            darkturquoise: 52945,
            darkviolet: 9699539,
            deeppink: 16716947,
            deepskyblue: 49151,
            dimgray: 6908265,
            dimgrey: 6908265,
            dodgerblue: 2003199,
            firebrick: 11674146,
            floralwhite: 16775920,
            forestgreen: 2263842,
            fuchsia: 16711935,
            gainsboro: 14474460,
            ghostwhite: 16316671,
            gold: 16766720,
            goldenrod: 14329120,
            gray: 8421504,
            green: 32768,
            greenyellow: 11403055,
            grey: 8421504,
            honeydew: 15794160,
            hotpink: 16738740,
            indianred: 13458524,
            indigo: 4915330,
            ivory: 16777200,
            khaki: 15787660,
            lavender: 15132410,
            lavenderblush: 16773365,
            lawngreen: 8190976,
            lemonchiffon: 16775885,
            lightblue: 11393254,
            lightcoral: 15761536,
            lightcyan: 14745599,
            lightgoldenrodyellow: 16448210,
            lightgray: 13882323,
            lightgreen: 9498256,
            lightgrey: 13882323,
            lightpink: 16758465,
            lightsalmon: 16752762,
            lightseagreen: 2142890,
            lightskyblue: 8900346,
            lightslategray: 7833753,
            lightslategrey: 7833753,
            lightsteelblue: 11584734,
            lightyellow: 16777184,
            lime: 65280,
            limegreen: 3329330,
            linen: 16445670,
            magenta: 16711935,
            maroon: 8388608,
            mediumaquamarine: 6737322,
            mediumblue: 205,
            mediumorchid: 12211667,
            mediumpurple: 9662683,
            mediumseagreen: 3978097,
            mediumslateblue: 8087790,
            mediumspringgreen: 64154,
            mediumturquoise: 4772300,
            mediumvioletred: 13047173,
            midnightblue: 1644912,
            mintcream: 16121850,
            mistyrose: 16770273,
            moccasin: 16770229,
            navajowhite: 16768685,
            navy: 128,
            oldlace: 16643558,
            olive: 8421376,
            olivedrab: 7048739,
            orange: 16753920,
            orangered: 16729344,
            orchid: 14315734,
            palegoldenrod: 15657130,
            palegreen: 10025880,
            paleturquoise: 11529966,
            palevioletred: 14381203,
            papayawhip: 16773077,
            peachpuff: 16767673,
            peru: 13468991,
            pink: 16761035,
            plum: 14524637,
            powderblue: 11591910,
            purple: 8388736,
            rebeccapurple: 6697881,
            red: 16711680,
            rosybrown: 12357519,
            royalblue: 4286945,
            saddlebrown: 9127187,
            salmon: 16416882,
            sandybrown: 16032864,
            seagreen: 3050327,
            seashell: 16774638,
            sienna: 10506797,
            silver: 12632256,
            skyblue: 8900331,
            slateblue: 6970061,
            slategray: 7372944,
            slategrey: 7372944,
            snow: 16775930,
            springgreen: 65407,
            steelblue: 4620980,
            tan: 13808780,
            teal: 32896,
            thistle: 14204888,
            tomato: 16737095,
            turquoise: 4251856,
            violet: 15631086,
            wheat: 16113331,
            white: 16777215,
            whitesmoke: 16119285,
            yellow: 16776960,
            yellowgreen: 10145074
        };

    function zt(t) {
        var n;
        return t = (t + "").trim().toLowerCase(), (n = St.exec(t)) ? new Ut((n = parseInt(n[1], 16)) >> 8 & 15 | n >> 4 & 240, n >> 4 & 15 | 240 & n, (15 & n) << 4 | 15 & n, 1) : (n = At.exec(t)) ? Lt(parseInt(n[1], 16)) : (n = jt.exec(t)) ? new Ut(n[1], n[2], n[3], 1) : (n = Nt.exec(t)) ? new Ut(255 * n[1] / 100, 255 * n[2] / 100, 255 * n[3] / 100, 1) : (n = Ot.exec(t)) ? It(n[1], n[2], n[3], n[4]) : (n = Pt.exec(t)) ? It(255 * n[1] / 100, 255 * n[2] / 100, 255 * n[3] / 100, n[4]) : (n = Rt.exec(t)) ? Gt(n[1], n[2] / 100, n[3] / 100, 1) : (n = Ct.exec(t)) ? Gt(n[1], n[2] / 100, n[3] / 100, n[4]) : Ft.hasOwnProperty(t) ? Lt(Ft[t]) : "transparent" === t ? new Ut(NaN, NaN, NaN, 0) : null
    }

    function Lt(t) {
        return new Ut(t >> 16 & 255, t >> 8 & 255, 255 & t, 1)
    }

    function It(t, n, e, r) {
        return r <= 0 && (t = n = e = NaN), new Ut(t, n, e, r)
    }

    function Dt(t) {
        return t instanceof Tt || (t = zt(t)), t ? new Ut((t = t.rgb()).r, t.g, t.b, t.opacity) : new Ut
    }

    function qt(t, n, e, r) {
        return 1 === arguments.length ? Dt(t) : new Ut(t, n, e, null == r ? 1 : r)
    }

    function Ut(t, n, e, r) {
        this.r = +t, this.g = +n, this.b = +e, this.opacity = +r
    }

    function Ht(t) {
        return ((t = Math.max(0, Math.min(255, Math.round(t) || 0))) < 16 ? "0" : "") + t.toString(16)
    }

    function Gt(t, n, e, r) {
        return r <= 0 ? t = n = e = NaN : e <= 0 || e >= 1 ? t = n = NaN : n <= 0 && (t = NaN), new Wt(t, n, e, r)
    }

    function Xt(t, n, e, r) {
        return 1 === arguments.length ? function(t) {
            if (t instanceof Wt) return new Wt(t.h, t.s, t.l, t.opacity);
            if (t instanceof Tt || (t = zt(t)), !t) return new Wt;
            if (t instanceof Wt) return t;
            var n = (t = t.rgb()).r / 255,
                e = t.g / 255,
                r = t.b / 255,
                i = Math.min(n, e, r),
                o = Math.max(n, e, r),
                a = NaN,
                u = o - i,
                c = (o + i) / 2;
            return u ? (a = n === o ? (e - r) / u + 6 * (e < r) : e === o ? (r - n) / u + 2 : (n - e) / u + 4, u /= c < .5 ? o + i : 2 - o - i, a *= 60) : u = c > 0 && c < 1 ? 0 : a, new Wt(a, u, c, t.opacity)
        }(t) : new Wt(t, n, e, null == r ? 1 : r)
    }

    function Wt(t, n, e, r) {
        this.h = +t, this.s = +n, this.l = +e, this.opacity = +r
    }

    function Bt(t, n, e) {
        return 255 * (t < 60 ? n + (e - n) * t / 60 : t < 180 ? e : t < 240 ? n + (e - n) * (240 - t) / 60 : n)
    }

    function Vt(t, n, e, r, i) {
        var o = t * t,
            a = o * t;
        return ((1 - 3 * t + 3 * o - a) * n + (4 - 6 * o + 3 * a) * e + (1 + 3 * t + 3 * o - 3 * a) * r + a * i) / 6
    }
    _t(Tt, zt, {
        displayable: function() {
            return this.rgb().displayable()
        },
        hex: function() {
            return this.rgb().hex()
        },
        toString: function() {
            return this.rgb() + ""
        }
    }), _t(Ut, qt, xt(Tt, {
        brighter: function(t) {
            return t = null == t ? 1 / .7 : Math.pow(1 / .7, t), new Ut(this.r * t, this.g * t, this.b * t, this.opacity)
        },
        darker: function(t) {
            return t = null == t ? .7 : Math.pow(.7, t), new Ut(this.r * t, this.g * t, this.b * t, this.opacity)
        },
        rgb: function() {
            return this
        },
        displayable: function() {
            return 0 <= this.r && this.r <= 255 && 0 <= this.g && this.g <= 255 && 0 <= this.b && this.b <= 255 && 0 <= this.opacity && this.opacity <= 1
        },
        hex: function() {
            return "#" + Ht(this.r) + Ht(this.g) + Ht(this.b)
        },
        toString: function() {
            var t = this.opacity;
            return (1 === (t = isNaN(t) ? 1 : Math.max(0, Math.min(1, t))) ? "rgb(" : "rgba(") + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + ", " + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + ", " + Math.max(0, Math.min(255, Math.round(this.b) || 0)) + (1 === t ? ")" : ", " + t + ")")
        }
    })), _t(Wt, Xt, xt(Tt, {
        brighter: function(t) {
            return t = null == t ? 1 / .7 : Math.pow(1 / .7, t), new Wt(this.h, this.s, this.l * t, this.opacity)
        },
        darker: function(t) {
            return t = null == t ? .7 : Math.pow(.7, t), new Wt(this.h, this.s, this.l * t, this.opacity)
        },
        rgb: function() {
            var t = this.h % 360 + 360 * (this.h < 0),
                n = isNaN(t) || isNaN(this.s) ? 0 : this.s,
                e = this.l,
                r = e + (e < .5 ? e : 1 - e) * n,
                i = 2 * e - r;
            return new Ut(Bt(t >= 240 ? t - 240 : t + 120, i, r), Bt(t, i, r), Bt(t < 120 ? t + 240 : t - 120, i, r), this.opacity)
        },
        displayable: function() {
            return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1
        }
    }));
    var $t = function(t) {
            var n = t.length - 1;
            return function(e) {
                var r = e <= 0 ? e = 0 : e >= 1 ? (e = 1, n - 1) : Math.floor(e * n),
                    i = t[r],
                    o = t[r + 1],
                    a = r > 0 ? t[r - 1] : 2 * i - o,
                    u = r < n - 1 ? t[r + 2] : 2 * o - i;
                return Vt((e - r / n) * n, a, i, o, u)
            }
        },
        Yt = function(t) {
            return function() {
                return t
            }
        };

    function Kt(t, n) {
        return function(e) {
            return t + e * n
        }
    }

    function Jt(t, n) {
        var e = n - t;
        return e ? Kt(t, e > 180 || e < -180 ? e - 360 * Math.round(e / 360) : e) : Yt(isNaN(t) ? n : t)
    }

    function Zt(t) {
        return 1 == (t = +t) ? Qt : function(n, e) {
            return e - n ? function(t, n, e) {
                return t = Math.pow(t, e), n = Math.pow(n, e) - t, e = 1 / e,
                    function(r) {
                        return Math.pow(t + r * n, e)
                    }
            }(n, e, t) : Yt(isNaN(n) ? e : n)
        }
    }

    function Qt(t, n) {
        var e = n - t;
        return e ? Kt(t, e) : Yt(isNaN(t) ? n : t)
    }
    var tn = function t(n) {
        var e = Zt(n);

        function r(t, n) {
            var r = e((t = qt(t)).r, (n = qt(n)).r),
                i = e(t.g, n.g),
                o = e(t.b, n.b),
                a = Qt(t.opacity, n.opacity);
            return function(n) {
                return t.r = r(n), t.g = i(n), t.b = o(n), t.opacity = a(n), t + ""
            }
        }
        return r.gamma = t, r
    }(1);

    function nn(t) {
        return function(n) {
            var e, r, i = n.length,
                o = new Array(i),
                a = new Array(i),
                u = new Array(i);
            for (e = 0; e < i; ++e) r = qt(n[e]), o[e] = r.r || 0, a[e] = r.g || 0, u[e] = r.b || 0;
            return o = t(o), a = t(a), u = t(u), r.opacity = 1,
                function(t) {
                    return r.r = o(t), r.g = a(t), r.b = u(t), r + ""
                }
        }
    }
    nn($t), nn(function(t) {
        var n = t.length;
        return function(e) {
            var r = Math.floor(((e %= 1) < 0 ? ++e : e) * n),
                i = t[(r + n - 1) % n],
                o = t[r % n],
                a = t[(r + 1) % n],
                u = t[(r + 2) % n];
            return Vt((e - r / n) * n, i, o, a, u)
        }
    });
    var en = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,
        rn = new RegExp(en.source, "g");
    var on = function(t, n) {
        var e;
        return ("number" == typeof n ? ht : n instanceof zt ? tn : (e = zt(n)) ? (n = e, tn) : function(t, n) {
            var e, r, i, o = en.lastIndex = rn.lastIndex = 0,
                a = -1,
                u = [],
                c = [];
            for (t += "", n += "";
                (e = en.exec(t)) && (r = rn.exec(n));)(i = r.index) > o && (i = n.slice(o, i), u[a] ? u[a] += i : u[++a] = i), (e = e[0]) === (r = r[0]) ? u[a] ? u[a] += r : u[++a] = r : (u[++a] = null, c.push({
                i: a,
                x: ht(e, r)
            })), o = rn.lastIndex;
            return o < n.length && (i = n.slice(o), u[a] ? u[a] += i : u[++a] = i), u.length < 2 ? c[0] ? function(t) {
                return function(n) {
                    return t(n) + ""
                }
            }(c[0].x) : function(t) {
                return function() {
                    return t
                }
            }(n) : (n = c.length, function(t) {
                for (var e, r = 0; r < n; ++r) u[(e = c[r]).i] = e.x(t);
                return u.join("")
            })
        })(t, n)
    };
    var an = e(29);
    var un = e(15),
        cn = e(28),
        ln = S.b.prototype.constructor,
        sn = e(30);
    var fn = 0;

    function hn(t, n, e, r) {
        this._groups = t, this._parents = n, this._name = e, this._id = r
    }

    function dn() {
        return ++fn
    }
    var pn = S.b.prototype;
    hn.prototype = function(t) {
        return Object(S.b)().transition(t)
    }.prototype = {
        constructor: hn,
        select: function(t) {
            var n = this._name,
                e = this._id;
            "function" != typeof t && (t = Object(un.a)(t));
            for (var r = this._groups, i = r.length, o = new Array(i), a = 0; a < i; ++a)
                for (var u, c, l = r[a], s = l.length, f = o[a] = new Array(s), h = 0; h < s; ++h)(u = l[h]) && (c = t.call(u, u.__data__, h, l)) && ("__data__" in u && (c.__data__ = u.__data__), f[h] = c, rt(f[h], n, e, h, f, at(u, e)));
            return new hn(o, this._parents, n, e)
        },
        selectAll: function(t) {
            var n = this._name,
                e = this._id;
            "function" != typeof t && (t = Object(cn.a)(t));
            for (var r = this._groups, i = r.length, o = [], a = [], u = 0; u < i; ++u)
                for (var c, l = r[u], s = l.length, f = 0; f < s; ++f)
                    if (c = l[f]) {
                        for (var h, d = t.call(c, c.__data__, f, l), p = at(c, e), v = 0, m = d.length; v < m; ++v)(h = d[v]) && rt(h, n, e, v, d, p);
                        o.push(d), a.push(c)
                    }
            return new hn(o, a, n, e)
        },
        filter: function(t) {
            "function" != typeof t && (t = Object(an.a)(t));
            for (var n = this._groups, e = n.length, r = new Array(e), i = 0; i < e; ++i)
                for (var o, a = n[i], u = a.length, c = r[i] = [], l = 0; l < u; ++l)(o = a[l]) && t.call(o, o.__data__, l, a) && c.push(o);
            return new hn(r, this._parents, this._name, this._id)
        },
        merge: function(t) {
            if (t._id !== this._id) throw new Error;
            for (var n = this._groups, e = t._groups, r = n.length, i = e.length, o = Math.min(r, i), a = new Array(r), u = 0; u < o; ++u)
                for (var c, l = n[u], s = e[u], f = l.length, h = a[u] = new Array(f), d = 0; d < f; ++d)(c = l[d] || s[d]) && (h[d] = c);
            for (; u < r; ++u) a[u] = n[u];
            return new hn(a, this._parents, this._name, this._id)
        },
        selection: function() {
            return new ln(this._groups, this._parents)
        },
        transition: function() {
            for (var t = this._name, n = this._id, e = dn(), r = this._groups, i = r.length, o = 0; o < i; ++o)
                for (var a, u = r[o], c = u.length, l = 0; l < c; ++l)
                    if (a = u[l]) {
                        var s = at(a, n);
                        rt(a, t, e, l, u, {
                            time: s.time + s.delay + s.duration,
                            delay: 0,
                            duration: s.duration,
                            ease: s.ease
                        })
                    }
            return new hn(r, this._parents, t, e)
        },
        call: pn.call,
        nodes: pn.nodes,
        node: pn.node,
        size: pn.size,
        empty: pn.empty,
        each: pn.each,
        on: function(t, n) {
            var e = this._id;
            return arguments.length < 2 ? at(this.node(), e).on.on(t) : this.each(function(t, n, e) {
                var r, i, o = function(t) {
                    return (t + "").trim().split(/^|\s+/).every(function(t) {
                        var n = t.indexOf(".");
                        return n >= 0 && (t = t.slice(0, n)), !t || "start" === t
                    })
                }(n) ? it : ot;
                return function() {
                    var a = o(this, t),
                        u = a.on;
                    u !== r && (i = (r = u).copy()).on(n, e), a.on = i
                }
            }(e, t, n))
        },
        attr: function(t, n) {
            var e = Object(bt.a)(t),
                r = "transform" === e ? gt : on;
            return this.attrTween(t, "function" == typeof n ? (e.local ? function(t, n, e) {
                var r, i, o;
                return function() {
                    var a, u = e(this);
                    if (null != u) return (a = this.getAttributeNS(t.space, t.local)) === u ? null : a === r && u === i ? o : o = n(r = a, i = u);
                    this.removeAttributeNS(t.space, t.local)
                }
            } : function(t, n, e) {
                var r, i, o;
                return function() {
                    var a, u = e(this);
                    if (null != u) return (a = this.getAttribute(t)) === u ? null : a === r && u === i ? o : o = n(r = a, i = u);
                    this.removeAttribute(t)
                }
            })(e, r, wt(this, "attr." + t, n)) : null == n ? (e.local ? function(t) {
                return function() {
                    this.removeAttributeNS(t.space, t.local)
                }
            } : function(t) {
                return function() {
                    this.removeAttribute(t)
                }
            })(e) : (e.local ? function(t, n, e) {
                var r, i;
                return function() {
                    var o = this.getAttributeNS(t.space, t.local);
                    return o === e ? null : o === r ? i : i = n(r = o, e)
                }
            } : function(t, n, e) {
                var r, i;
                return function() {
                    var o = this.getAttribute(t);
                    return o === e ? null : o === r ? i : i = n(r = o, e)
                }
            })(e, r, n + ""))
        },
        attrTween: function(t, n) {
            var e = "attr." + t;
            if (arguments.length < 2) return (e = this.tween(e)) && e._value;
            if (null == n) return this.tween(e, null);
            if ("function" != typeof n) throw new Error;
            var r = Object(bt.a)(t);
            return this.tween(e, (r.local ? function(t, n) {
                function e() {
                    var e = this,
                        r = n.apply(e, arguments);
                    return r && function(n) {
                        e.setAttributeNS(t.space, t.local, r(n))
                    }
                }
                return e._value = n, e
            } : function(t, n) {
                function e() {
                    var e = this,
                        r = n.apply(e, arguments);
                    return r && function(n) {
                        e.setAttribute(t, r(n))
                    }
                }
                return e._value = n, e
            })(r, n))
        },
        style: function(t, n, e) {
            var r = "transform" == (t += "") ? yt : on;
            return null == n ? this.styleTween(t, function(t, n) {
                var e, r, i;
                return function() {
                    var o = Object(sn.b)(this, t),
                        a = (this.style.removeProperty(t), Object(sn.b)(this, t));
                    return o === a ? null : o === e && a === r ? i : i = n(e = o, r = a)
                }
            }(t, r)).on("end.style." + t, function(t) {
                return function() {
                    this.style.removeProperty(t)
                }
            }(t)) : this.styleTween(t, "function" == typeof n ? function(t, n, e) {
                var r, i, o;
                return function() {
                    var a = Object(sn.b)(this, t),
                        u = e(this);
                    return null == u && (this.style.removeProperty(t), u = Object(sn.b)(this, t)), a === u ? null : a === r && u === i ? o : o = n(r = a, i = u)
                }
            }(t, r, wt(this, "style." + t, n)) : function(t, n, e) {
                var r, i;
                return function() {
                    var o = Object(sn.b)(this, t);
                    return o === e ? null : o === r ? i : i = n(r = o, e)
                }
            }(t, r, n + ""), e)
        },
        styleTween: function(t, n, e) {
            var r = "style." + (t += "");
            if (arguments.length < 2) return (r = this.tween(r)) && r._value;
            if (null == n) return this.tween(r, null);
            if ("function" != typeof n) throw new Error;
            return this.tween(r, function(t, n, e) {
                function r() {
                    var r = this,
                        i = n.apply(r, arguments);
                    return i && function(n) {
                        r.style.setProperty(t, i(n), e)
                    }
                }
                return r._value = n, r
            }(t, n, null == e ? "" : e))
        },
        text: function(t) {
            return this.tween("text", "function" == typeof t ? function(t) {
                return function() {
                    var n = t(this);
                    this.textContent = null == n ? "" : n
                }
            }(wt(this, "text", t)) : function(t) {
                return function() {
                    this.textContent = t
                }
            }(null == t ? "" : t + ""))
        },
        remove: function() {
            return this.on("end.remove", (t = this._id, function() {
                var n = this.parentNode;
                for (var e in this.__transition)
                    if (+e !== t) return;
                n && n.removeChild(this)
            }));
            var t
        },
        tween: function(t, n) {
            var e = this._id;
            if (t += "", arguments.length < 2) {
                for (var r, i = at(this.node(), e).tween, o = 0, a = i.length; o < a; ++o)
                    if ((r = i[o]).name === t) return r.value;
                return null
            }
            return this.each((null == n ? function(t, n) {
                var e, r;
                return function() {
                    var i = ot(this, t),
                        o = i.tween;
                    if (o !== e)
                        for (var a = 0, u = (r = e = o).length; a < u; ++a)
                            if (r[a].name === n) {
                                (r = r.slice()).splice(a, 1);
                                break
                            }
                    i.tween = r
                }
            } : function(t, n, e) {
                var r, i;
                if ("function" != typeof e) throw new Error;
                return function() {
                    var o = ot(this, t),
                        a = o.tween;
                    if (a !== r) {
                        i = (r = a).slice();
                        for (var u = {
                                name: n,
                                value: e
                            }, c = 0, l = i.length; c < l; ++c)
                            if (i[c].name === n) {
                                i[c] = u;
                                break
                            }
                        c === l && i.push(u)
                    }
                    o.tween = i
                }
            })(e, t, n))
        },
        delay: function(t) {
            var n = this._id;
            return arguments.length ? this.each(("function" == typeof t ? function(t, n) {
                return function() {
                    it(this, t).delay = +n.apply(this, arguments)
                }
            } : function(t, n) {
                return n = +n,
                    function() {
                        it(this, t).delay = n
                    }
            })(n, t)) : at(this.node(), n).delay
        },
        duration: function(t) {
            var n = this._id;
            return arguments.length ? this.each(("function" == typeof t ? function(t, n) {
                return function() {
                    ot(this, t).duration = +n.apply(this, arguments)
                }
            } : function(t, n) {
                return n = +n,
                    function() {
                        ot(this, t).duration = n
                    }
            })(n, t)) : at(this.node(), n).duration
        },
        ease: function(t) {
            var n = this._id;
            return arguments.length ? this.each(function(t, n) {
                if ("function" != typeof n) throw new Error;
                return function() {
                    ot(this, t).ease = n
                }
            }(n, t)) : at(this.node(), n).ease
        }
    };
    var vn = {
        time: null,
        delay: 0,
        duration: 250,
        ease: function(t) {
            return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2
        }
    };

    function mn(t, n) {
        for (var e; !(e = t.__transition) || !(e = e[n]);)
            if (!(t = t.parentNode)) return vn.time = q(), vn;
        return e
    }
    S.b.prototype.interrupt = function(t) {
        return this.each(function() {
            ft(this, t)
        })
    }, S.b.prototype.transition = function(t) {
        var n, e;
        t instanceof hn ? (n = t._id, t = t._name) : (n = dn(), (e = vn).time = q(), t = null == t ? null : t + "");
        for (var r = this._groups, i = r.length, o = 0; o < i; ++o)
            for (var a, u = r[o], c = u.length, l = 0; l < c; ++l)(a = u[l]) && rt(a, t, n, l, u, e || mn(a, n));
        return new hn(r, this._parents, t, n)
    };
    var yn = function(t) {
        return function() {
            return t
        }
    };

    function gn(t, n, e) {
        this.target = t, this.type = n, this.transform = e
    }

    function bn(t, n, e) {
        this.k = t, this.x = n, this.y = e
    }
    bn.prototype = {
        constructor: bn,
        scale: function(t) {
            return 1 === t ? this : new bn(this.k * t, this.x, this.y)
        },
        translate: function(t, n) {
            return 0 === t & 0 === n ? this : new bn(this.k, this.x + this.k * t, this.y + this.k * n)
        },
        apply: function(t) {
            return [t[0] * this.k + this.x, t[1] * this.k + this.y]
        },
        applyX: function(t) {
            return t * this.k + this.x
        },
        applyY: function(t) {
            return t * this.k + this.y
        },
        invert: function(t) {
            return [(t[0] - this.x) / this.k, (t[1] - this.y) / this.k]
        },
        invertX: function(t) {
            return (t - this.x) / this.k
        },
        invertY: function(t) {
            return (t - this.y) / this.k
        },
        rescaleX: function(t) {
            return t.copy().domain(t.range().map(this.invertX, this).map(t.invert, t))
        },
        rescaleY: function(t) {
            return t.copy().domain(t.range().map(this.invertY, this).map(t.invert, t))
        },
        toString: function() {
            return "translate(" + this.x + "," + this.y + ") scale(" + this.k + ")"
        }
    };
    var wn = new bn(1, 0, 0);

    function _n() {
        v.c.stopImmediatePropagation()
    }
    bn.prototype;
    var xn = function() {
        v.c.preventDefault(), v.c.stopImmediatePropagation()
    };

    function Tn() {
        return !v.c.button
    }

    function kn() {
        var t, n, e = this;
        return e instanceof SVGElement ? (t = (e = e.ownerSVGElement || e).width.baseVal.value, n = e.height.baseVal.value) : (t = e.clientWidth, n = e.clientHeight), [
            [0, 0],
            [t, n]
        ]
    }

    function Mn() {
        return this.__zoom || wn
    }

    function En() {
        return -v.c.deltaY * (v.c.deltaMode ? 120 : 1) / 500
    }

    function Sn() {
        return "ontouchstart" in this
    }

    function An(t, n, e) {
        var r = t.invertX(n[0][0]) - e[0][0],
            i = t.invertX(n[1][0]) - e[1][0],
            o = t.invertY(n[0][1]) - e[0][1],
            a = t.invertY(n[1][1]) - e[1][1];
        return t.translate(i > r ? (r + i) / 2 : Math.min(0, r) || Math.max(0, i), a > o ? (o + a) / 2 : Math.min(0, o) || Math.max(0, a))
    }
    var jn = function() {
            var t, n, e = Tn,
                r = kn,
                i = An,
                o = En,
                a = Sn,
                u = [0, 1 / 0],
                c = [
                    [-1 / 0, -1 / 0],
                    [1 / 0, 1 / 0]
                ],
                l = 250,
                s = M,
                f = [],
                d = h("start", "zoom", "end"),
                m = 500,
                y = 150,
                b = 0;

            function w(t) {
                t.property("__zoom", Mn).on("wheel.zoom", O).on("mousedown.zoom", P).on("dblclick.zoom", R).filter(a).on("touchstart.zoom", C).on("touchmove.zoom", F).on("touchend.zoom touchcancel.zoom", z).style("touch-action", "none").style("-webkit-tap-highlight-color", "rgba(0,0,0,0)")
            }

            function T(t, n) {
                return (n = Math.max(u[0], Math.min(u[1], n))) === t.k ? t : new bn(n, t.x, t.y)
            }

            function k(t, n, e) {
                var r = n[0] - e[0] * t.k,
                    i = n[1] - e[1] * t.k;
                return r === t.x && i === t.y ? t : new bn(t.k, r, i)
            }

            function S(t) {
                return [(+t[0][0] + +t[1][0]) / 2, (+t[0][1] + +t[1][1]) / 2]
            }

            function A(t, n, e) {
                t.on("start.zoom", function() {
                    j(this, arguments).start()
                }).on("interrupt.zoom end.zoom", function() {
                    j(this, arguments).end()
                }).tween("zoom", function() {
                    var t = arguments,
                        i = j(this, t),
                        o = r.apply(this, t),
                        a = e || S(o),
                        u = Math.max(o[1][0] - o[0][0], o[1][1] - o[0][1]),
                        c = this.__zoom,
                        l = "function" == typeof n ? n.apply(this, t) : n,
                        f = s(c.invert(a).concat(u / c.k), l.invert(a).concat(u / l.k));
                    return function(t) {
                        if (1 === t) t = l;
                        else {
                            var n = f(t),
                                e = u / n[2];
                            t = new bn(e, a[0] - n[0] * e, a[1] - n[1] * e)
                        }
                        i.zoom(null, t)
                    }
                })
            }

            function j(t, n) {
                for (var e, r = 0, i = f.length; r < i; ++r)
                    if ((e = f[r]).that === t) return e;
                return new N(t, n)
            }

            function N(t, n) {
                this.that = t, this.args = n, this.index = -1, this.active = 0, this.extent = r.apply(t, n)
            }

            function O() {
                if (e.apply(this, arguments)) {
                    var t = j(this, arguments),
                        n = this.__zoom,
                        r = Math.max(u[0], Math.min(u[1], n.k * Math.pow(2, o.apply(this, arguments)))),
                        a = g(this);
                    if (t.wheel) t.mouse[0][0] === a[0] && t.mouse[0][1] === a[1] || (t.mouse[1] = n.invert(t.mouse[0] = a)), clearTimeout(t.wheel);
                    else {
                        if (n.k === r) return;
                        t.mouse = [a, n.invert(a)], ft(this), t.start()
                    }
                    xn(), t.wheel = setTimeout(function() {
                        t.wheel = null, t.end()
                    }, y), t.zoom("mouse", i(k(T(n, r), t.mouse[0], t.mouse[1]), t.extent, c))
                }
            }

            function P() {
                if (!n && e.apply(this, arguments)) {
                    var t = j(this, arguments),
                        r = Object(p.a)(v.c.view).on("mousemove.zoom", function() {
                            if (xn(), !t.moved) {
                                var n = v.c.clientX - a,
                                    e = v.c.clientY - u;
                                t.moved = n * n + e * e > b
                            }
                            t.zoom("mouse", i(k(t.that.__zoom, t.mouse[0] = g(t.that), t.mouse[1]), t.extent, c))
                        }, !0).on("mouseup.zoom", function() {
                            r.on("mousemove.zoom mouseup.zoom", null), x(v.c.view, t.moved), xn(), t.end()
                        }, !0),
                        o = g(this),
                        a = v.c.clientX,
                        u = v.c.clientY;
                    _(v.c.view), _n(), t.mouse = [o, this.__zoom.invert(o)], ft(this), t.start()
                }
            }

            function R() {
                if (e.apply(this, arguments)) {
                    var t = this.__zoom,
                        n = g(this),
                        o = t.invert(n),
                        a = t.k * (v.c.shiftKey ? .5 : 2),
                        u = i(k(T(t, a), n, o), r.apply(this, arguments), c);
                    xn(), l > 0 ? Object(p.a)(this).transition().duration(l).call(A, u, n) : Object(p.a)(this).call(w.transform, u)
                }
            }

            function C() {
                if (e.apply(this, arguments)) {
                    var n, r, i, o, a = j(this, arguments),
                        u = v.c.changedTouches,
                        c = u.length;
                    for (_n(), r = 0; r < c; ++r) i = u[r], o = [o = E(this, u, i.identifier), this.__zoom.invert(o), i.identifier], a.touch0 ? a.touch1 || (a.touch1 = o) : (a.touch0 = o, n = !0);
                    if (t && (t = clearTimeout(t), !a.touch1)) return a.end(), void((o = Object(p.a)(this).on("dblclick.zoom")) && o.apply(this, arguments));
                    n && (t = setTimeout(function() {
                        t = null
                    }, m), ft(this), a.start())
                }
            }

            function F() {
                var n, e, r, o, a = j(this, arguments),
                    u = v.c.changedTouches,
                    l = u.length;
                for (xn(), t && (t = clearTimeout(t)), n = 0; n < l; ++n) e = u[n], r = E(this, u, e.identifier), a.touch0 && a.touch0[2] === e.identifier ? a.touch0[0] = r : a.touch1 && a.touch1[2] === e.identifier && (a.touch1[0] = r);
                if (e = a.that.__zoom, a.touch1) {
                    var s = a.touch0[0],
                        f = a.touch0[1],
                        h = a.touch1[0],
                        d = a.touch1[1],
                        p = (p = h[0] - s[0]) * p + (p = h[1] - s[1]) * p,
                        m = (m = d[0] - f[0]) * m + (m = d[1] - f[1]) * m;
                    e = T(e, Math.sqrt(p / m)), r = [(s[0] + h[0]) / 2, (s[1] + h[1]) / 2], o = [(f[0] + d[0]) / 2, (f[1] + d[1]) / 2]
                } else {
                    if (!a.touch0) return;
                    r = a.touch0[0], o = a.touch0[1]
                }
                a.zoom("touch", i(k(e, r, o), a.extent, c))
            }

            function z() {
                var t, e, r = j(this, arguments),
                    i = v.c.changedTouches,
                    o = i.length;
                for (_n(), n && clearTimeout(n), n = setTimeout(function() {
                        n = null
                    }, m), t = 0; t < o; ++t) e = i[t], r.touch0 && r.touch0[2] === e.identifier ? delete r.touch0 : r.touch1 && r.touch1[2] === e.identifier && delete r.touch1;
                r.touch1 && !r.touch0 && (r.touch0 = r.touch1, delete r.touch1), r.touch0 ? r.touch0[1] = this.__zoom.invert(r.touch0[0]) : r.end()
            }
            return w.transform = function(t, n) {
                var e = t.selection ? t.selection() : t;
                e.property("__zoom", Mn), t !== e ? A(t, n) : e.interrupt().each(function() {
                    j(this, arguments).start().zoom(null, "function" == typeof n ? n.apply(this, arguments) : n).end()
                })
            }, w.scaleBy = function(t, n) {
                w.scaleTo(t, function() {
                    return this.__zoom.k * ("function" == typeof n ? n.apply(this, arguments) : n)
                })
            }, w.scaleTo = function(t, n) {
                w.transform(t, function() {
                    var t = r.apply(this, arguments),
                        e = this.__zoom,
                        o = S(t),
                        a = e.invert(o),
                        u = "function" == typeof n ? n.apply(this, arguments) : n;
                    return i(k(T(e, u), o, a), t, c)
                })
            }, w.translateBy = function(t, n, e) {
                w.transform(t, function() {
                    return i(this.__zoom.translate("function" == typeof n ? n.apply(this, arguments) : n, "function" == typeof e ? e.apply(this, arguments) : e), r.apply(this, arguments), c)
                })
            }, w.translateTo = function(t, n, e) {
                w.transform(t, function() {
                    var t = r.apply(this, arguments),
                        o = this.__zoom,
                        a = S(t);
                    return i(wn.translate(a[0], a[1]).scale(o.k).translate("function" == typeof n ? -n.apply(this, arguments) : -n, "function" == typeof e ? -e.apply(this, arguments) : -e), t, c)
                })
            }, N.prototype = {
                start: function() {
                    return 1 == ++this.active && (this.index = f.push(this) - 1, this.emit("start")), this
                },
                zoom: function(t, n) {
                    return this.mouse && "mouse" !== t && (this.mouse[1] = n.invert(this.mouse[0])), this.touch0 && "touch" !== t && (this.touch0[1] = n.invert(this.touch0[0])), this.touch1 && "touch" !== t && (this.touch1[1] = n.invert(this.touch1[0])), this.that.__zoom = n, this.emit("zoom"), this
                },
                end: function() {
                    return 0 == --this.active && (f.splice(this.index, 1), this.index = -1, this.emit("end")), this
                },
                emit: function(t) {
                    Object(v.a)(new gn(w, t, this.that.__zoom), d.apply, d, [t, this.that, this.args])
                }
            }, w.wheelDelta = function(t) {
                return arguments.length ? (o = "function" == typeof t ? t : yn(+t), w) : o
            }, w.filter = function(t) {
                return arguments.length ? (e = "function" == typeof t ? t : yn(!!t), w) : e
            }, w.touchable = function(t) {
                return arguments.length ? (a = "function" == typeof t ? t : yn(!!t), w) : a
            }, w.extent = function(t) {
                return arguments.length ? (r = "function" == typeof t ? t : yn([
                    [+t[0][0], +t[0][1]],
                    [+t[1][0], +t[1][1]]
                ]), w) : r
            }, w.scaleExtent = function(t) {
                return arguments.length ? (u[0] = +t[0], u[1] = +t[1], w) : [u[0], u[1]]
            }, w.translateExtent = function(t) {
                return arguments.length ? (c[0][0] = +t[0][0], c[1][0] = +t[1][0], c[0][1] = +t[0][1], c[1][1] = +t[1][1], w) : [
                    [c[0][0], c[0][1]],
                    [c[1][0], c[1][1]]
                ]
            }, w.constrain = function(t) {
                return arguments.length ? (i = t, w) : i
            }, w.duration = function(t) {
                return arguments.length ? (l = +t, w) : l
            }, w.interpolate = function(t) {
                return arguments.length ? (s = t, w) : s
            }, w.on = function() {
                var t = d.on.apply(d, arguments);
                return t === d ? w : t
            }, w.clickDistance = function(t) {
                return arguments.length ? (b = (t = +t) * t, w) : Math.sqrt(b)
            }, w
        },
        Nn = function(t) {
            return function() {
                return t
            }
        };

    function On(t, n, e, r, i, o, a, u, c, l) {
        this.target = t, this.type = n, this.subject = e, this.identifier = r, this.active = i, this.x = o, this.y = a, this.dx = u, this.dy = c, this._ = l
    }

    function Pn() {
        return !v.c.button
    }

    function Rn() {
        return this.parentNode
    }

    function Cn(t) {
        return null == t ? {
            x: v.c.x,
            y: v.c.y
        } : t
    }

    function Fn() {
        return "ontouchstart" in this
    }
    On.prototype.on = function() {
        var t = this._.on.apply(this._, arguments);
        return t === this._ ? this : t
    };
    var zn = function() {
            var t, n, e, r, i = Pn,
                o = Rn,
                a = Cn,
                u = Fn,
                c = {},
                l = h("start", "drag", "end"),
                s = 0,
                f = 0;

            function d(t) {
                t.on("mousedown.drag", m).filter(u).on("touchstart.drag", k).on("touchmove.drag", M).on("touchend.drag touchcancel.drag", S).style("touch-action", "none").style("-webkit-tap-highlight-color", "rgba(0,0,0,0)")
            }

            function m() {
                if (!r && i.apply(this, arguments)) {
                    var a = A("mouse", o.apply(this, arguments), g, this, arguments);
                    a && (Object(p.a)(v.c.view).on("mousemove.drag", y, !0).on("mouseup.drag", T, !0), _(v.c.view), b(), e = !1, t = v.c.clientX, n = v.c.clientY, a("start"))
                }
            }

            function y() {
                if (w(), !e) {
                    var r = v.c.clientX - t,
                        i = v.c.clientY - n;
                    e = r * r + i * i > f
                }
                c.mouse("drag")
            }

            function T() {
                Object(p.a)(v.c.view).on("mousemove.drag mouseup.drag", null), x(v.c.view, e), w(), c.mouse("end")
            }

            function k() {
                if (i.apply(this, arguments)) {
                    var t, n, e = v.c.changedTouches,
                        r = o.apply(this, arguments),
                        a = e.length;
                    for (t = 0; t < a; ++t)(n = A(e[t].identifier, r, E, this, arguments)) && (b(), n("start"))
                }
            }

            function M() {
                var t, n, e = v.c.changedTouches,
                    r = e.length;
                for (t = 0; t < r; ++t)(n = c[e[t].identifier]) && (w(), n("drag"))
            }

            function S() {
                var t, n, e = v.c.changedTouches,
                    i = e.length;
                for (r && clearTimeout(r), r = setTimeout(function() {
                        r = null
                    }, 500), t = 0; t < i; ++t)(n = c[e[t].identifier]) && (b(), n("end"))
            }

            function A(t, n, e, r, i) {
                var o, u, f, h = e(n, t),
                    p = l.copy();
                if (Object(v.a)(new On(d, "beforestart", o, t, s, h[0], h[1], 0, 0, p), function() {
                        return null != (v.c.subject = o = a.apply(r, i)) && (u = o.x - h[0] || 0, f = o.y - h[1] || 0, !0)
                    })) return function a(l) {
                    var m, y = h;
                    switch (l) {
                        case "start":
                            c[t] = a, m = s++;
                            break;
                        case "end":
                            delete c[t], --s;
                        case "drag":
                            h = e(n, t), m = s
                    }
                    Object(v.a)(new On(d, l, o, t, m, h[0] + u, h[1] + f, h[0] - y[0], h[1] - y[1], p), p.apply, p, [l, r, i])
                }
            }
            return d.filter = function(t) {
                return arguments.length ? (i = "function" == typeof t ? t : Nn(!!t), d) : i
            }, d.container = function(t) {
                return arguments.length ? (o = "function" == typeof t ? t : Nn(t), d) : o
            }, d.subject = function(t) {
                return arguments.length ? (a = "function" == typeof t ? t : Nn(t), d) : a
            }, d.touchable = function(t) {
                return arguments.length ? (u = "function" == typeof t ? t : Nn(!!t), d) : u
            }, d.on = function() {
                var t = l.on.apply(l, arguments);
                return t === l ? d : t
            }, d.clickDistance = function(t) {
                return arguments.length ? (f = (t = +t) * t, d) : Math.sqrt(f)
            }, d
        },
        Ln = function(t) {
            return t
        };

    function In(t, n) {
        t && qn.hasOwnProperty(t.type) && qn[t.type](t, n)
    }
    var Dn = {
            Feature: function(t, n) {
                In(t.geometry, n)
            },
            FeatureCollection: function(t, n) {
                for (var e = t.features, r = -1, i = e.length; ++r < i;) In(e[r].geometry, n)
            }
        },
        qn = {
            Sphere: function(t, n) {
                n.sphere()
            },
            Point: function(t, n) {
                t = t.coordinates, n.point(t[0], t[1], t[2])
            },
            MultiPoint: function(t, n) {
                for (var e = t.coordinates, r = -1, i = e.length; ++r < i;) t = e[r], n.point(t[0], t[1], t[2])
            },
            LineString: function(t, n) {
                Un(t.coordinates, n, 0)
            },
            MultiLineString: function(t, n) {
                for (var e = t.coordinates, r = -1, i = e.length; ++r < i;) Un(e[r], n, 0)
            },
            Polygon: function(t, n) {
                Hn(t.coordinates, n)
            },
            MultiPolygon: function(t, n) {
                for (var e = t.coordinates, r = -1, i = e.length; ++r < i;) Hn(e[r], n)
            },
            GeometryCollection: function(t, n) {
                for (var e = t.geometries, r = -1, i = e.length; ++r < i;) In(e[r], n)
            }
        };

    function Un(t, n, e) {
        var r, i = -1,
            o = t.length - e;
        for (n.lineStart(); ++i < o;) r = t[i], n.point(r[0], r[1], r[2]);
        n.lineEnd()
    }

    function Hn(t, n) {
        var e = -1,
            r = t.length;
        for (n.polygonStart(); ++e < r;) Un(t[e], n, 1);
        n.polygonEnd()
    }
    var Gn = function(t, n) {
            t && Dn.hasOwnProperty(t.type) ? Dn[t.type](t, n) : In(t, n)
        },
        Xn = function() {
            return new Wn
        };

    function Wn() {
        this.reset()
    }
    Wn.prototype = {
        constructor: Wn,
        reset: function() {
            this.s = this.t = 0
        },
        add: function(t) {
            Vn(Bn, t, this.t), Vn(this, Bn.s, this.s), this.s ? this.t += Bn.t : this.s = Bn.t
        },
        valueOf: function() {
            return this.s
        }
    };
    var Bn = new Wn;

    function Vn(t, n, e) {
        var r = t.s = n + e,
            i = r - n,
            o = r - i;
        t.t = n - o + (e - i)
    }
    var $n = 1e-6,
        Yn = Math.PI,
        Kn = Yn / 2,
        Jn = Yn / 4,
        Zn = 2 * Yn,
        Qn = 180 / Yn,
        te = Yn / 180,
        ne = Math.abs,
        ee = Math.atan,
        re = Math.atan2,
        ie = Math.cos,
        oe = Math.ceil,
        ae = (Math.exp, Math.floor, Math.log, Math.pow, Math.sin),
        ue = Math.sign || function(t) {
            return t > 0 ? 1 : t < 0 ? -1 : 0
        },
        ce = Math.sqrt;
    Math.tan;

    function le(t) {
        return t > 1 ? Kn : t < -1 ? -Kn : Math.asin(t)
    }

    function se(t) {
        return (t = ae(t / 2)) * t
    }

    function fe() {}
    var he, de, pe, ve, me = Xn(),
        ye = Xn(),
        ge = {
            point: fe,
            lineStart: fe,
            lineEnd: fe,
            polygonStart: function() {
                ge.lineStart = be, ge.lineEnd = xe
            },
            polygonEnd: function() {
                ge.lineStart = ge.lineEnd = ge.point = fe, me.add(ne(ye)), ye.reset()
            },
            result: function() {
                var t = me / 2;
                return me.reset(), t
            }
        };

    function be() {
        ge.point = we
    }

    function we(t, n) {
        ge.point = _e, he = pe = t, de = ve = n
    }

    function _e(t, n) {
        ye.add(ve * t - pe * n), pe = t, ve = n
    }

    function xe() {
        _e(he, de)
    }
    var Te = ge,
        ke = 1 / 0,
        Me = ke,
        Ee = -ke,
        Se = Ee;
    var Ae, je, Ne, Oe, Pe = {
            point: function(t, n) {
                t < ke && (ke = t);
                t > Ee && (Ee = t);
                n < Me && (Me = n);
                n > Se && (Se = n)
            },
            lineStart: fe,
            lineEnd: fe,
            polygonStart: fe,
            polygonEnd: fe,
            result: function() {
                var t = [
                    [ke, Me],
                    [Ee, Se]
                ];
                return Ee = Se = -(Me = ke = 1 / 0), t
            }
        },
        Re = 0,
        Ce = 0,
        Fe = 0,
        ze = 0,
        Le = 0,
        Ie = 0,
        De = 0,
        qe = 0,
        Ue = 0,
        He = {
            point: Ge,
            lineStart: Xe,
            lineEnd: Ve,
            polygonStart: function() {
                He.lineStart = $e, He.lineEnd = Ye
            },
            polygonEnd: function() {
                He.point = Ge, He.lineStart = Xe, He.lineEnd = Ve
            },
            result: function() {
                var t = Ue ? [De / Ue, qe / Ue] : Ie ? [ze / Ie, Le / Ie] : Fe ? [Re / Fe, Ce / Fe] : [NaN, NaN];
                return Re = Ce = Fe = ze = Le = Ie = De = qe = Ue = 0, t
            }
        };

    function Ge(t, n) {
        Re += t, Ce += n, ++Fe
    }

    function Xe() {
        He.point = We
    }

    function We(t, n) {
        He.point = Be, Ge(Ne = t, Oe = n)
    }

    function Be(t, n) {
        var e = t - Ne,
            r = n - Oe,
            i = ce(e * e + r * r);
        ze += i * (Ne + t) / 2, Le += i * (Oe + n) / 2, Ie += i, Ge(Ne = t, Oe = n)
    }

    function Ve() {
        He.point = Ge
    }

    function $e() {
        He.point = Ke
    }

    function Ye() {
        Je(Ae, je)
    }

    function Ke(t, n) {
        He.point = Je, Ge(Ae = Ne = t, je = Oe = n)
    }

    function Je(t, n) {
        var e = t - Ne,
            r = n - Oe,
            i = ce(e * e + r * r);
        ze += i * (Ne + t) / 2, Le += i * (Oe + n) / 2, Ie += i, De += (i = Oe * t - Ne * n) * (Ne + t), qe += i * (Oe + n), Ue += 3 * i, Ge(Ne = t, Oe = n)
    }
    var Ze = He;

    function Qe(t) {
        this._context = t
    }
    Qe.prototype = {
        _radius: 4.5,
        pointRadius: function(t) {
            return this._radius = t, this
        },
        polygonStart: function() {
            this._line = 0
        },
        polygonEnd: function() {
            this._line = NaN
        },
        lineStart: function() {
            this._point = 0
        },
        lineEnd: function() {
            0 === this._line && this._context.closePath(), this._point = NaN
        },
        point: function(t, n) {
            switch (this._point) {
                case 0:
                    this._context.moveTo(t, n), this._point = 1;
                    break;
                case 1:
                    this._context.lineTo(t, n);
                    break;
                default:
                    this._context.moveTo(t + this._radius, n), this._context.arc(t, n, this._radius, 0, Zn)
            }
        },
        result: fe
    };
    var tr, nr, er, rr, ir, or = Xn(),
        ar = {
            point: fe,
            lineStart: function() {
                ar.point = ur
            },
            lineEnd: function() {
                tr && cr(nr, er), ar.point = fe
            },
            polygonStart: function() {
                tr = !0
            },
            polygonEnd: function() {
                tr = null
            },
            result: function() {
                var t = +or;
                return or.reset(), t
            }
        };

    function ur(t, n) {
        ar.point = cr, nr = rr = t, er = ir = n
    }

    function cr(t, n) {
        rr -= t, ir -= n, or.add(ce(rr * rr + ir * ir)), rr = t, ir = n
    }
    var lr = ar;

    function sr() {
        this._string = []
    }

    function fr(t) {
        return "m0," + t + "a" + t + "," + t + " 0 1,1 0," + -2 * t + "a" + t + "," + t + " 0 1,1 0," + 2 * t + "z"
    }
    sr.prototype = {
        _radius: 4.5,
        _circle: fr(4.5),
        pointRadius: function(t) {
            return (t = +t) !== this._radius && (this._radius = t, this._circle = null), this
        },
        polygonStart: function() {
            this._line = 0
        },
        polygonEnd: function() {
            this._line = NaN
        },
        lineStart: function() {
            this._point = 0
        },
        lineEnd: function() {
            0 === this._line && this._string.push("Z"), this._point = NaN
        },
        point: function(t, n) {
            switch (this._point) {
                case 0:
                    this._string.push("M", t, ",", n), this._point = 1;
                    break;
                case 1:
                    this._string.push("L", t, ",", n);
                    break;
                default:
                    null == this._circle && (this._circle = fr(this._radius)), this._string.push("M", t, ",", n, this._circle)
            }
        },
        result: function() {
            if (this._string.length) {
                var t = this._string.join("");
                return this._string = [], t
            }
            return null
        }
    };
    var hr = function(t, n) {
            var e, r, i = 4.5;

            function o(t) {
                return t && ("function" == typeof i && r.pointRadius(+i.apply(this, arguments)), Gn(t, e(r))), r.result()
            }
            return o.area = function(t) {
                return Gn(t, e(Te)), Te.result()
            }, o.measure = function(t) {
                return Gn(t, e(lr)), lr.result()
            }, o.bounds = function(t) {
                return Gn(t, e(Pe)), Pe.result()
            }, o.centroid = function(t) {
                return Gn(t, e(Ze)), Ze.result()
            }, o.projection = function(n) {
                return arguments.length ? (e = null == n ? (t = null, Ln) : (t = n).stream, o) : t
            }, o.context = function(t) {
                return arguments.length ? (r = null == t ? (n = null, new sr) : new Qe(n = t), "function" != typeof i && r.pointRadius(i), o) : n
            }, o.pointRadius = function(t) {
                return arguments.length ? (i = "function" == typeof t ? t : (r.pointRadius(+t), +t), o) : i
            }, o.projection(t).context(n)
        },
        dr = function(t) {
            return "string" == typeof t ? new S.a([document.querySelectorAll(t)], [document.documentElement]) : new S.a([null == t ? [] : t], S.c)
        },
        pr = function(t) {
            return t
        },
        vr = function(t) {
            if (null == t) return pr;
            var n, e, r = t.scale[0],
                i = t.scale[1],
                o = t.translate[0],
                a = t.translate[1];
            return function(t, u) {
                u || (n = e = 0);
                var c = 2,
                    l = t.length,
                    s = new Array(l);
                for (s[0] = (n += t[0]) * r + o, s[1] = (e += t[1]) * i + a; c < l;) s[c] = t[c], ++c;
                return s
            }
        },
        mr = function(t, n) {
            for (var e, r = t.length, i = r - n; i < --r;) e = t[i], t[i++] = t[r], t[r] = e
        },
        yr = function(t, n) {
            return "GeometryCollection" === n.type ? {
                type: "FeatureCollection",
                features: n.geometries.map(function(n) {
                    return gr(t, n)
                })
            } : gr(t, n)
        };

    function gr(t, n) {
        var e = n.id,
            r = n.bbox,
            i = null == n.properties ? {} : n.properties,
            o = br(t, n);
        return null == e && null == r ? {
            type: "Feature",
            properties: i,
            geometry: o
        } : null == r ? {
            type: "Feature",
            id: e,
            properties: i,
            geometry: o
        } : {
            type: "Feature",
            id: e,
            bbox: r,
            properties: i,
            geometry: o
        }
    }

    function br(t, n) {
        var e = vr(t.transform),
            r = t.arcs;

        function i(t, n) {
            n.length && n.pop();
            for (var i = r[t < 0 ? ~t : t], o = 0, a = i.length; o < a; ++o) n.push(e(i[o], o));
            t < 0 && mr(n, a)
        }

        function o(t) {
            return e(t)
        }

        function a(t) {
            for (var n = [], e = 0, r = t.length; e < r; ++e) i(t[e], n);
            return n.length < 2 && n.push(n[0]), n
        }

        function u(t) {
            for (var n = a(t); n.length < 4;) n.push(n[0]);
            return n
        }

        function c(t) {
            return t.map(u)
        }
        return function t(n) {
            var e, r = n.type;
            switch (r) {
                case "GeometryCollection":
                    return {
                        type: r,
                        geometries: n.geometries.map(t)
                    };
                case "Point":
                    e = o(n.coordinates);
                    break;
                case "MultiPoint":
                    e = n.coordinates.map(o);
                    break;
                case "LineString":
                    e = a(n.arcs);
                    break;
                case "MultiLineString":
                    e = n.arcs.map(a);
                    break;
                case "Polygon":
                    e = c(n.arcs);
                    break;
                case "MultiPolygon":
                    e = n.arcs.map(c);
                    break;
                default:
                    return null
            }
            return {
                type: r,
                coordinates: e
            }
        }(n)
    }
    var wr = e(2),
        _r = function(t, n, e) {
            t = +t, n = +n, e = (i = arguments.length) < 2 ? (n = t, t = 0, 1) : i < 3 ? 1 : +e;
            for (var r = -1, i = 0 | Math.max(0, Math.ceil((n - t) / e)), o = new Array(i); ++r < i;) o[r] = t + r * e;
            return o
        };

    function xr(t, n, e) {
        var r = _r(t, n - $n, e).concat(n);
        return function(t) {
            return r.map(function(n) {
                return [t, n]
            })
        }
    }

    function Tr(t, n, e) {
        var r = _r(t, n - $n, e).concat(n);
        return function(t) {
            return r.map(function(n) {
                return [n, t]
            })
        }
    }

    function kr() {
        var t, n, e, r, i, o, a, u, c, l, s, f, h = 10,
            d = h,
            p = 90,
            v = 360,
            m = 2.5;

        function y() {
            return {
                type: "MultiLineString",
                coordinates: g()
            }
        }

        function g() {
            return _r(oe(r / p) * p, e, p).map(s).concat(_r(oe(u / v) * v, a, v).map(f)).concat(_r(oe(n / h) * h, t, h).filter(function(t) {
                return ne(t % p) > $n
            }).map(c)).concat(_r(oe(o / d) * d, i, d).filter(function(t) {
                return ne(t % v) > $n
            }).map(l))
        }
        return y.lines = function() {
            return g().map(function(t) {
                return {
                    type: "LineString",
                    coordinates: t
                }
            })
        }, y.outline = function() {
            return {
                type: "Polygon",
                coordinates: [s(r).concat(f(a).slice(1), s(e).reverse().slice(1), f(u).reverse().slice(1))]
            }
        }, y.extent = function(t) {
            return arguments.length ? y.extentMajor(t).extentMinor(t) : y.extentMinor()
        }, y.extentMajor = function(t) {
            return arguments.length ? (r = +t[0][0], e = +t[1][0], u = +t[0][1], a = +t[1][1], r > e && (t = r, r = e, e = t), u > a && (t = u, u = a, a = t), y.precision(m)) : [
                [r, u],
                [e, a]
            ]
        }, y.extentMinor = function(e) {
            return arguments.length ? (n = +e[0][0], t = +e[1][0], o = +e[0][1], i = +e[1][1], n > t && (e = n, n = t, t = e), o > i && (e = o, o = i, i = e), y.precision(m)) : [
                [n, o],
                [t, i]
            ]
        }, y.step = function(t) {
            return arguments.length ? y.stepMajor(t).stepMinor(t) : y.stepMinor()
        }, y.stepMajor = function(t) {
            return arguments.length ? (p = +t[0], v = +t[1], y) : [p, v]
        }, y.stepMinor = function(t) {
            return arguments.length ? (h = +t[0], d = +t[1], y) : [h, d]
        }, y.precision = function(h) {
            return arguments.length ? (m = +h, c = xr(o, i, 90), l = Tr(n, t, m), s = xr(u, a, 90), f = Tr(r, e, m), y) : m
        }, y.extentMajor([
            [-180, -90 + $n],
            [180, 90 - $n]
        ]).extentMinor([
            [-180, -80 - $n],
            [180, 80 + $n]
        ])
    }
    var Mr = function() {
            var t, n = [];
            return {
                point: function(n, e) {
                    t.push([n, e])
                },
                lineStart: function() {
                    n.push(t = [])
                },
                lineEnd: fe,
                rejoin: function() {
                    n.length > 1 && n.push(n.pop().concat(n.shift()))
                },
                result: function() {
                    var e = n;
                    return n = [], t = null, e
                }
            }
        },
        Er = function(t, n) {
            return ne(t[0] - n[0]) < $n && ne(t[1] - n[1]) < $n
        };

    function Sr(t, n, e, r) {
        this.x = t, this.z = n, this.o = e, this.e = r, this.v = !1, this.n = this.p = null
    }
    var Ar = function(t, n, e, r, i) {
        var o, a, u = [],
            c = [];
        if (t.forEach(function(t) {
                if (!((n = t.length - 1) <= 0)) {
                    var n, e, r = t[0],
                        a = t[n];
                    if (Er(r, a)) {
                        for (i.lineStart(), o = 0; o < n; ++o) i.point((r = t[o])[0], r[1]);
                        i.lineEnd()
                    } else u.push(e = new Sr(r, t, null, !0)), c.push(e.o = new Sr(r, null, e, !1)), u.push(e = new Sr(a, t, null, !1)), c.push(e.o = new Sr(a, null, e, !0))
                }
            }), u.length) {
            for (c.sort(n), jr(u), jr(c), o = 0, a = c.length; o < a; ++o) c[o].e = e = !e;
            for (var l, s, f = u[0];;) {
                for (var h = f, d = !0; h.v;)
                    if ((h = h.n) === f) return;
                l = h.z, i.lineStart();
                do {
                    if (h.v = h.o.v = !0, h.e) {
                        if (d)
                            for (o = 0, a = l.length; o < a; ++o) i.point((s = l[o])[0], s[1]);
                        else r(h.x, h.n.x, 1, i);
                        h = h.n
                    } else {
                        if (d)
                            for (l = h.p.z, o = l.length - 1; o >= 0; --o) i.point((s = l[o])[0], s[1]);
                        else r(h.x, h.p.x, -1, i);
                        h = h.p
                    }
                    l = (h = h.o).z, d = !d
                } while (!h.v);
                i.lineEnd()
            }
        }
    };

    function jr(t) {
        if (n = t.length) {
            for (var n, e, r = 0, i = t[0]; ++r < n;) i.n = e = t[r], e.p = i, i = e;
            i.n = e = t[0], e.p = i
        }
    }

    function Nr(t) {
        return [re(t[1], t[0]), le(t[2])]
    }

    function Or(t) {
        var n = t[0],
            e = t[1],
            r = ie(e);
        return [r * ie(n), r * ae(n), ae(e)]
    }

    function Pr(t, n) {
        return t[0] * n[0] + t[1] * n[1] + t[2] * n[2]
    }

    function Rr(t, n) {
        return [t[1] * n[2] - t[2] * n[1], t[2] * n[0] - t[0] * n[2], t[0] * n[1] - t[1] * n[0]]
    }

    function Cr(t, n) {
        t[0] += n[0], t[1] += n[1], t[2] += n[2]
    }

    function Fr(t, n) {
        return [t[0] * n, t[1] * n, t[2] * n]
    }

    function zr(t) {
        var n = ce(t[0] * t[0] + t[1] * t[1] + t[2] * t[2]);
        t[0] /= n, t[1] /= n, t[2] /= n
    }
    var Lr = Xn(),
        Ir = function(t) {
            for (var n, e, r, i = t.length, o = -1, a = 0; ++o < i;) a += t[o].length;
            for (e = new Array(a); --i >= 0;)
                for (n = (r = t[i]).length; --n >= 0;) e[--a] = r[n];
            return e
        },
        Dr = function(t, n, e, r) {
            return function(i) {
                var o, a, u, c = n(i),
                    l = Mr(),
                    s = n(l),
                    f = !1,
                    h = {
                        point: d,
                        lineStart: v,
                        lineEnd: m,
                        polygonStart: function() {
                            h.point = y, h.lineStart = g, h.lineEnd = b, a = [], o = []
                        },
                        polygonEnd: function() {
                            h.point = d, h.lineStart = v, h.lineEnd = m, a = Ir(a);
                            var t = function(t, n) {
                                var e = n[0],
                                    r = n[1],
                                    i = ae(r),
                                    o = [ae(e), -ie(e), 0],
                                    a = 0,
                                    u = 0;
                                Lr.reset(), 1 === i ? r = Kn + $n : -1 === i && (r = -Kn - $n);
                                for (var c = 0, l = t.length; c < l; ++c)
                                    if (f = (s = t[c]).length)
                                        for (var s, f, h = s[f - 1], d = h[0], p = h[1] / 2 + Jn, v = ae(p), m = ie(p), y = 0; y < f; ++y, d = b, v = _, m = x, h = g) {
                                            var g = s[y],
                                                b = g[0],
                                                w = g[1] / 2 + Jn,
                                                _ = ae(w),
                                                x = ie(w),
                                                T = b - d,
                                                k = T >= 0 ? 1 : -1,
                                                M = k * T,
                                                E = M > Yn,
                                                S = v * _;
                                            if (Lr.add(re(S * k * ae(M), m * x + S * ie(M))), a += E ? T + k * Zn : T, E ^ d >= e ^ b >= e) {
                                                var A = Rr(Or(h), Or(g));
                                                zr(A);
                                                var j = Rr(o, A);
                                                zr(j);
                                                var N = (E ^ T >= 0 ? -1 : 1) * le(j[2]);
                                                (r > N || r === N && (A[0] || A[1])) && (u += E ^ T >= 0 ? 1 : -1)
                                            }
                                        }
                                    return (a < -$n || a < $n && Lr < -$n) ^ 1 & u
                            }(o, r);
                            a.length ? (f || (i.polygonStart(), f = !0), Ar(a, Ur, t, e, i)) : t && (f || (i.polygonStart(), f = !0), i.lineStart(), e(null, null, 1, i), i.lineEnd()), f && (i.polygonEnd(), f = !1), a = o = null
                        },
                        sphere: function() {
                            i.polygonStart(), i.lineStart(), e(null, null, 1, i), i.lineEnd(), i.polygonEnd()
                        }
                    };

                function d(n, e) {
                    t(n, e) && i.point(n, e)
                }

                function p(t, n) {
                    c.point(t, n)
                }

                function v() {
                    h.point = p, c.lineStart()
                }

                function m() {
                    h.point = d, c.lineEnd()
                }

                function y(t, n) {
                    u.push([t, n]), s.point(t, n)
                }

                function g() {
                    s.lineStart(), u = []
                }

                function b() {
                    y(u[0][0], u[0][1]), s.lineEnd();
                    var t, n, e, r, c = s.clean(),
                        h = l.result(),
                        d = h.length;
                    if (u.pop(), o.push(u), u = null, d)
                        if (1 & c) {
                            if ((n = (e = h[0]).length - 1) > 0) {
                                for (f || (i.polygonStart(), f = !0), i.lineStart(), t = 0; t < n; ++t) i.point((r = e[t])[0], r[1]);
                                i.lineEnd()
                            }
                        } else d > 1 && 2 & c && h.push(h.pop().concat(h.shift())), a.push(h.filter(qr))
                }
                return h
            }
        };

    function qr(t) {
        return t.length > 1
    }

    function Ur(t, n) {
        return ((t = t.x)[0] < 0 ? t[1] - Kn - $n : Kn - t[1]) - ((n = n.x)[0] < 0 ? n[1] - Kn - $n : Kn - n[1])
    }
    var Hr = Dr(function() {
        return !0
    }, function(t) {
        var n, e = NaN,
            r = NaN,
            i = NaN;
        return {
            lineStart: function() {
                t.lineStart(), n = 1
            },
            point: function(o, a) {
                var u = o > 0 ? Yn : -Yn,
                    c = ne(o - e);
                ne(c - Yn) < $n ? (t.point(e, r = (r + a) / 2 > 0 ? Kn : -Kn), t.point(i, r), t.lineEnd(), t.lineStart(), t.point(u, r), t.point(o, r), n = 0) : i !== u && c >= Yn && (ne(e - i) < $n && (e -= i * $n), ne(o - u) < $n && (o -= u * $n), r = function(t, n, e, r) {
                    var i, o, a = ae(t - e);
                    return ne(a) > $n ? ee((ae(n) * (o = ie(r)) * ae(e) - ae(r) * (i = ie(n)) * ae(t)) / (i * o * a)) : (n + r) / 2
                }(e, r, o, a), t.point(i, r), t.lineEnd(), t.lineStart(), t.point(u, r), n = 0), t.point(e = o, r = a), i = u
            },
            lineEnd: function() {
                t.lineEnd(), e = r = NaN
            },
            clean: function() {
                return 2 - n
            }
        }
    }, function(t, n, e, r) {
        var i;
        if (null == t) i = e * Kn, r.point(-Yn, i), r.point(0, i), r.point(Yn, i), r.point(Yn, 0), r.point(Yn, -i), r.point(0, -i), r.point(-Yn, -i), r.point(-Yn, 0), r.point(-Yn, i);
        else if (ne(t[0] - n[0]) > $n) {
            var o = t[0] < n[0] ? Yn : -Yn;
            i = e * o / 2, r.point(-o, i), r.point(0, i), r.point(o, i)
        } else r.point(n[0], n[1])
    }, [-Yn, -Kn]);
    var Gr = function(t, n) {
        function e(e, r) {
            return e = t(e, r), n(e[0], e[1])
        }
        return t.invert && n.invert && (e.invert = function(e, r) {
            return (e = n.invert(e, r)) && t.invert(e[0], e[1])
        }), e
    };

    function Xr(t, n) {
        return [ne(t) > Yn ? t + Math.round(-t / Zn) * Zn : t, n]
    }

    function Wr(t, n, e) {
        return (t %= Zn) ? n || e ? Gr(Vr(t), $r(n, e)) : Vr(t) : n || e ? $r(n, e) : Xr
    }

    function Br(t) {
        return function(n, e) {
            return [(n += t) > Yn ? n - Zn : n < -Yn ? n + Zn : n, e]
        }
    }

    function Vr(t) {
        var n = Br(t);
        return n.invert = Br(-t), n
    }

    function $r(t, n) {
        var e = ie(t),
            r = ae(t),
            i = ie(n),
            o = ae(n);

        function a(t, n) {
            var a = ie(n),
                u = ie(t) * a,
                c = ae(t) * a,
                l = ae(n),
                s = l * e + u * r;
            return [re(c * i - s * o, u * e - l * r), le(s * i + c * o)]
        }
        return a.invert = function(t, n) {
            var a = ie(n),
                u = ie(t) * a,
                c = ae(t) * a,
                l = ae(n),
                s = l * i - c * o;
            return [re(c * i + l * o, u * e + s * r), le(s * e - u * r)]
        }, a
    }
    Xr.invert = Xr;

    function Yr(t, n, e, r, i, o) {
        if (e) {
            var a = ie(n),
                u = ae(n),
                c = r * e;
            null == i ? (i = n + r * Zn, o = n - c / 2) : (i = Kr(a, i), o = Kr(a, o), (r > 0 ? i < o : i > o) && (i += r * Zn));
            for (var l, s = i; r > 0 ? s > o : s < o; s -= c) l = Nr([a, -u * ie(s), -u * ae(s)]), t.point(l[0], l[1])
        }
    }

    function Kr(t, n) {
        (n = Or(n))[0] -= t, zr(n);
        var e, r = (e = -n[1]) > 1 ? 0 : e < -1 ? Yn : Math.acos(e);
        return ((-n[2] < 0 ? -r : r) + Zn - $n) % Zn
    }
    var Jr = function(t) {
            var n = ie(t),
                e = 6 * te,
                r = n > 0,
                i = ne(n) > $n;

            function o(t, e) {
                return ie(t) * ie(e) > n
            }

            function a(t, e, r) {
                var i = [1, 0, 0],
                    o = Rr(Or(t), Or(e)),
                    a = Pr(o, o),
                    u = o[0],
                    c = a - u * u;
                if (!c) return !r && t;
                var l = n * a / c,
                    s = -n * u / c,
                    f = Rr(i, o),
                    h = Fr(i, l);
                Cr(h, Fr(o, s));
                var d = f,
                    p = Pr(h, d),
                    v = Pr(d, d),
                    m = p * p - v * (Pr(h, h) - 1);
                if (!(m < 0)) {
                    var y = ce(m),
                        g = Fr(d, (-p - y) / v);
                    if (Cr(g, h), g = Nr(g), !r) return g;
                    var b, w = t[0],
                        _ = e[0],
                        x = t[1],
                        T = e[1];
                    _ < w && (b = w, w = _, _ = b);
                    var k = _ - w,
                        M = ne(k - Yn) < $n;
                    if (!M && T < x && (b = x, x = T, T = b), M || k < $n ? M ? x + T > 0 ^ g[1] < (ne(g[0] - w) < $n ? x : T) : x <= g[1] && g[1] <= T : k > Yn ^ (w <= g[0] && g[0] <= _)) {
                        var E = Fr(d, (-p + y) / v);
                        return Cr(E, h), [g, Nr(E)]
                    }
                }
            }

            function u(n, e) {
                var i = r ? t : Yn - t,
                    o = 0;
                return n < -i ? o |= 1 : n > i && (o |= 2), e < -i ? o |= 4 : e > i && (o |= 8), o
            }
            return Dr(o, function(t) {
                var n, e, c, l, s;
                return {
                    lineStart: function() {
                        l = c = !1, s = 1
                    },
                    point: function(f, h) {
                        var d, p = [f, h],
                            v = o(f, h),
                            m = r ? v ? 0 : u(f, h) : v ? u(f + (f < 0 ? Yn : -Yn), h) : 0;
                        if (!n && (l = c = v) && t.lineStart(), v !== c && (!(d = a(n, p)) || Er(n, d) || Er(p, d)) && (p[0] += $n, p[1] += $n, v = o(p[0], p[1])), v !== c) s = 0, v ? (t.lineStart(), d = a(p, n), t.point(d[0], d[1])) : (d = a(n, p), t.point(d[0], d[1]), t.lineEnd()), n = d;
                        else if (i && n && r ^ v) {
                            var y;
                            m & e || !(y = a(p, n, !0)) || (s = 0, r ? (t.lineStart(), t.point(y[0][0], y[0][1]), t.point(y[1][0], y[1][1]), t.lineEnd()) : (t.point(y[1][0], y[1][1]), t.lineEnd(), t.lineStart(), t.point(y[0][0], y[0][1])))
                        }!v || n && Er(n, p) || t.point(p[0], p[1]), n = p, c = v, e = m
                    },
                    lineEnd: function() {
                        c && t.lineEnd(), n = null
                    },
                    clean: function() {
                        return s | (l && c) << 1
                    }
                }
            }, function(n, r, i, o) {
                Yr(o, t, e, i, n, r)
            }, r ? [0, -t] : [-Yn, t - Yn])
        },
        Zr = function(t, n, e, r, i, o) {
            var a, u = t[0],
                c = t[1],
                l = 0,
                s = 1,
                f = n[0] - u,
                h = n[1] - c;
            if (a = e - u, f || !(a > 0)) {
                if (a /= f, f < 0) {
                    if (a < l) return;
                    a < s && (s = a)
                } else if (f > 0) {
                    if (a > s) return;
                    a > l && (l = a)
                }
                if (a = i - u, f || !(a < 0)) {
                    if (a /= f, f < 0) {
                        if (a > s) return;
                        a > l && (l = a)
                    } else if (f > 0) {
                        if (a < l) return;
                        a < s && (s = a)
                    }
                    if (a = r - c, h || !(a > 0)) {
                        if (a /= h, h < 0) {
                            if (a < l) return;
                            a < s && (s = a)
                        } else if (h > 0) {
                            if (a > s) return;
                            a > l && (l = a)
                        }
                        if (a = o - c, h || !(a < 0)) {
                            if (a /= h, h < 0) {
                                if (a > s) return;
                                a > l && (l = a)
                            } else if (h > 0) {
                                if (a < l) return;
                                a < s && (s = a)
                            }
                            return l > 0 && (t[0] = u + l * f, t[1] = c + l * h), s < 1 && (n[0] = u + s * f, n[1] = c + s * h), !0
                        }
                    }
                }
            }
        },
        Qr = 1e9,
        ti = -Qr;

    function ni(t, n, e, r) {
        function i(i, o) {
            return t <= i && i <= e && n <= o && o <= r
        }

        function o(i, o, u, l) {
            var s = 0,
                f = 0;
            if (null == i || (s = a(i, u)) !== (f = a(o, u)) || c(i, o) < 0 ^ u > 0)
                do {
                    l.point(0 === s || 3 === s ? t : e, s > 1 ? r : n)
                } while ((s = (s + u + 4) % 4) !== f);
            else l.point(o[0], o[1])
        }

        function a(r, i) {
            return ne(r[0] - t) < $n ? i > 0 ? 0 : 3 : ne(r[0] - e) < $n ? i > 0 ? 2 : 1 : ne(r[1] - n) < $n ? i > 0 ? 1 : 0 : i > 0 ? 3 : 2
        }

        function u(t, n) {
            return c(t.x, n.x)
        }

        function c(t, n) {
            var e = a(t, 1),
                r = a(n, 1);
            return e !== r ? e - r : 0 === e ? n[1] - t[1] : 1 === e ? t[0] - n[0] : 2 === e ? t[1] - n[1] : n[0] - t[0]
        }
        return function(a) {
            var c, l, s, f, h, d, p, v, m, y, g, b = a,
                w = Mr(),
                _ = {
                    point: x,
                    lineStart: function() {
                        _.point = T, l && l.push(s = []);
                        y = !0, m = !1, p = v = NaN
                    },
                    lineEnd: function() {
                        c && (T(f, h), d && m && w.rejoin(), c.push(w.result()));
                        _.point = x, m && b.lineEnd()
                    },
                    polygonStart: function() {
                        b = w, c = [], l = [], g = !0
                    },
                    polygonEnd: function() {
                        var n = function() {
                                for (var n = 0, e = 0, i = l.length; e < i; ++e)
                                    for (var o, a, u = l[e], c = 1, s = u.length, f = u[0], h = f[0], d = f[1]; c < s; ++c) o = h, a = d, f = u[c], h = f[0], d = f[1], a <= r ? d > r && (h - o) * (r - a) > (d - a) * (t - o) && ++n : d <= r && (h - o) * (r - a) < (d - a) * (t - o) && --n;
                                return n
                            }(),
                            e = g && n,
                            i = (c = Ir(c)).length;
                        (e || i) && (a.polygonStart(), e && (a.lineStart(), o(null, null, 1, a), a.lineEnd()), i && Ar(c, u, n, o, a), a.polygonEnd());
                        b = a, c = l = s = null
                    }
                };

            function x(t, n) {
                i(t, n) && b.point(t, n)
            }

            function T(o, a) {
                var u = i(o, a);
                if (l && s.push([o, a]), y) f = o, h = a, d = u, y = !1, u && (b.lineStart(), b.point(o, a));
                else if (u && m) b.point(o, a);
                else {
                    var c = [p = Math.max(ti, Math.min(Qr, p)), v = Math.max(ti, Math.min(Qr, v))],
                        w = [o = Math.max(ti, Math.min(Qr, o)), a = Math.max(ti, Math.min(Qr, a))];
                    Zr(c, w, t, n, e, r) ? (m || (b.lineStart(), b.point(c[0], c[1])), b.point(w[0], w[1]), u || b.lineEnd(), g = !1) : u && (b.lineStart(), b.point(o, a), g = !1)
                }
                p = o, v = a, m = u
            }
            return _
        }
    }

    function ei(t) {
        return function(n) {
            var e = new ri;
            for (var r in t) e[r] = t[r];
            return e.stream = n, e
        }
    }

    function ri() {}

    function ii(t, n, e) {
        var r = t.clipExtent && t.clipExtent();
        return t.scale(150).translate([0, 0]), null != r && t.clipExtent(null), Gn(e, t.stream(Pe)), n(Pe.result()), null != r && t.clipExtent(r), t
    }

    function oi(t, n, e) {
        return ii(t, function(e) {
            var r = n[1][0] - n[0][0],
                i = n[1][1] - n[0][1],
                o = Math.min(r / (e[1][0] - e[0][0]), i / (e[1][1] - e[0][1])),
                a = +n[0][0] + (r - o * (e[1][0] + e[0][0])) / 2,
                u = +n[0][1] + (i - o * (e[1][1] + e[0][1])) / 2;
            t.scale(150 * o).translate([a, u])
        }, e)
    }
    ri.prototype = {
        constructor: ri,
        point: function(t, n) {
            this.stream.point(t, n)
        },
        sphere: function() {
            this.stream.sphere()
        },
        lineStart: function() {
            this.stream.lineStart()
        },
        lineEnd: function() {
            this.stream.lineEnd()
        },
        polygonStart: function() {
            this.stream.polygonStart()
        },
        polygonEnd: function() {
            this.stream.polygonEnd()
        }
    };
    var ai = 16,
        ui = ie(30 * te),
        ci = function(t, n) {
            return +n ? function(t, n) {
                function e(r, i, o, a, u, c, l, s, f, h, d, p, v, m) {
                    var y = l - r,
                        g = s - i,
                        b = y * y + g * g;
                    if (b > 4 * n && v--) {
                        var w = a + h,
                            _ = u + d,
                            x = c + p,
                            T = ce(w * w + _ * _ + x * x),
                            k = le(x /= T),
                            M = ne(ne(x) - 1) < $n || ne(o - f) < $n ? (o + f) / 2 : re(_, w),
                            E = t(M, k),
                            S = E[0],
                            A = E[1],
                            j = S - r,
                            N = A - i,
                            O = g * j - y * N;
                        (O * O / b > n || ne((y * j + g * N) / b - .5) > .3 || a * h + u * d + c * p < ui) && (e(r, i, o, a, u, c, S, A, M, w /= T, _ /= T, x, v, m), m.point(S, A), e(S, A, M, w, _, x, l, s, f, h, d, p, v, m))
                    }
                }
                return function(n) {
                    var r, i, o, a, u, c, l, s, f, h, d, p, v = {
                        point: m,
                        lineStart: y,
                        lineEnd: b,
                        polygonStart: function() {
                            n.polygonStart(), v.lineStart = w
                        },
                        polygonEnd: function() {
                            n.polygonEnd(), v.lineStart = y
                        }
                    };

                    function m(e, r) {
                        e = t(e, r), n.point(e[0], e[1])
                    }

                    function y() {
                        s = NaN, v.point = g, n.lineStart()
                    }

                    function g(r, i) {
                        var o = Or([r, i]),
                            a = t(r, i);
                        e(s, f, l, h, d, p, s = a[0], f = a[1], l = r, h = o[0], d = o[1], p = o[2], ai, n), n.point(s, f)
                    }

                    function b() {
                        v.point = m, n.lineEnd()
                    }

                    function w() {
                        y(), v.point = _, v.lineEnd = x
                    }

                    function _(t, n) {
                        g(r = t, n), i = s, o = f, a = h, u = d, c = p, v.point = g
                    }

                    function x() {
                        e(s, f, l, h, d, p, i, o, r, a, u, c, ai, n), v.lineEnd = b, b()
                    }
                    return v
                }
            }(t, n) : function(t) {
                return ei({
                    point: function(n, e) {
                        n = t(n, e), this.stream.point(n[0], n[1])
                    }
                })
            }(t)
        };
    var li = ei({
        point: function(t, n) {
            this.stream.point(t * te, n * te)
        }
    });

    function si(t, n, e, r) {
        var i = ie(r),
            o = ae(r),
            a = i * t,
            u = o * t,
            c = i / t,
            l = o / t,
            s = (o * e - i * n) / t,
            f = (o * n + i * e) / t;

        function h(t, r) {
            return [a * t - u * r + n, e - u * t - a * r]
        }
        return h.invert = function(t, n) {
            return [c * t - l * n + s, f - l * t - c * n]
        }, h
    }

    function fi(t) {
        return hi(function() {
            return t
        })()
    }

    function hi(t) {
        var n, e, r, i, o, a, u, c, l, s, f = 150,
            h = 480,
            d = 250,
            p = 0,
            v = 0,
            m = 0,
            y = 0,
            g = 0,
            b = 0,
            w = null,
            _ = Hr,
            x = null,
            T = Ln,
            k = .5;

        function M(t) {
            return c(t[0] * te, t[1] * te)
        }

        function E(t) {
            return (t = c.invert(t[0], t[1])) && [t[0] * Qn, t[1] * Qn]
        }

        function S() {
            var t = si(f, 0, 0, b).apply(null, n(p, v)),
                r = (b ? si : function(t, n, e) {
                    function r(r, i) {
                        return [n + t * r, e - t * i]
                    }
                    return r.invert = function(r, i) {
                        return [(r - n) / t, (e - i) / t]
                    }, r
                })(f, h - t[0], d - t[1], b);
            return e = Wr(m, y, g), u = Gr(n, r), c = Gr(e, u), a = ci(u, k), A()
        }

        function A() {
            return l = s = null, M
        }
        return M.stream = function(t) {
                return l && s === t ? l : l = li(function(t) {
                    return ei({
                        point: function(n, e) {
                            var r = t(n, e);
                            return this.stream.point(r[0], r[1])
                        }
                    })
                }(e)(_(a(T(s = t)))))
            }, M.preclip = function(t) {
                return arguments.length ? (_ = t, w = void 0, A()) : _
            }, M.postclip = function(t) {
                return arguments.length ? (T = t, x = r = i = o = null, A()) : T
            }, M.clipAngle = function(t) {
                return arguments.length ? (_ = +t ? Jr(w = t * te) : (w = null, Hr), A()) : w * Qn
            }, M.clipExtent = function(t) {
                return arguments.length ? (T = null == t ? (x = r = i = o = null, Ln) : ni(x = +t[0][0], r = +t[0][1], i = +t[1][0], o = +t[1][1]), A()) : null == x ? null : [
                    [x, r],
                    [i, o]
                ]
            }, M.scale = function(t) {
                return arguments.length ? (f = +t, S()) : f
            }, M.translate = function(t) {
                return arguments.length ? (h = +t[0], d = +t[1], S()) : [h, d]
            }, M.center = function(t) {
                return arguments.length ? (p = t[0] % 360 * te, v = t[1] % 360 * te, S()) : [p * Qn, v * Qn]
            }, M.rotate = function(t) {
                return arguments.length ? (m = t[0] % 360 * te, y = t[1] % 360 * te, g = t.length > 2 ? t[2] % 360 * te : 0, S()) : [m * Qn, y * Qn, g * Qn]
            }, M.angle = function(t) {
                return arguments.length ? (b = t % 360 * te, S()) : b * Qn
            }, M.precision = function(t) {
                return arguments.length ? (a = ci(u, k = t * t), A()) : ce(k)
            }, M.fitExtent = function(t, n) {
                return oi(M, t, n)
            }, M.fitSize = function(t, n) {
                return function(t, n, e) {
                    return oi(t, [
                        [0, 0], n
                    ], e)
                }(M, t, n)
            }, M.fitWidth = function(t, n) {
                return function(t, n, e) {
                    return ii(t, function(e) {
                        var r = +n,
                            i = r / (e[1][0] - e[0][0]),
                            o = (r - i * (e[1][0] + e[0][0])) / 2,
                            a = -i * e[0][1];
                        t.scale(150 * i).translate([o, a])
                    }, e)
                }(M, t, n)
            }, M.fitHeight = function(t, n) {
                return function(t, n, e) {
                    return ii(t, function(e) {
                        var r = +n,
                            i = r / (e[1][1] - e[0][1]),
                            o = -i * e[0][0],
                            a = (r - i * (e[1][1] + e[0][1])) / 2;
                        t.scale(150 * i).translate([o, a])
                    }, e)
                }(M, t, n)
            },
            function() {
                return n = t.apply(this, arguments), M.invert = n.invert && E, S()
            }
    }
    var di = Math.abs,
        pi = (Math.atan, Math.atan2),
        vi = (Math.ceil, Math.cos),
        mi = (Math.exp, Math.floor, Math.log, Math.max),
        yi = Math.min,
        gi = (Math.pow, Math.round, Math.sign, Math.sin),
        bi = (Math.tan, 1e-6),
        wi = Math.PI,
        _i = wi / 2,
        xi = (Math.SQRT1_2, Si(2)),
        Ti = (Si(wi), 180 / wi),
        ki = wi / 180;

    function Mi(t) {
        return t > 1 ? _i : t < -1 ? -_i : Math.asin(t)
    }

    function Ei(t) {
        return t > 1 ? 0 : t < -1 ? wi : Math.acos(t)
    }

    function Si(t) {
        return t > 0 ? Math.sqrt(t) : 0
    }

    function Ai(t, n) {
        var e, r = t * gi(n),
            i = 30;
        do {
            n -= e = (n + gi(n) - r) / (1 + vi(n))
        } while (di(e) > bi && --i > 0);
        return n / 2
    }
    var ji = function(t, n, e) {
            function r(r, i) {
                return [t * r * vi(i = Ai(e, i)), n * gi(i)]
            }
            return r.invert = function(r, i) {
                return i = Mi(i / n), [r / (t * vi(i)), Mi((2 * i + gi(2 * i)) / e)]
            }, r
        }(xi / _i, xi, wi),
        Ni = function() {
            return fi(ji).scale(169.529)
        };

    function Oi(t, n) {
        return [t, n]
    }
    Oi.invert = Oi;
    var Pi = function() {
        return fi(Oi).scale(152.63)
    };

    function Ri(t, n) {
        var e = ie(t),
            r = t === n ? ae(t) : (e - ie(n)) / (n - t),
            i = e / r + t;
        if (ne(r) < $n) return Oi;

        function o(t, n) {
            var e = i - n,
                o = r * t;
            return [e * ae(o), i - e * ie(o)]
        }
        return o.invert = function(t, n) {
            var e = i - n;
            return [re(t, ne(e)) / r * ue(e), i - ue(r) * ce(t * t + e * e)]
        }, o
    }
    var Ci = function() {
        return (t = Ri, n = 0, e = Yn / 3, r = hi(t), i = r(n, e), i.parallels = function(t) {
            return arguments.length ? r(n = t[0] * te, e = t[1] * te) : [n * Qn, e * Qn]
        }, i).scale(131.154).center([0, 13.9389]);
        var t, n, e, r, i
    };

    function Fi(t) {
        return function(n, e) {
            var r = ce(n * n + e * e),
                i = t(r),
                o = ae(i),
                a = ie(i);
            return [re(n * o, r * a), le(r && e * o / r)]
        }
    }

    function zi(t, n) {
        return [ie(n) * ae(t), ae(n)]
    }
    zi.invert = Fi(le);
    var Li = function() {
            return fi(zi).scale(249.5).clipAngle(90 + $n)
        },
        Ii = 1.0148,
        Di = .23185,
        qi = -.14499,
        Ui = .02406,
        Hi = Ii,
        Gi = 5 * Di,
        Xi = 7 * qi,
        Wi = 9 * Ui;

    function Bi(t, n) {
        var e = n * n;
        return [t, n * (Ii + e * e * (Di + e * (qi + Ui * e)))]
    }
    Bi.invert = function(t, n) {
        n > 1.790857183 ? n = 1.790857183 : n < -1.790857183 && (n = -1.790857183);
        var e, r = n;
        do {
            var i = r * r;
            r -= e = (r * (Ii + i * i * (Di + i * (qi + Ui * i))) - n) / (Hi + i * i * (Gi + i * (Xi + Wi * i)))
        } while (di(e) > bi);
        return [t, r]
    };
    var Vi = function() {
        return fi(Bi).scale(139.319)
    };

    function $i(t, n) {
        var e = ie(n),
            r = 1 + ie(t) * e;
        return [e * ae(t) / r, ae(n) / r]
    }
    $i.invert = Fi(function(t) {
        return 2 * ee(t)
    });
    var Yi, Ki, Ji, Zi, Qi, to, no, eo, ro, io, oo, ao, uo, co, lo, so, fo = function() {
            return fi($i).scale(250).clipAngle(142)
        },
        ho = {
            sphere: fe,
            point: po,
            lineStart: mo,
            lineEnd: bo,
            polygonStart: function() {
                ho.lineStart = wo, ho.lineEnd = _o
            },
            polygonEnd: function() {
                ho.lineStart = mo, ho.lineEnd = bo
            }
        };

    function po(t, n) {
        t *= te;
        var e = ie(n *= te);
        vo(e * ie(t), e * ae(t), ae(n))
    }

    function vo(t, n, e) {
        Ji += (t - Ji) / ++Yi, Zi += (n - Zi) / Yi, Qi += (e - Qi) / Yi
    }

    function mo() {
        ho.point = yo
    }

    function yo(t, n) {
        t *= te;
        var e = ie(n *= te);
        co = e * ie(t), lo = e * ae(t), so = ae(n), ho.point = go, vo(co, lo, so)
    }

    function go(t, n) {
        t *= te;
        var e = ie(n *= te),
            r = e * ie(t),
            i = e * ae(t),
            o = ae(n),
            a = re(ce((a = lo * o - so * i) * a + (a = so * r - co * o) * a + (a = co * i - lo * r) * a), co * r + lo * i + so * o);
        Ki += a, to += a * (co + (co = r)), no += a * (lo + (lo = i)), eo += a * (so + (so = o)), vo(co, lo, so)
    }

    function bo() {
        ho.point = po
    }

    function wo() {
        ho.point = xo
    }

    function _o() {
        To(ao, uo), ho.point = po
    }

    function xo(t, n) {
        ao = t, uo = n, t *= te, n *= te, ho.point = To;
        var e = ie(n);
        co = e * ie(t), lo = e * ae(t), so = ae(n), vo(co, lo, so)
    }

    function To(t, n) {
        t *= te;
        var e = ie(n *= te),
            r = e * ie(t),
            i = e * ae(t),
            o = ae(n),
            a = lo * o - so * i,
            u = so * r - co * o,
            c = co * i - lo * r,
            l = ce(a * a + u * u + c * c),
            s = le(l),
            f = l && -s / l;
        ro += f * a, io += f * u, oo += f * c, Ki += s, to += s * (co + (co = r)), no += s * (lo + (lo = i)), eo += s * (so + (so = o)), vo(co, lo, so)
    }
    var ko = function(t) {
        Yi = Ki = Ji = Zi = Qi = to = no = eo = ro = io = oo = 0, Gn(t, ho);
        var n = ro,
            e = io,
            r = oo,
            i = n * n + e * e + r * r;
        return i < 1e-12 && (n = to, e = no, r = eo, Ki < $n && (n = Ji, e = Zi, r = Qi), (i = n * n + e * e + r * r) < 1e-12) ? [NaN, NaN] : [re(e, n) * Qn, le(r / ce(i)) * Qn]
    };

    function Mo(t, n) {
        var e = ie(n),
            r = ie(t) * e;
        return [e * ae(t) / r, ae(n) / r]
    }
    Mo.invert = Fi(ee);
    var Eo, So, Ao, jo, No, Oo = Xn(),
        Po = Xn(),
        Ro = {
            point: fe,
            lineStart: fe,
            lineEnd: fe,
            polygonStart: function() {
                Oo.reset(), Ro.lineStart = Co, Ro.lineEnd = Fo
            },
            polygonEnd: function() {
                var t = +Oo;
                Po.add(t < 0 ? Zn + t : t), this.lineStart = this.lineEnd = this.point = fe
            },
            sphere: function() {
                Po.add(Zn)
            }
        };

    function Co() {
        Ro.point = zo
    }

    function Fo() {
        Lo(Eo, So)
    }

    function zo(t, n) {
        Ro.point = Lo, Eo = t, So = n, Ao = t *= te, jo = ie(n = (n *= te) / 2 + Jn), No = ae(n)
    }

    function Lo(t, n) {
        var e = (t *= te) - Ao,
            r = e >= 0 ? 1 : -1,
            i = r * e,
            o = ie(n = (n *= te) / 2 + Jn),
            a = ae(n),
            u = No * a,
            c = jo * o + u * ie(i),
            l = u * r * ae(i);
        Oo.add(re(l, c)), Ao = t, jo = o, No = a
    }
    var Io, Do, qo, Uo, Ho, Go, Xo, Wo, Bo, Vo, $o = Xn(),
        Yo = {
            point: Ko,
            lineStart: Zo,
            lineEnd: Qo,
            polygonStart: function() {
                Yo.point = ta, Yo.lineStart = na, Yo.lineEnd = ea, $o.reset(), Ro.polygonStart()
            },
            polygonEnd: function() {
                Ro.polygonEnd(), Yo.point = Ko, Yo.lineStart = Zo, Yo.lineEnd = Qo, Oo < 0 ? (Io = -(qo = 180), Do = -(Uo = 90)) : $o > $n ? Uo = 90 : $o < -$n && (Do = -90), Vo[0] = Io, Vo[1] = qo
            }
        };

    function Ko(t, n) {
        Bo.push(Vo = [Io = t, qo = t]), n < Do && (Do = n), n > Uo && (Uo = n)
    }

    function Jo(t, n) {
        var e = Or([t * te, n * te]);
        if (Wo) {
            var r = Rr(Wo, e),
                i = Rr([r[1], -r[0], 0], r);
            zr(i), i = Nr(i);
            var o, a = t - Ho,
                u = a > 0 ? 1 : -1,
                c = i[0] * Qn * u,
                l = ne(a) > 180;
            l ^ (u * Ho < c && c < u * t) ? (o = i[1] * Qn) > Uo && (Uo = o) : l ^ (u * Ho < (c = (c + 360) % 360 - 180) && c < u * t) ? (o = -i[1] * Qn) < Do && (Do = o) : (n < Do && (Do = n), n > Uo && (Uo = n)), l ? t < Ho ? ra(Io, t) > ra(Io, qo) && (qo = t) : ra(t, qo) > ra(Io, qo) && (Io = t) : qo >= Io ? (t < Io && (Io = t), t > qo && (qo = t)) : t > Ho ? ra(Io, t) > ra(Io, qo) && (qo = t) : ra(t, qo) > ra(Io, qo) && (Io = t)
        } else Bo.push(Vo = [Io = t, qo = t]);
        n < Do && (Do = n), n > Uo && (Uo = n), Wo = e, Ho = t
    }

    function Zo() {
        Yo.point = Jo
    }

    function Qo() {
        Vo[0] = Io, Vo[1] = qo, Yo.point = Ko, Wo = null
    }

    function ta(t, n) {
        if (Wo) {
            var e = t - Ho;
            $o.add(ne(e) > 180 ? e + (e > 0 ? 360 : -360) : e)
        } else Go = t, Xo = n;
        Ro.point(t, n), Jo(t, n)
    }

    function na() {
        Ro.lineStart()
    }

    function ea() {
        ta(Go, Xo), Ro.lineEnd(), ne($o) > $n && (Io = -(qo = 180)), Vo[0] = Io, Vo[1] = qo, Wo = null
    }

    function ra(t, n) {
        return (n -= t) < 0 ? n + 360 : n
    }

    function ia(t, n) {
        return t[0] - n[0]
    }

    function oa(t, n) {
        return t[0] <= t[1] ? t[0] <= n && n <= t[1] : n < t[0] || t[1] < n
    }
    var aa = function(t) {
            var n, e, r, i, o, a, u;
            if (Uo = qo = -(Io = Do = 1 / 0), Bo = [], Gn(t, Yo), e = Bo.length) {
                for (Bo.sort(ia), n = 1, o = [r = Bo[0]]; n < e; ++n) oa(r, (i = Bo[n])[0]) || oa(r, i[1]) ? (ra(r[0], i[1]) > ra(r[0], r[1]) && (r[1] = i[1]), ra(i[0], r[1]) > ra(r[0], r[1]) && (r[0] = i[0])) : o.push(r = i);
                for (a = -1 / 0, n = 0, r = o[e = o.length - 1]; n <= e; r = i, ++n) i = o[n], (u = ra(r[1], i[0])) > a && (a = u, Io = i[0], qo = r[1])
            }
            return Bo = Vo = null, Io === 1 / 0 || Do === 1 / 0 ? [
                [NaN, NaN],
                [NaN, NaN]
            ] : [
                [Io, Do],
                [qo, Uo]
            ]
        },
        ua = function(t, n) {
            var e = t[0] * te,
                r = t[1] * te,
                i = n[0] * te,
                o = n[1] * te,
                a = ie(r),
                u = ae(r),
                c = ie(o),
                l = ae(o),
                s = a * ie(e),
                f = a * ae(e),
                h = c * ie(i),
                d = c * ae(i),
                p = 2 * le(ce(se(o - r) + a * c * se(i - e))),
                v = ae(p),
                m = p ? function(t) {
                    var n = ae(t *= p) / v,
                        e = ae(p - t) / v,
                        r = e * s + n * h,
                        i = e * f + n * d,
                        o = e * u + n * l;
                    return [re(i, r) * Qn, re(o, ce(r * r + i * i)) * Qn]
                } : function() {
                    return [e * Qn, r * Qn]
                };
            return m.distance = p, m
        },
        ca = function(t, n) {
            var e = sa(t[1], t[0]),
                r = sa(n[1], n[0]),
                i = function(t, n) {
                    return pi(t[0] * n[1] - t[1] * n[0], t[0] * n[0] + t[1] * n[1])
                }(e, r),
                o = fa(e) / fa(r);
            return la([1, 0, t[0][0], 0, 1, t[0][1]], la([o, 0, 0, 0, o, 0], la([vi(i), gi(i), 0, -gi(i), vi(i), 0], [1, 0, -n[0][0], 0, 1, -n[0][1]])))
        };

    function la(t, n) {
        return [t[0] * n[0] + t[1] * n[3], t[0] * n[1] + t[1] * n[4], t[0] * n[2] + t[1] * n[5] + t[2], t[3] * n[0] + t[4] * n[3], t[3] * n[1] + t[4] * n[4], t[3] * n[2] + t[4] * n[5] + t[5]]
    }

    function sa(t, n) {
        return [t[0] - n[0], t[1] - n[1]]
    }

    function fa(t) {
        return Si(t[0] * t[0] + t[1] * t[1])
    }
    var ha = function(t, n, e) {
        function r(t, e) {
            var r, i = n(t, e),
                o = i.project([t * Ti, e * Ti]);
            return (r = i.transform) ? [r[0] * o[0] + r[1] * o[1] + r[2], -(r[3] * o[0] + r[4] * o[1] + r[5])] : (o[1] = -o[1], o)
        }! function t(n, e) {
            n.edges = function(t) {
                for (var n = t.length, e = [], r = t[n - 1], i = 0; i < n; ++i) e.push([r, r = t[i]]);
                return e
            }(n.face);
            if (e.face) {
                var r = n.shared = function(t, n) {
                        for (var e, r, i = t.length, o = null, a = 0; a < i; ++a) {
                            e = t[a];
                            for (var u = n.length; --u >= 0;)
                                if (r = n[u], e[0] === r[0] && e[1] === r[1]) {
                                    if (o) return [o, e];
                                    o = e
                                }
                        }
                    }(n.face, e.face),
                    i = ca(r.map(e.project), r.map(n.project));
                n.transform = e.transform ? la(e.transform, i) : i;
                for (var o = e.edges, a = 0, u = o.length; a < u; ++a) da(r[0], o[a][1]) && da(r[1], o[a][0]) && (o[a] = n), da(r[0], o[a][0]) && da(r[1], o[a][1]) && (o[a] = n);
                for (o = n.edges, a = 0, u = o.length; a < u; ++a) da(r[0], o[a][0]) && da(r[1], o[a][1]) && (o[a] = e), da(r[0], o[a][1]) && da(r[1], o[a][0]) && (o[a] = e)
            } else n.transform = e.transform;
            n.children && n.children.forEach(function(e) {
                t(e, n)
            });
            return n
        }(t, {
            transform: null
        }), pa(t) && (r.invert = function(e, r) {
            var i = function t(e, r) {
                var i = e.project.invert,
                    o = e.transform,
                    a = r;
                o && (c = 1 / ((u = o)[0] * u[4] - u[1] * u[3]), o = [c * u[4], -c * u[1], c * (u[1] * u[5] - u[2] * u[4]), -c * u[3], c * u[0], c * (u[2] * u[3] - u[0] * u[5])], a = [o[0] * a[0] + o[1] * a[1] + o[2], o[3] * a[0] + o[4] * a[1] + o[5]]);
                var u, c;
                if (i && e === function(t) {
                        return n(t[0] * ki, t[1] * ki)
                    }(l = i(a))) return l;
                var l, s = e.children;
                for (var f = 0, h = s && s.length; f < h; ++f)
                    if (l = t(s[f], r)) return l
            }(t, [e, -r]);
            return i && (i[0] *= ki, i[1] *= ki, i)
        });
        var i = fi(r),
            o = i.stream;
        return i.stream = function(n) {
            var e = i.rotate(),
                r = o(n),
                a = (i.rotate([0, 0]), o(n));
            return i.rotate(e), r.sphere = function() {
                a.polygonStart(), a.lineStart(),
                    function t(n, e, r) {
                        var i, o, a = e.edges,
                            u = a.length,
                            c = {
                                type: "MultiPoint",
                                coordinates: e.face
                            },
                            l = e.face.filter(function(t) {
                                return 90 !== di(t[1])
                            }),
                            s = aa({
                                type: "MultiPoint",
                                coordinates: l
                            }),
                            f = !1,
                            h = -1,
                            d = s[1][0] - s[0][0];
                        var p = 180 === d || 360 === d ? [(s[0][0] + s[1][0]) / 2, (s[0][1] + s[1][1]) / 2] : ko(c);
                        if (r)
                            for (; ++h < u && a[h] !== r;);
                        ++h;
                        for (var v = 0; v < u; ++v) o = a[(v + h) % u], Array.isArray(o) ? (f || (n.point((i = ua(o[0], p)(bi))[0], i[1]), f = !0), n.point((i = ua(o[1], p)(bi))[0], i[1])) : (f = !1, o !== r && t(n, o, e))
                    }(a, t), a.lineEnd(), a.polygonEnd()
            }, r
        }, i.angle(null == e ? -30 : e * Ti)
    };

    function da(t, n) {
        return t && n && t[0] === n[0] && t[1] === n[1]
    }

    function pa(t) {
        return t.project.invert || t.children && t.children.some(pa)
    }
    var va = [
            [0, 90],
            [-90, 0],
            [0, 0],
            [90, 0],
            [180, 0],
            [0, -90]
        ],
        ma = [
            [0, 2, 1],
            [0, 3, 2],
            [5, 1, 2],
            [5, 2, 3],
            [0, 1, 4],
            [0, 4, 3],
            [5, 4, 1],
            [5, 3, 4]
        ].map(function(t) {
            return t.map(function(t) {
                return va[t]
            })
        }),
        ya = function(t) {
            t = t || function(t) {
                var n = 6 === t.length ? ko({
                    type: "MultiPoint",
                    coordinates: t
                }) : t[0];
                return fi(Mo).scale(144.049).clipAngle(60).scale(1).translate([0, 0]).rotate([-n[0], -n[1]])
            };
            var n = ma.map(function(t) {
                    for (var n, e = t.map(wa), r = e.length, i = e[r - 1], o = [], a = 0; a < r; ++a) n = e[a], o.push(ba([.9486832980505138 * i[0] + .31622776601683794 * n[0], .9486832980505138 * i[1] + .31622776601683794 * n[1], .9486832980505138 * i[2] + .31622776601683794 * n[2]]), ba([.9486832980505138 * n[0] + .31622776601683794 * i[0], .9486832980505138 * n[1] + .31622776601683794 * i[1], .9486832980505138 * n[2] + .31622776601683794 * i[2]])), i = n;
                    return o
                }),
                e = [],
                r = [-1, 0, 0, 1, 0, 1, 4, 5];
            n.forEach(function(t, i) {
                for (var o, a, u = ma[i], c = u.length, l = e[i] = [], s = 0; s < c; ++s) n.push([u[s], t[(2 * s + 2) % (2 * c)], t[(2 * s + 1) % (2 * c)]]), r.push(i), l.push((o = wa(t[(2 * s + 2) % (2 * c)]), a = wa(t[(2 * s + 1) % (2 * c)]), [o[1] * a[2] - o[2] * a[1], o[2] * a[0] - o[0] * a[2], o[0] * a[1] - o[1] * a[0]]))
            });
            var i = n.map(function(n) {
                return {
                    project: t(n),
                    face: n
                }
            });
            return r.forEach(function(t, n) {
                var e = i[t];
                e && (e.children || (e.children = [])).push(i[n])
            }), ha(i[0], function(t, n) {
                var r = vi(n),
                    o = [r * vi(t), r * gi(t), gi(n)],
                    a = t < -wi / 2 ? n < 0 ? 6 : 4 : t < 0 ? n < 0 ? 2 : 0 : t < wi / 2 ? n < 0 ? 3 : 1 : n < 0 ? 7 : 5,
                    u = e[a];
                return i[ga(u[0], o) < 0 ? 8 + 3 * a : ga(u[1], o) < 0 ? 8 + 3 * a + 1 : ga(u[2], o) < 0 ? 8 + 3 * a + 2 : a]
            }).angle(-30).scale(110.625).center([0, 45])
        };

    function ga(t, n) {
        for (var e = 0, r = t.length, i = 0; e < r; ++e) i += t[e] * n[e];
        return i
    }

    function ba(t) {
        return [pi(t[1], t[0]) * Ti, Mi(mi(-1, yi(1, t[2]))) * Ti]
    }

    function wa(t) {
        var n = t[0] * ki,
            e = t[1] * ki,
            r = vi(e);
        return [r * vi(n), r * gi(n), gi(e)]
    }

    function _a(t, n) {
        var e = vi(n),
            r = function(t) {
                return t ? t / Math.sin(t) : 1
            }(Ei(e * vi(t /= 2)));
        return [2 * e * gi(t) * r, gi(n) * r]
    }
    _a.invert = function(t, n) {
        if (!(t * t + 4 * n * n > wi * wi + bi)) {
            var e = t,
                r = n,
                i = 25;
            do {
                var o, a = gi(e),
                    u = gi(e / 2),
                    c = vi(e / 2),
                    l = gi(r),
                    s = vi(r),
                    f = gi(2 * r),
                    h = l * l,
                    d = s * s,
                    p = u * u,
                    v = 1 - d * c * c,
                    m = v ? Ei(s * c) * Si(o = 1 / v) : o = 0,
                    y = 2 * m * s * u - t,
                    g = m * l - n,
                    b = o * (d * p + m * s * c * h),
                    w = o * (.5 * a * f - 2 * m * l * u),
                    _ = .25 * o * (f * u - m * l * d * a),
                    x = o * (h * c + m * p * s),
                    T = w * _ - x * b;
                if (!T) break;
                var k = (g * w - y * x) / T,
                    M = (y * _ - g * b) / T;
                e -= k, r -= M
            } while ((di(k) > bi || di(M) > bi) && --i > 0);
            return [e, r]
        }
    };

    function xa(t, n) {
        var e = _a(t, n);
        return [(e[0] + t / _i) / 2, (e[1] + n) / 2]
    }
    xa.invert = function(t, n) {
        var e = t,
            r = n,
            i = 25;
        do {
            var o, a = vi(r),
                u = gi(r),
                c = gi(2 * r),
                l = u * u,
                s = a * a,
                f = gi(e),
                h = vi(e / 2),
                d = gi(e / 2),
                p = d * d,
                v = 1 - s * h * h,
                m = v ? Ei(a * h) * Si(o = 1 / v) : o = 0,
                y = .5 * (2 * m * a * d + e / _i) - t,
                g = .5 * (m * u + r) - n,
                b = .5 * o * (s * p + m * a * h * l) + .5 / _i,
                w = o * (f * c / 4 - m * u * d),
                _ = .125 * o * (c * d - m * u * s * f),
                x = .5 * o * (l * h + m * p * a) + .5,
                T = w * _ - x * b,
                k = (g * w - y * x) / T,
                M = (y * _ - g * b) / T;
            e -= k, r -= M
        } while ((di(k) > bi || di(M) > bi) && --i > 0);
        return [e, r]
    };
    var Ta = function() {
            return fi(xa).scale(158.837)
        },
        ka = e(31);

    function Ma(t, n, e, r, a) {
        var u = Object(o.c)(e + 90, 360),
            c = 180 < u ? -1 : 1;
        c < 0 ? (e = 270 - u, n += 180) : e = u - 90, e *= i.c, n = (Object(o.c)(n + 180, 360) - 180) * i.c;
        var l = t * t,
            s = Math.sin(e),
            f = Math.cos(e),
            h = t * f,
            d = f / t,
            p = [r, a];

        function v(e) {
            var o = e[0],
                u = e[1];
            if (o != o || u != u) return [NaN, NaN];
            var l = o * i.c,
                f = u * i.c,
                d = l - n,
                p = Math.sin(d),
                v = Math.cos(d),
                m = Math.sin(f),
                y = Math.cos(f),
                g = t * y;
            return [g * p * c + r, (g * v * s - h * m) * c + a]
        }
        return v.invert = function(t) {
            var e = t[0],
                o = t[1],
                u = (e - r) * c,
                f = (a - o) * c,
                p = 1 - (u * u + f * f) / l;
            if (p >= 0) {
                var v = Math.sqrt(p),
                    m = n + Math.atan2(u, v * h - f * s),
                    y = Math.asin(v * s + f * d);
                return [m * i.a, y * i.a]
            }
            return [NaN, NaN]
        }, v.webgl = function(t) {
            return {
                shaderSource: function() {
                    return ka
                },
                textures: function() {
                    return {}
                },
                uniforms: function() {
                    return {
                        u_translate: p,
                        u_R2: l,
                        u_lon0: n,
                        u_sinlat0: s,
                        u_Rcoslat0: h,
                        u_coslat0dR: d,
                        u_flip: c
                    }
                }
            }
        }, v
    }

    function Ea() {
        var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1,
            n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1,
            e = document.createElement("canvas");
        return e.width = t, e.height = n, e
    }

    function Sa(t) {
        var n = t.canvas,
            e = n.width,
            r = n.height;
        t.save(), t.setTransform(1, 0, 0, 1, 0, 0), t.clearRect(0, 0, e, r), t.restore()
    }

    function Aa(t) {
        Sa(t.getContext("2d"))
    }

    function ja(t, n) {
        return {
            renderTo: function(e, r) {
                d.c(e, n), e.beginPath(), r(t), e.stroke()
            }
        }
    }

    function Na(t) {
        return {
            renderTo: function(n, e) {
                Sa(n), e.context(n), n.lineJoin = "bevel", t.forEach(function(t) {
                    return t.renderTo(n, e)
                })
            }
        }
    }

    function Oa(t, n) {
        return function(t) {
            if (Array.isArray(t)) return t
        }(t) || function(t, n) {
            var e = [],
                r = !0,
                i = !1,
                o = void 0;
            try {
                for (var a, u = t[Symbol.iterator](); !(r = (a = u.next()).done) && (e.push(a.value), !n || e.length !== n); r = !0);
            } catch (t) {
                i = !0, o = t
            } finally {
                try {
                    r || null == u.return || u.return()
                } finally {
                    if (i) throw o
                }
            }
            return e
        }(t, n) || function() {
            throw new TypeError("Invalid attempt to destructure non-iterable instance")
        }()
    }

    function Pa() {
        return [Object(o.c)((new Date).getTimezoneOffset() / 4, 360), 0]
    }

    function Ra(t, n) {
        return a.isFinite(t) || t === 1 / 0 || t === -1 / 0 ? t : n
    }

    function Ca(t, n) {
        var e = hr().projection(t).bounds({
                type: "Sphere"
            }),
            r = (e[1][0] - e[0][0]) / t.scale(),
            i = (e[1][1] - e[0][1]) / t.scale(),
            o = .9 * Math.min(n.width / r, n.height / i),
            a = [n.width / 2, n.height / 2];
        return t.scale(o).translate(a)
    }

    function Fa() {
        return {
            projection: null,
            newProjection: function(t) {
                throw new Error("method must be overridden")
            },
            optimizedProjection: function() {
                return this.projection
            },
            bounds: function(t) {
                return function(t, n) {
                    var e = t[0],
                        r = t[1],
                        i = Math.max(Math.floor(Ra(e[0], 0)), 0),
                        o = Math.max(Math.floor(Ra(e[1], 0)), 0),
                        a = Math.min(Math.ceil(Ra(r[0], n.width)), n.width - 1),
                        u = Math.min(Math.ceil(Ra(r[1], n.height)), n.height - 1);
                    return {
                        x: i,
                        y: o,
                        xMax: a,
                        yMax: u,
                        width: a - i + 1,
                        height: u - o + 1
                    }
                }(hr().projection(this.projection).bounds({
                    type: "Sphere"
                }), t)
            },
            fit: function(t) {
                return d.q() && "tara" === d.C() ? 700 : this.newProjection(t).scale()
            },
            center: function(t) {
                return [t.width / 2, t.height / 2]
            },
            scaleExtent: function() {
                return [25, 3e3]
            },
            orientation: function(t, n) {
                var e = this.projection,
                    r = e.rotate();
                if (n) {
                    var i = a.isString(t) ? t.split(",") : [],
                        u = +i[0],
                        c = +i[1],
                        l = +i[2],
                        s = this.scaleExtent();
                    return e.rotate(a.isFinite(u) && a.isFinite(c) ? [-u, -c, r[2]] : this.newProjection(n).rotate()), e.scale(a.isFinite(l) ? Object(o.a)(l, s[0], s[1]) : this.fit(n)), e.translate(this.center(n)), this
                }
                return [(-r[0]).toFixed(2), (-r[1]).toFixed(2), Math.round(e.scale())].join(",")
            },
            manipulator: function(t, n) {
                var e = this.projection,
                    r = 60 / n,
                    i = [e.rotate()[0] / r, -e.rotate()[1] / r],
                    o = e.precision();
                return e.precision(10 * o), {
                    move: function(n, o) {
                        if (n) {
                            var a = n[0] - t[0] + i[0],
                                u = n[1] - t[1] + i[1];
                            e.rotate([a * r, -u * r, e.rotate()[2]])
                        }
                        e.scale(o)
                    },
                    end: function() {
                        e.precision(o)
                    }
                }
            },
            locate: function(t) {
                return null
            },
            defineMask: function(t) {
                return hr().projection(this.projection).context(t)({
                    type: "Sphere"
                }), t
            },
            backgroundRenderer: function() {
                return {
                    renderTo: function(t, n) {
                        t.fillStyle = "#303030", t.beginPath(), n({
                            type: "Sphere"
                        }), t.fill()
                    }
                }
            },
            graticuleRenderer: function() {
                var t = kr()(),
                    n = kr().extentMinor([
                        [0, 0],
                        [0, 0]
                    ]).stepMajor([0, 90])(),
                    e = ja(t, {
                        strokeStyle: "#505050",
                        lineWidth: 1
                    }),
                    r = ja(n, {
                        strokeStyle: "#808080",
                        lineWidth: 1
                    });
                return {
                    renderTo: function(t, n) {
                        e.renderTo(t, n), r.renderTo(t, n)
                    }
                }
            },
            foregroundRenderer: function() {
                return {
                    renderTo: function(t, n) {
                        t.strokeStyle = "#000005", t.lineWidth = 4, t.beginPath(), n({
                            type: "Sphere"
                        }), t.stroke()
                    }
                }
            }
        }
    }

    function za(t, n) {
        var e = d.c(Fa(), t);
        return e.projection = e.newProjection(n), e
    }

    function La(t) {
        return za({
            newProjection: function(t) {
                return Ca(Ni().rotate([30, -45, 90]).precision(.1), t)
            }
        }, t)
    }

    function Ia(t) {
        return za({
            newProjection: function(t) {
                return Ca(Ci().rotate(Pa()).precision(.1), t)
            }
        }, t)
    }

    function Da(t) {
        return za({
            newProjection: function(t) {
                return Ca(Pi().rotate(Pa()).precision(.1), t)
            }
        }, t)
    }

    function qa(t) {
        return za({
            newProjection: function(t) {
                return Ca(Li().rotate(Pa()).precision(.1).clipAngle(90), t)
            },
            optimizedProjection: function() {
                return Ma.fromD3(this.projection)
            },
            backgroundRenderer: function() {
                return {
                    renderTo: function(t, n) {
                        var e = n.projection(),
                            r = Oa(e.translate(), 2),
                            i = r[0],
                            o = r[1],
                            a = e.scale(),
                            u = t.createRadialGradient(i, o, 0, i, o, a);
                        u.addColorStop(.69, "#303030"), u.addColorStop(.91, "#202020"), u.addColorStop(.96, "#000005"), t.fillStyle = u, t.fillRect(i - a, o - a, 2 * a, 2 * a)
                    }
                }
            },
            foregroundRenderer: function() {
                return {
                    renderTo: function(t, n) {
                        var e = n.projection(),
                            r = Oa(e.translate(), 2),
                            o = r[0],
                            a = r[1],
                            u = e.scale();
                        t.fillStyle = "#000005", t.beginPath(), t.arc(o, a, u - 2, 0, i.e, !0), t.arc(o, a, u + 4, 0, i.e, !0), t.fill("evenodd")
                    }
                }
            },
            locate: function(t) {
                return [-t[0], -t[1], this.projection.rotate()[2]]
            }
        }, t)
    }

    function Ua(t) {
        return za({
            newProjection: function(t) {
                return Ca(Vi().precision(.1), t)
            }
        }, t)
    }

    function Ha(t) {
        return za({
            newProjection: function(t) {
                return Ca(fo().rotate([-43, -20]).precision(1).clipAngle(179.9999).clipExtent([
                    [0, 0],
                    [t.width, t.height]
                ]), t)
            },
            foregroundRenderer: function() {
                return {
                    renderTo: function(t, n) {}
                }
            }
        }, t)
    }

    function Ga(t) {
        return za({
            newProjection: function(t) {
                return Ca(ya().rotate([20, 0]).precision(.1), t)
            },
            foregroundRenderer: function() {
                return {
                    renderTo: function(t, n) {
                        var e = t.canvas,
                            r = e.width,
                            i = e.height;
                        t.fillStyle = t.strokeStyle = "#000005", t.lineWidth = 4, t.beginPath(), n({
                            type: "Sphere"
                        }), t.stroke(), t.moveTo(0, 0), t.lineTo(r, 0), t.lineTo(r, i), t.lineTo(0, i), t.lineTo(0, 0), t.fill("evenodd")
                    }
                }
            }
        }, t)
    }

    function Xa(t) {
        return za({
            newProjection: function(t) {
                return Ca(Ta().precision(.1), t)
            }
        }, t)
    }
    Ma.fromD3 = function(t) {
        var n = t.translate(),
            e = t.rotate();
        if (0 !== e[2]) throw new Error("γ rotation not supported");
        return Ma(t.scale(), -e[0], -e[1], n[0], n[1])
    };

    function Wa() {}

    function Ba(t, n) {
        var e = new Wa;
        if (t instanceof Wa) t.each(function(t, n) {
            e.set(n, t)
        });
        else if (Array.isArray(t)) {
            var r, i = -1,
                o = t.length;
            if (null == n)
                for (; ++i < o;) e.set(i, t[i]);
            else
                for (; ++i < o;) e.set(n(r = t[i], i, t), r)
        } else if (t)
            for (var a in t) e.set(a, t[a]);
        return e
    }
    Wa.prototype = Ba.prototype = {
        constructor: Wa,
        has: function(t) {
            return "$" + t in this
        },
        get: function(t) {
            return this["$" + t]
        },
        set: function(t, n) {
            return this["$" + t] = n, this
        },
        remove: function(t) {
            var n = "$" + t;
            return n in this && delete this[n]
        },
        clear: function() {
            for (var t in this) "$" === t[0] && delete this[t]
        },
        keys: function() {
            var t = [];
            for (var n in this) "$" === n[0] && t.push(n.slice(1));
            return t
        },
        values: function() {
            var t = [];
            for (var n in this) "$" === n[0] && t.push(this[n]);
            return t
        },
        entries: function() {
            var t = [];
            for (var n in this) "$" === n[0] && t.push({
                key: n.slice(1),
                value: this[n]
            });
            return t
        },
        size: function() {
            var t = 0;
            for (var n in this) "$" === n[0] && ++t;
            return t
        },
        empty: function() {
            for (var t in this)
                if ("$" === t[0]) return !1;
            return !0
        },
        each: function(t) {
            for (var n in this) "$" === n[0] && t(this[n], n.slice(1), this)
        }
    };
    var Va = Ba;

    function $a() {}
    var Ya = Va.prototype;

    function Ka(t, n) {
        var e = new $a;
        if (t instanceof $a) t.each(function(t) {
            e.add(t)
        });
        else if (t) {
            var r = -1,
                i = t.length;
            if (null == n)
                for (; ++r < i;) e.add(t[r]);
            else
                for (; ++r < i;) e.add(n(t[r], r, t))
        }
        return e
    }
    $a.prototype = Ka.prototype = {
        constructor: $a,
        has: Ya.has,
        add: function(t) {
            return this["$" + (t += "")] = t, this
        },
        remove: Ya.remove,
        clear: Ya.clear,
        values: Ya.keys,
        size: Ya.size,
        empty: Ya.empty,
        each: Ya.each
    };
    var Ja = Ka,
        Za = tu,
        Qa = {
            skew: 0
        };
    Promise.resolve(Qa);

    function tu() {
        return Date.now() + Qa.skew
    }

    function nu() {
        return Za()
    }

    function eu(t, n, e) {
        var r = t[0].header,
            i = wr.a(wr.f(r.refTime), {
                hour: r.forecastTime
            }),
            o = {
                time: {
                    data: [wr.h(i)]
                },
                lat: {
                    sequence: {
                        start: r.la1,
                        delta: -r.dy,
                        size: r.ny
                    }
                },
                lon: {
                    sequence: {
                        start: r.lo1,
                        delta: r.dx,
                        size: r.nx
                    }
                }
            },
            a = [];
        return n.forEach(function(n, r) {
            o[n] = {
                dimensions: e || ["time", "lat", "lon"],
                data: {
                    block: r
                }
            }, a[r] = new Float32Array(t[r].data)
        }), {
            header: {
                variables: o
            },
            blocks: a
        }
    }
    var ru = e(32);

    function iu(t, n) {
        var e = Math.floor(t.size),
            r = Math.floor(n.size),
            a = e * r,
            u = d.h(t.delta),
            c = d.h(n.delta),
            l = d.h(t.start),
            s = d.h(n.start),
            f = l + u * (e - 1),
            h = s + c * (r - 1),
            p = (l - u / 2) * i.c,
            v = (f + u / 2) * i.c - p,
            m = (s - c / 2) * i.c,
            y = (h + c / 2) * i.c,
            g = [p, m],
            b = [v, y - m],
            w = Math.floor(e * u) >= 360;
        return {
            dimensions: function() {
                return {
                    width: e,
                    height: r
                }
            },
            isCylindrical: function() {
                return w
            },
            forEach: function(t, n) {
                for (var r = n || 0; r < a; r++) {
                    var i = r % e,
                        o = Math.floor(r / e);
                    if (t(l + i * u, s + o * c, r)) return r + 1
                }
                return NaN
            },
            closest: function(t) {
                var n = t[0],
                    i = t[1];
                if (n == n && i == i) {
                    var a = Object(o.c)(n - l, 360) / u,
                        f = (i - s) / c,
                        h = Math.round(a),
                        d = Math.round(f);
                    if (0 <= d && d < r && 0 <= h && (h < e || h === e && w)) {
                        var p = d * e + h;
                        return h === e ? p - e : p
                    }
                }
                return NaN
            },
            closest4: function(t) {
                var n = t[0],
                    i = t[1];
                if (n == n && i == i) {
                    var a = Object(o.c)(n - l, 360) / u,
                        f = (i - s) / c,
                        h = Math.floor(a),
                        d = Math.floor(f),
                        p = h + 1;
                    if (0 <= d && d + 1 < r && 0 <= h && (p < e || p === e && w)) {
                        var v = d * e + h,
                            m = v + 1,
                            y = v + e,
                            g = y + 1;
                        return p === e && (m -= e, g -= e), [v, m, y, g, a - h, f - d]
                    }
                }
                return [NaN, NaN, NaN, NaN, NaN, NaN]
            },
            webgl: function() {
                return {
                    shaderSource: function() {
                        return ru
                    },
                    textures: function() {
                        return {}
                    },
                    uniforms: function() {
                        return {
                            u_Low: g,
                            u_Size: b
                        }
                    }
                }
            }
        }
    }
    var ou = e(33),
        au = e(34),
        uu = e(35),
        cu = e(36);

    function lu(t, n) {
        var e = t.context,
            r = n.width,
            i = n.height;
        return {
            shaderSourceTexture2D: function() {
                return ou
            },
            shaderSourceBilinearWrap: function() {
                return au
            },
            scalarSource: function() {
                return uu
            },
            vectorSource: function() {
                return cu
            },
            scalarTexture: function(t) {
                var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
                return d.c({
                    format: e.LUMINANCE,
                    type: e.FLOAT,
                    width: r,
                    height: i,
                    data: t
                }, n)
            },
            vectorTexture: function(t) {
                var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
                return d.c({
                    format: e.LUMINANCE_ALPHA,
                    type: e.FLOAT,
                    width: r,
                    height: i,
                    data: t
                }, n)
            }
        }
    }

    function su(t, n) {
        var e = d.a(n, 1e3);

        function r(e) {
            var r = t.closest(e);
            return r == r ? n[r] : 7e37
        }
        return r.webgl = function(r) {
            var i = r.context,
                o = lu(r, t.dimensions());
            return {
                shaderSource: function() {
                    return [o.scalarSource(), o.shaderSourceTexture2D()]
                },
                textures: function() {
                    return {
                        weather_data: o.scalarTexture(n, {
                            hash: e,
                            TEXTURE_MIN_FILTER: i.NEAREST,
                            TEXTURE_MAG_FILTER: i.NEAREST
                        })
                    }
                },
                uniforms: function() {
                    return {
                        u_Data: "weather_data"
                    }
                }
            }
        }, r
    }

    function fu(t, n) {
        var e = d.a(n, 1e3);

        function r(e) {
            var r = 2 * t.closest(e);
            if (r == r) {
                var i = n[r],
                    o = n[r + 1];
                if (i < 7e37 && o < 7e37) return [i, o, Math.sqrt(i * i + o * o)]
            }
            return [7e37, 7e37, 7e37]
        }
        return r.webgl = function(r) {
            var i = r.context,
                o = lu(r, t.dimensions());
            return {
                shaderSource: function() {
                    return [o.vectorSource(), o.shaderSourceTexture2D()]
                },
                textures: function() {
                    return {
                        weather_data: o.vectorTexture(n, {
                            hash: e,
                            TEXTURE_MIN_FILTER: i.NEAREST,
                            TEXTURE_MAG_FILTER: i.NEAREST
                        })
                    }
                },
                uniforms: function() {
                    return {
                        u_Data: "weather_data"
                    }
                }
            }
        }, r
    }

    function hu(t, n) {
        var e = d.a(n, 1e3);

        function r(e) {
            var r = t.closest4(e),
                i = r[0];
            if (i == i) {
                var o = r[1],
                    a = r[2],
                    u = r[3],
                    c = r[4],
                    l = r[5],
                    s = 1 - c,
                    f = 1 - l,
                    h = n[i],
                    d = n[o],
                    p = n[a],
                    v = n[u];
                if (h < 7e37) {
                    if (d < 7e37 && p < 7e37 && v < 7e37) return h * (s * f) + d * (c * f) + p * (s * l) + v * (c * l);
                    if (v < 7e37 && d < 7e37 && c >= l) return d + s * (h - d) + l * (v - d);
                    if (p < 7e37 && v < 7e37 && c < l) return p + c * (v - p) + f * (h - p);
                    if (p < 7e37 && d < 7e37 && c <= f) return h + c * (d - h) + l * (p - h)
                } else if (v < 7e37 && p < 7e37 && d < 7e37 && c > f) return v + s * (p - v) + f * (d - v)
            }
            return 7e37
        }
        return r.webgl = function(r) {
            var i = r.context,
                o = lu(r, t.dimensions()),
                a = t.dimensions(),
                u = [a.width, a.height];
            return {
                shaderSource: function() {
                    return [o.scalarSource(), o.shaderSourceBilinearWrap()]
                },
                textures: function() {
                    return {
                        weather_data: o.scalarTexture(n, {
                            hash: e,
                            TEXTURE_MIN_FILTER: i.NEAREST,
                            TEXTURE_MAG_FILTER: i.NEAREST
                        })
                    }
                },
                uniforms: function() {
                    var t = {
                        u_Data: "weather_data"
                    };
                    return t.u_TextureSize = u, t
                }
            }
        }, r
    }

    function du(t, n) {
        var e = d.a(n, 1e3);

        function r(t, n, e, r, i, o, a, u) {
            var c = e + t * (a - e) + n * (i - e),
                l = r + t * (u - r) + n * (o - r);
            return [c, l, Math.sqrt(c * c + l * l)]
        }

        function i(e) {
            var i = t.closest4(e),
                o = 2 * i[0];
            if (o == o) {
                var a = 2 * i[1],
                    u = 2 * i[2],
                    c = 2 * i[3],
                    l = i[4],
                    s = i[5],
                    f = 1 - l,
                    h = 1 - s,
                    d = n[o],
                    p = n[o + 1],
                    v = n[a],
                    m = n[a + 1],
                    y = n[u],
                    g = n[u + 1],
                    b = n[c],
                    w = n[c + 1];
                if (p < 7e37) {
                    if (m < 7e37 && g < 7e37 && w < 7e37) {
                        var _ = f * h,
                            x = l * h,
                            T = f * s,
                            k = l * s,
                            M = d * _ + v * x + y * T + b * k,
                            E = p * _ + m * x + g * T + w * k;
                        return [M, E, Math.sqrt(M * M + E * E)]
                    }
                    if (w < 7e37 && m < 7e37 && l >= s) return r(f, s, v, m, b, w, d, p);
                    if (g < 7e37 && w < 7e37 && l < s) return r(l, h, y, g, d, p, b, w);
                    if (g < 7e37 && m < 7e37 && l <= h) return r(l, s, d, p, y, g, v, m)
                } else if (w < 7e37 && g < 7e37 && m < 7e37 && l > h) return r(f, h, b, w, v, m, y, g)
            }
            return [7e37, 7e37, 7e37]
        }
        return i.webgl = function(r) {
            var i = r.context,
                o = lu(r, t.dimensions()),
                a = t.dimensions(),
                u = [a.width, a.height];
            return {
                shaderSource: function() {
                    return [o.vectorSource(), o.shaderSourceBilinearWrap()]
                },
                textures: function() {
                    return {
                        weather_data: o.vectorTexture(n, {
                            hash: e,
                            TEXTURE_MIN_FILTER: i.NEAREST,
                            TEXTURE_MAG_FILTER: i.NEAREST
                        })
                    }
                },
                uniforms: function() {
                    var t = {
                        u_Data: "weather_data"
                    };
                    return t.u_TextureSize = u, t
                }
            }
        }, i
    }
    var pu = function(t, n, e, r, i) {
        Array.isArray(t) && (t = eu(t, r)), t.blocks || (t = function(t, n) {
            var e = t.variables,
                r = [];
            return Object.keys(e).forEach(function(t) {
                if (n.test(t)) {
                    var i = e[t];
                    r.push(new Float32Array(i.data)), i.data = {
                        block: r.length - 1
                    }
                }
            }), {
                header: t,
                blocks: r
            }
        }(t, n));
        var o = t,
            u = o.header.variables,
            c = u[a.find(Object.keys(u), function(t) {
                return n.test(t)
            })],
            l = c.dimensions,
            s = u[l[0]],
            f = u[a.last(l, 2)[0]],
            h = u[a.last(l, 2)[1]],
            d = o.blocks[c.data.block];
        a.isFunction(i) && i(d);
        var p = iu(h.sequence, f.sequence),
            v = {
                type: "scalar",
                valueAt: function(t) {
                    return d[t]
                },
                nearest: su(p, d),
                bilinear: hu(p, d)
            };
        return {
            sourceHTML: e,
            date: function() {
                return wr.f(s.data[0])
            },
            grid: function() {
                return p
            },
            field: function() {
                return v
            },
            interpolate: function(t) {
                return v.bilinear(t)
            }
        }
    };

    function vu(t) {
        for (var n = [], e = 0; e < t.length;) {
            var r = t[e++];
            switch (r >> 4) {
                case 12:
                case 13:
                    r = (31 & r) << 6 | 63 & t[e++];
                    break;
                case 14:
                    r = (15 & r) << 12 | (63 & t[e++]) << 6 | 63 & t[e++]
            }
            n.push(r)
        }
        return String.fromCharCode.apply(null, n)
    }

    function mu(t, n, e, r, i) {
        var o = new Float32Array(n * e * r);
        return function(t, n) {
                for (var e = 0, r = 0; e < n.length;) {
                    var i = n[e++];
                    if (i < 128) i = i << 25 >> 25;
                    else switch (i >> 4) {
                        case 8:
                        case 9:
                        case 10:
                        case 11:
                            i = i << 26 >> 18 | n[e++];
                            break;
                        case 12:
                        case 13:
                            i = i << 27 >> 11 | n[e++] << 8 | n[e++];
                            break;
                        case 14:
                            i = i << 28 >> 4 | n[e++] << 16 | n[e++] << 8 | n[e++];
                            break;
                        case 15:
                            if (255 === i) {
                                for (var o = 1 + n[e++]; o > 0; o--) t[r++] = NaN;
                                continue
                            }
                            i = n[e++] << 24 | n[e++] << 16 | n[e++] << 8 | n[e++]
                    }
                    t[r++] = i
                }
            }(o, t),
            function(t, n, e, r) {
                var i, o, a, u, c, l, s;
                for (a = 0; a < r; a++) {
                    for (l = a * n * e, i = 1; i < n; i++) s = t[(u = l + i) - 1], t[u] += s == s ? s : 0;
                    for (o = 1; o < e; o++)
                        for (s = t[(c = l + o * n) - n], t[c] += s == s ? s : 0, i = 1; i < n; i++) {
                            var f = t[(u = c + i) - 1],
                                h = t[u - n],
                                d = t[u - n - 1];
                            s = f + h - d, t[u] += s == s ? s : f == f ? f : h == h ? h : d == d ? d : 0
                        }
                }
            }(o, n, e, r),
            function(t, n) {
                for (var e = Math.pow(10, n), r = 0; r < t.length; r++) {
                    var i = t[r];
                    t[r] = i == i ? i / e : 7e37
                }
            }(o, i), o
    }

    function yu(t, n, e, r) {
        var i = new DataView(n, e, r),
            o = new Uint8Array(n, e + 16, r - 16),
            a = i.getInt32(0),
            u = i.getInt32(4),
            c = i.getInt32(8),
            l = i.getFloat32(12);
        return {
            metadata: {
                type: t,
                cols: a,
                rows: u,
                grids: c,
                scaleFactor: l
            },
            values: mu(o, a, u, c, l)
        }
    }
    var gu = function(t) {
            var n = t.Conventions,
                e = (t.title, t.institution, t.source),
                r = (t.references, t.units, t.date),
                i = (t.init, t.encoding);
            if ("earth.nullschool.net/flat-1.0" !== n) throw new Error("Unsupported data conventions: ".concat(a.escape(n)));
            var u = {
                    start: +t.lon.start,
                    delta: +t.lon.delta,
                    size: Object(o.a)(+t.lon.size, 0, 8192)
                },
                c = {
                    start: +t.lat.start,
                    delta: +t.lat.delta,
                    size: Object(o.a)(+t.lat.size, 0, 8192)
                },
                l = Array.isArray(t.data) ? t.data : [],
                s = function(t) {
                    return t
                };
            if (i) switch (i.type) {
                case "packed_delta_rle":
                    var f = i.scale_factor,
                        h = void 0 === f ? 1 : f,
                        d = i.add_offset,
                        p = void 0 === d ? 0 : d;
                    s = function(t) {
                        return function(t, n, e, r) {
                            for (var i = new Float32Array(r), a = 0, u = 0, c = 0; u < t.length && a < r; u++) {
                                var l = t[u],
                                    s = Array.isArray(l),
                                    f = s ? l[0] : l,
                                    h = s ? Object(o.a)(+l[1] + a, a, r) : a + 1,
                                    d = +f;
                                if (null === f || d != d) {
                                    if (!(a < h)) continue;
                                    for (; a < h;) i[a++] = 7e37;
                                    c = 0
                                } else
                                    for (; a < h;) {
                                        var p = (c += d) * n + e;
                                        i[a++] = p == p ? p : 7e37
                                    }
                            }
                            for (; a < r;) i[a++] = 7e37;
                            return i
                        }(t, +h, +p, u.size)
                    };
                    break;
                default:
                    throw new Error("Unsupported encoding: ".concat(a.escape(i.type)))
            }
            var v = new Float32Array(u.size * c.size),
                m = 0;
            l.filter(Array.isArray).forEach(function(t) {
                var n = s(t);
                v.set(n, m), m += n.length
            });
            var y = iu(u, c),
                g = {
                    type: "scalar",
                    valueAt: function(t) {
                        return v[t]
                    },
                    nearest: su(y, v),
                    bilinear: hu(y, v)
                };
            return {
                sourceHTML: a.escape(e),
                date: function() {
                    return wr.f(r)
                },
                grid: function() {
                    return y
                },
                field: function() {
                    return g
                },
                interpolate: function(t) {
                    return g.bilinear(t)
                }
            }
        },
        bu = d.u() ? "" : " [<a href='about.html#co2' class='internal-link'>important note</a>]",
        wu = "CAMS / Copernicus / EC + ECMWF",
        _u = "GEOS-5 / GMAO / NASA",
        xu = "GEOS-5 / GMAO / NASA" + bu,
        Tu = "GFS / NCEP / US National Weather Service",
        ku = "RTG-SST / NCEP / US National Weather Service",
        Mu = "WAVEWATCH III / NCEP / NWS",
        Eu = function(t, n) {
            var e, r, i, o, a = h("beforesend", "progress", "load", "error"),
                u = Va(),
                c = new XMLHttpRequest,
                l = null,
                s = null,
                f = 0;

            function d(t) {
                var n, r = c.status;
                if (!r && function(t) {
                        var n = t.responseType;
                        return n && "text" !== n ? t.response : t.responseText
                    }(c) || r >= 200 && r < 300 || 304 === r) {
                    if (i) try {
                        n = i.call(e, c)
                    } catch (t) {
                        return void a.call("error", e, t)
                    } else n = c;
                    a.call("load", e, n)
                } else a.call("error", e, t)
            }
            if ("undefined" == typeof XDomainRequest || "withCredentials" in c || !/^(http(s)?:)?\/\//.test(t) || (c = new XDomainRequest), "onload" in c ? c.onload = c.onerror = c.ontimeout = d : c.onreadystatechange = function(t) {
                    c.readyState > 3 && d(t)
                }, c.onprogress = function(t) {
                    a.call("progress", e, t)
                }, e = {
                    header: function(t, n) {
                        return t = (t + "").toLowerCase(), arguments.length < 2 ? u.get(t) : (null == n ? u.remove(t) : u.set(t, n + ""), e)
                    },
                    mimeType: function(t) {
                        return arguments.length ? (r = null == t ? null : t + "", e) : r
                    },
                    responseType: function(t) {
                        return arguments.length ? (o = t, e) : o
                    },
                    timeout: function(t) {
                        return arguments.length ? (f = +t, e) : f
                    },
                    user: function(t) {
                        return arguments.length < 1 ? l : (l = null == t ? null : t + "", e)
                    },
                    password: function(t) {
                        return arguments.length < 1 ? s : (s = null == t ? null : t + "", e)
                    },
                    response: function(t) {
                        return i = t, e
                    },
                    get: function(t, n) {
                        return e.send("GET", t, n)
                    },
                    post: function(t, n) {
                        return e.send("POST", t, n)
                    },
                    send: function(n, i, h) {
                        return c.open(n, t, !0, l, s), null == r || u.has("accept") || u.set("accept", r + ",*/*"), c.setRequestHeader && u.each(function(t, n) {
                            c.setRequestHeader(n, t)
                        }), null != r && c.overrideMimeType && c.overrideMimeType(r), null != o && (c.responseType = o), f > 0 && (c.timeout = f), null == h && "function" == typeof i && (h = i, i = null), null != h && 1 === h.length && (h = function(t) {
                            return function(n, e) {
                                t(null == n ? e : null)
                            }
                        }(h)), null != h && e.on("error", h).on("load", function(t) {
                            h(null, t)
                        }), a.call("beforesend", e, c), c.send(null == i ? null : i), e
                    },
                    abort: function() {
                        return c.abort(), e
                    },
                    on: function() {
                        var t = a.on.apply(a, arguments);
                        return t === a ? e : t
                    }
                }, null != n) {
                if ("function" != typeof n) throw new Error("invalid callback: " + n);
                return e.get(n)
            }
            return e
        };
    var Su, Au, ju = (Su = "application/json", Au = function(t) {
        return JSON.parse(t.responseText)
    }, function(t, n) {
        var e = Eu(t).mimeType(Su).response(Au);
        if (null != n) {
            if ("function" != typeof n) throw new Error("invalid callback: " + n);
            return e.get(n)
        }
        return e
    });

    function Nu(t, n, e, r, i) {
        var o = (r || {}).target;
        return o ? o.status ? e({
            status: o.status,
            message: o.statusText,
            resource: t,
            error: r
        }) : e({
            status: -1,
            message: "Cannot load ".concat(t, ": ").concat(r),
            resource: t,
            error: r
        }) : n(i)
    }

    function Ou(t) {
        return new Promise(function(n, e) {
            ju(t, function(r, i) {
                return Nu(t, n, e, r, i)
            })
        })
    }
    var Pu = a.memoize(Ou);

    function Ru(t) {
        return new Promise(function(n, e) {
            Eu(t).responseType("arraybuffer").response(function(t) {
                return function(t, n) {
                    var e = !!(n || {}).headerOnly,
                        r = 0,
                        i = new DataView(t),
                        o = vu(new Uint8Array(t, r, 4));
                    if (r += 4, "head" !== o) throw new Error("expected 'head' but found '" + o + "'");
                    var a = i.getInt32(r);
                    r += 4;
                    var u, c = JSON.parse(vu(new Uint8Array(t, r, a)));
                    r += a;
                    for (var l, s = [], f = [];
                        "tail" !== (l = vu(new Uint8Array(t, r, 4))) && !e;) {
                        switch (r += 4, a = i.getInt32(r), r += 4, l) {
                            case "ppak":
                            case "ppk2":
                                u = yu(l, t, r, a);
                                break;
                            default:
                                throw new Error("unknown block type: " + l)
                        }
                        s.push(u.values), f.push(u.metadata), r += a
                    }
                    return {
                        header: c,
                        blocks: s,
                        metadata: f
                    }
                }(t.response)
            }).get(function(r, i) {
                return Nu(t, n, e, r, i)
            })
        })
    }

    function Cu(t) {
        return /\.epak([\/?#]|$)/.test(t) ? Ru(t) : Ou(t)
    }

    function Fu(t, n) {
        return Promise.all(t.map(function(t) {
            return function(t, n) {
                var e = t.product,
                    r = t.paths;
                return n.requested ? Promise.resolve([null]) : Promise.all(r.map(Cu)).then(function(t) {
                    return n.requested ? null : Object(d.c)(e, e.builder.apply(e, t))
                })
            }(t, n)
        }))
    }
    var zu = "https://gaia.nullschool.net";

    function Lu(t) {
        var n = (Object(d.p)() ? "" : zu) + t,
            e = Object(d.C)();
        return e ? n + "?" + e : n
    }

    function Iu(t) {
        return Lu("/data/oscar/" + t)
    }

    function Du(t) {
        return Lu("/data/tara/" + t)
    }
    var qu = function(t) {
            Array.isArray(t) && (t = eu(t, ["u", "v"], ["time", "level", "lat", "lon"]));
            var n = t,
                e = n.header.variables,
                r = e.U || e.u || e["u-component_of_wind_isobaric"] || e["u-component_of_wind_height_above_ground"],
                i = e.V || e.v || e["v-component_of_wind_isobaric"] || e["v-component_of_wind_height_above_ground"],
                o = e[r.dimensions[0]],
                a = e[r.dimensions[2]],
                u = e[r.dimensions[3]],
                c = d.y(n.blocks[r.data.block], n.blocks[i.data.block]),
                l = iu(u.sequence, a.sequence),
                s = du(l, c);
            return {
                sourceHTML: Tu,
                date: function() {
                    return wr.f(o.data[0])
                },
                grid: function() {
                    return l
                },
                field: function() {
                    return {
                        type: "vector",
                        valueAt: function(t) {
                            var n = 2 * t,
                                e = c[n],
                                r = c[n + 1];
                            return [e, r, Math.sqrt(e * e + r * r)]
                        },
                        nearest: fu(l, c),
                        bilinear: du(l, c)
                    }
                },
                interpolate: function(t) {
                    return s(t)
                }
            }
        },
        Uu = Math.PI / 180,
        Hu = 180 / Math.PI,
        Gu = .96422,
        Xu = 1,
        Wu = .82521,
        Bu = 4 / 29,
        Vu = 6 / 29,
        $u = 3 * Vu * Vu,
        Yu = Vu * Vu * Vu;

    function Ku(t) {
        if (t instanceof Zu) return new Zu(t.l, t.a, t.b, t.opacity);
        if (t instanceof oc) {
            if (isNaN(t.h)) return new Zu(t.l, 0, 0, t.opacity);
            var n = t.h * Uu;
            return new Zu(t.l, Math.cos(n) * t.c, Math.sin(n) * t.c, t.opacity)
        }
        t instanceof Ut || (t = Dt(t));
        var e, r, i = ec(t.r),
            o = ec(t.g),
            a = ec(t.b),
            u = Qu((.2225045 * i + .7168786 * o + .0606169 * a) / Xu);
        return i === o && o === a ? e = r = u : (e = Qu((.4360747 * i + .3850649 * o + .1430804 * a) / Gu), r = Qu((.0139322 * i + .0971045 * o + .7141733 * a) / Wu)), new Zu(116 * u - 16, 500 * (e - u), 200 * (u - r), t.opacity)
    }

    function Ju(t, n, e, r) {
        return 1 === arguments.length ? Ku(t) : new Zu(t, n, e, null == r ? 1 : r)
    }

    function Zu(t, n, e, r) {
        this.l = +t, this.a = +n, this.b = +e, this.opacity = +r
    }

    function Qu(t) {
        return t > Yu ? Math.pow(t, 1 / 3) : t / $u + Bu
    }

    function tc(t) {
        return t > Vu ? t * t * t : $u * (t - Bu)
    }

    function nc(t) {
        return 255 * (t <= .0031308 ? 12.92 * t : 1.055 * Math.pow(t, 1 / 2.4) - .055)
    }

    function ec(t) {
        return (t /= 255) <= .04045 ? t / 12.92 : Math.pow((t + .055) / 1.055, 2.4)
    }

    function rc(t) {
        if (t instanceof oc) return new oc(t.h, t.c, t.l, t.opacity);
        if (t instanceof Zu || (t = Ku(t)), 0 === t.a && 0 === t.b) return new oc(NaN, 0, t.l, t.opacity);
        var n = Math.atan2(t.b, t.a) * Hu;
        return new oc(n < 0 ? n + 360 : n, Math.sqrt(t.a * t.a + t.b * t.b), t.l, t.opacity)
    }

    function ic(t, n, e, r) {
        return 1 === arguments.length ? rc(t) : new oc(t, n, e, null == r ? 1 : r)
    }

    function oc(t, n, e, r) {
        this.h = +t, this.c = +n, this.l = +e, this.opacity = +r
    }

    function ac(t) {
        return function(n, e) {
            var r = t((n = ic(n)).h, (e = ic(e)).h),
                i = Qt(n.c, e.c),
                o = Qt(n.l, e.l),
                a = Qt(n.opacity, e.opacity);
            return function(t) {
                return n.h = r(t), n.c = i(t), n.l = o(t), n.opacity = a(t), n + ""
            }
        }
    }
    _t(Zu, Ju, xt(Tt, {
        brighter: function(t) {
            return new Zu(this.l + 18 * (null == t ? 1 : t), this.a, this.b, this.opacity)
        },
        darker: function(t) {
            return new Zu(this.l - 18 * (null == t ? 1 : t), this.a, this.b, this.opacity)
        },
        rgb: function() {
            var t = (this.l + 16) / 116,
                n = isNaN(this.a) ? t : t + this.a / 500,
                e = isNaN(this.b) ? t : t - this.b / 200;
            return new Ut(nc(3.1338561 * (n = Gu * tc(n)) - 1.6168667 * (t = Xu * tc(t)) - .4906146 * (e = Wu * tc(e))), nc(-.9787684 * n + 1.9161415 * t + .033454 * e), nc(.0719453 * n - .2289914 * t + 1.4052427 * e), this.opacity)
        }
    })), _t(oc, ic, xt(Tt, {
        brighter: function(t) {
            return new oc(this.h, this.c, this.l + 18 * (null == t ? 1 : t), this.opacity)
        },
        darker: function(t) {
            return new oc(this.h, this.c, this.l - 18 * (null == t ? 1 : t), this.opacity)
        },
        rgb: function() {
            return Ku(this).rgb()
        }
    }));
    var uc = ac(Jt);
    ac(Qt);

    function cc(t) {
        return function(n, e) {
            var r = t((n = Xt(n)).h, (e = Xt(e)).h),
                i = Qt(n.s, e.s),
                o = Qt(n.l, e.l),
                a = Qt(n.opacity, e.opacity);
            return function(t) {
                return n.h = r(t), n.s = i(t), n.l = o(t), n.opacity = a(t), n + ""
            }
        }
    }
    var lc = cc(Jt),
        sc = (cc(Qt), -.29227),
        fc = -.90649,
        hc = 1.97294,
        dc = hc * fc,
        pc = 1.78277 * hc,
        vc = 1.78277 * sc - -.14861 * fc;

    function mc(t, n, e, r) {
        return 1 === arguments.length ? function(t) {
            if (t instanceof yc) return new yc(t.h, t.s, t.l, t.opacity);
            t instanceof Ut || (t = Dt(t));
            var n = t.r / 255,
                e = t.g / 255,
                r = t.b / 255,
                i = (vc * r + dc * n - pc * e) / (vc + dc - pc),
                o = r - i,
                a = (hc * (e - i) - sc * o) / fc,
                u = Math.sqrt(a * a + o * o) / (hc * i * (1 - i)),
                c = u ? Math.atan2(a, o) * Hu - 120 : NaN;
            return new yc(c < 0 ? c + 360 : c, u, i, t.opacity)
        }(t) : new yc(t, n, e, null == r ? 1 : r)
    }

    function yc(t, n, e, r) {
        this.h = +t, this.s = +n, this.l = +e, this.opacity = +r
    }

    function gc(t) {
        return function n(e) {
            function r(n, r) {
                var i = t((n = mc(n)).h, (r = mc(r)).h),
                    o = Qt(n.s, r.s),
                    a = Qt(n.l, r.l),
                    u = Qt(n.opacity, r.opacity);
                return function(t) {
                    return n.h = i(t), n.s = o(t), n.l = a(Math.pow(t, e)), n.opacity = u(t), n + ""
                }
            }
            return e = +e, r.gamma = n, r
        }(1)
    }
    _t(yc, mc, xt(Tt, {
        brighter: function(t) {
            return t = null == t ? 1 / .7 : Math.pow(1 / .7, t), new yc(this.h, this.s, this.l * t, this.opacity)
        },
        darker: function(t) {
            return t = null == t ? .7 : Math.pow(.7, t), new yc(this.h, this.s, this.l * t, this.opacity)
        },
        rgb: function() {
            var t = isNaN(this.h) ? 0 : (this.h + 120) * Uu,
                n = +this.l,
                e = isNaN(this.s) ? 0 : this.s * n * (1 - n),
                r = Math.cos(t),
                i = Math.sin(t);
            return new Ut(255 * (n + e * (-.14861 * r + 1.78277 * i)), 255 * (n + e * (sc * r + fc * i)), 255 * (n + e * (hc * r)), this.opacity)
        }
    }));
    gc(Jt);
    var bc = gc(Qt)(mc(300, .5, 0), mc(-240, .5, 1)),
        wc = e(37),
        _c = e(38),
        xc = e(39);

    function Tc(t, n) {
        for (var e = 0; e < n.length; e++) {
            var r = n[e];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
        }
    }

    function kc(t) {
        return function(t) {
            if (Array.isArray(t)) {
                for (var n = 0, e = new Array(t.length); n < t.length; n++) e[n] = t[n];
                return e
            }
        }(t) || function(t) {
            if (Symbol.iterator in Object(t) || "[object Arguments]" === Object.prototype.toString.call(t)) return Array.from(t)
        }(t) || function() {
            throw new TypeError("Invalid attempt to spread non-iterable instance")
        }()
    }

    function Mc(t, n) {
        return function(t) {
            if (Array.isArray(t)) return t
        }(t) || function(t, n) {
            var e = [],
                r = !0,
                i = !1,
                o = void 0;
            try {
                for (var a, u = t[Symbol.iterator](); !(r = (a = u.next()).done) && (e.push(a.value), !n || e.length !== n); r = !0);
            } catch (t) {
                i = !0, o = t
            } finally {
                try {
                    r || null == u.return || u.return()
                } finally {
                    if (i) throw o
                }
            }
            return e
        }(t, n) || function() {
            throw new TypeError("Invalid attempt to destructure non-iterable instance")
        }()
    }

    function Ec(t) {
        if (Array.isArray(t)) {
            var n = Mc(t, 4);
            return qt(n[0], n[1], n[2], n[3])
        }
        return zt(t)
    }

    function Sc(t, n) {
        var e = Mc(t, 3),
            r = e[0],
            i = e[1],
            a = e[2],
            u = n[0] - r,
            c = n[1] - i,
            l = n[2] - a;
        return function(t) {
            return [Math.floor(r + t * u), Math.floor(i + t * c), Math.floor(a + t * l)].map(function(t) {
                return Object(o.a)(t, 0, 255)
            })
        }
    }

    function Ac(t, n, e) {
        switch (t) {
            case "rgb":
                return tn(n, e);
            case "lab":
                return function(t, n) {
                    var e = Qt((t = Ju(t)).l, (n = Ju(n)).l),
                        r = Qt(t.a, n.a),
                        i = Qt(t.b, n.b),
                        o = Qt(t.opacity, n.opacity);
                    return function(n) {
                        return t.l = e(n), t.a = r(n), t.b = i(n), t.opacity = o(n), t + ""
                    }
                }(n, e);
            case "hcl":
                return uc(n, e);
            case "hsl":
                return lc(n, e);
            default:
                throw new Error("unsupported color space: ".concat(t))
        }
    }

    function jc(t, n) {
        var e = Ac(t.mode, Ec(t.color), Ec(n.color));
        return e.domain = function() {
            return [t.p, n.p]
        }, e.mode = function() {
            return t.mode
        }, e
    }

    function Nc(t) {
        var n = t * i.e * 5 / 6;
        n *= .75;
        var e = Math.sin(n),
            r = Math.cos(n);
        return [Math.floor(255 * Math.max(0, -r)), Math.floor(255 * Math.max(e, 0)), Math.floor(255 * Math.max(r, 0, -e))]
    }
    var Oc = .45,
        Pc = Sc(Nc(1), [255, 255, 255]);

    function Rc(t) {
        return t <= Oc ? Nc(t / Oc) : Pc((t - Oc) / (1 - Oc))
    }

    function Cc(t) {
        for (var n = [], e = 0; e < t.length - 1; e++) n.push(jc(t[e], t[e + 1]));
        return n
    }

    function Fc(t, n, e) {
        var r = t[n],
            i = t[n + 1],
            a = o.e.apply(void 0, [e[0]].concat(kc(r.domain()))),
            u = o.e.apply(void 0, [e[1]].concat(kc(i.domain()))),
            c = jc({
                color: zt(r(0)),
                mode: r.mode(),
                p: r.domain()[0]
            }, {
                color: zt(r(a)),
                mode: r.mode(),
                p: e[0]
            }),
            l = function(t, n) {
                for (var e = [], r = [], i = [], o = 0; o < t.length; o++) {
                    var a = Ju(t[o]);
                    e[o] = a.l, r[o] = a.a, i[o] = a.b
                }
                var u = $t(e),
                    c = $t(r),
                    l = $t(i),
                    s = function(t) {
                        return Ju(u(t), c(t), l(t)) + ""
                    };
                return s.domain = function() {
                    return n
                }, s.mode = function() {
                    return "lab"
                }, s
            }([r(a), r(1), i(u)], e),
            s = jc({
                color: zt(i(u)),
                mode: i.mode(),
                p: e[1]
            }, {
                color: zt(i(1)),
                mode: i.mode(),
                p: i.domain()[1]
            });
        return [].concat(t.slice(0, n), [c, l, s], t.slice(n + 2))
    }

    function zc(t, n, e, r) {
        for (var i = Mc(n, 2), a = i[0], u = i[1], c = Mc(e, 2), l = c[0], s = c[1], f = Math.floor(t.length / 4), h = (u - a) / (f - 1), d = Object(o.f)((l - a) / h), p = Math.max(d, 0); p < f; p++) {
            var v = l + (p - d) * h;
            if (v > s) break;
            var m = r(v),
                y = 4 * p;
            t[y] = m[0], t[y + 1] = m[1], t[y + 2] = m[2], t[y + 3] = m.length > 3 ? Object(o.a)(Object(o.h)(m[3], 0, 255), 0, 255) : 255
        }
    }

    function Lc(t, n, e) {
        var r = new Uint8Array(4 * e);
        return n.forEach(function(n) {
            var e = n.domain();
            zc(r, t, e, function(t) {
                var r = zt(n(o.e.apply(void 0, [t].concat(kc(e)))));
                return [r.r, r.g, r.b, r.opacity]
            })
        }), r
    }

    function Ic(t, n, e) {
        return qc(t, Lc(t, n, e))
    }

    function Dc(t, n, e) {
        var r = function(t) {
                for (var n = [], e = [], r = [], i = 0; i < t.length - 1; i++) n.push(t[i + 1][0]), e.push(Sc(t[i][1], t[i + 1][1])), r.push([t[i][0], t[i + 1][0]]);
                return function(t) {
                    var i;
                    for (i = 0; i < n.length - 1 && !(t <= n[i]); i++);
                    var a = o.e.apply(void 0, [t].concat(kc(r[i])));
                    return e[i](a)
                }
            }(n),
            i = new Uint8Array(4 * e);
        return zc(i, t, t, r), qc(t, i)
    }

    function qc(t, n) {
        var e = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : function(t) {
                return t
            },
            r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : function(t) {
                return t
            },
            i = e(t[0]),
            a = e(t[1]),
            u = n.length / 4 - 1,
            c = u / (a - i),
            l = d.a(n, 1e3),
            s = (a - i) / (2 * u),
            f = i - s,
            h = [f, a + s - f];
        return new(function() {
            function a() {
                ! function(t, n) {
                    if (!(t instanceof n)) throw new TypeError("Cannot call a class as a function")
                }(this, a)
            }
            var s, f, d;
            return s = a, (f = [{
                key: "indexOf",
                value: function(t) {
                    var n = Math.round((e(t) - i) * c);
                    return Object(o.a)(n, 0, u)
                }
            }, {
                key: "valueFor",
                value: function(t) {
                    return r(t / c + i)
                }
            }, {
                key: "rgba",
                value: function(t) {
                    var e = 4 * this.indexOf(t);
                    return [n[e], n[e + 1], n[e + 2], n[e + 3]]
                }
            }, {
                key: "webgl",
                value: function(t) {
                    var r = t.context;
                    return {
                        shaderSource: function() {
                            return [e === Math.log ? wc : _c, xc]
                        },
                        textures: function() {
                            return {
                                color_scale: {
                                    format: r.RGBA,
                                    type: r.UNSIGNED_BYTE,
                                    width: n.length / 4,
                                    height: 1,
                                    data: n,
                                    hash: l
                                }
                            }
                        },
                        uniforms: function() {
                            return {
                                u_Range: h,
                                u_Palette: "color_scale",
                                u_Alpha: 1
                            }
                        }
                    }
                }
            }, {
                key: "colors",
                get: function() {
                    return n
                }
            }, {
                key: "bounds",
                get: function() {
                    return t
                }
            }]) && Tc(s.prototype, f), d && Tc(s, d), a
        }())
    }
    var Uc = function(t) {
            for (var n = new Uint8Array(t.length / 3 * 4), e = 0, r = 0; e < t.length; e += 3, r += 4) n[r] = t[e], n[r + 1] = t[e + 1], n[r + 2] = t[e + 2], n[r + 3] = 255;
            return n
        }([4, 4, 4, 10, 3, 8, 13, 4, 11, 16, 5, 14, 18, 5, 16, 21, 6, 18, 22, 7, 19, 24, 8, 21, 26, 8, 22, 27, 9, 24, 28, 10, 25, 30, 11, 26, 31, 12, 27, 32, 12, 28, 33, 13, 29, 35, 14, 31, 36, 14, 32, 37, 15, 32, 38, 15, 33, 39, 16, 34, 40, 17, 35, 41, 17, 36, 42, 18, 38, 43, 19, 38, 44, 19, 39, 46, 20, 41, 46, 20, 45, 46, 21, 50, 45, 21, 55, 45, 21, 60, 45, 22, 64, 45, 23, 67, 45, 23, 71, 45, 24, 75, 45, 24, 77, 45, 25, 81, 45, 25, 84, 44, 26, 87, 44, 27, 90, 45, 27, 92, 45, 28, 95, 44, 29, 98, 44, 29, 100, 44, 30, 103, 44, 31, 106, 44, 31, 109, 44, 32, 110, 44, 33, 113, 44, 34, 116, 43, 34, 118, 42, 35, 121, 40, 38, 120, 38, 40, 119, 36, 42, 120, 34, 44, 120, 33, 46, 120, 32, 47, 120, 31, 49, 121, 30, 50, 122, 30, 51, 123, 29, 52, 123, 29, 53, 125, 28, 55, 125, 28, 56, 126, 27, 57, 127, 28, 58, 128, 28, 59, 129, 27, 60, 129, 27, 61, 131, 27, 62, 132, 27, 63, 133, 28, 64, 134, 27, 65, 135, 27, 66, 136, 27, 68, 137, 27, 69, 138, 25, 71, 136, 22, 73, 134, 21, 74, 133, 20, 76, 131, 17, 78, 129, 16, 79, 128, 15, 81, 126, 14, 82, 125, 10, 84, 123, 10, 85, 122, 9, 87, 120, 8, 88, 119, 7, 89, 118, 6, 91, 117, 4, 92, 115, 4, 94, 114, 4, 95, 114, 3, 96, 112, 1, 98, 111, 1, 99, 110, 0, 100, 109, 0, 101, 108, 0, 103, 107, 0, 104, 106, 0, 105, 105, 0, 107, 104, 0, 108, 101, 0, 110, 100, 0, 111, 99, 0, 112, 98, 0, 114, 96, 0, 115, 95, 0, 116, 93, 0, 118, 92, 0, 119, 90, 0, 120, 89, 0, 121, 88, 0, 123, 86, 0, 124, 85, 0, 125, 83, 0, 127, 82, 0, 128, 80, 0, 129, 79, 0, 131, 77, 0, 132, 75, 0, 133, 73, 0, 134, 72, 0, 136, 70, 0, 137, 68, 0, 138, 66, 0, 139, 65, 0, 141, 64, 0, 142, 63, 0, 143, 61, 0, 145, 60, 0, 146, 60, 0, 147, 58, 0, 149, 57, 0, 150, 56, 0, 151, 55, 0, 153, 53, 0, 154, 52, 0, 155, 51, 0, 157, 50, 0, 158, 48, 0, 159, 47, 0, 160, 45, 0, 162, 44, 0, 163, 42, 0, 164, 41, 0, 165, 39, 0, 167, 36, 0, 168, 34, 0, 169, 31, 0, 170, 23, 0, 169, 8, 9, 170, 0, 20, 171, 0, 29, 172, 0, 35, 173, 0, 40, 174, 0, 45, 175, 0, 48, 176, 0, 52, 177, 0, 55, 178, 0, 59, 179, 0, 61, 180, 0, 64, 181, 0, 66, 182, 0, 68, 183, 0, 71, 184, 0, 73, 185, 0, 76, 186, 0, 78, 187, 0, 79, 188, 0, 81, 189, 0, 83, 190, 0, 85, 191, 0, 87, 192, 0, 92, 193, 0, 99, 193, 0, 106, 193, 0, 114, 193, 0, 119, 194, 0, 125, 194, 0, 130, 194, 0, 135, 195, 0, 140, 195, 0, 145, 195, 0, 149, 196, 0, 153, 196, 0, 157, 197, 0, 161, 197, 0, 165, 197, 0, 169, 198, 0, 172, 198, 0, 176, 199, 0, 180, 199, 0, 184, 199, 0, 186, 200, 0, 190, 201, 0, 193, 201, 0, 197, 201, 0, 200, 202, 0, 201, 201, 24, 203, 202, 51, 206, 202, 65, 207, 203, 77, 209, 203, 87, 212, 203, 95, 213, 204, 103, 215, 205, 109, 218, 205, 116, 219, 206, 121, 221, 207, 127, 223, 207, 132, 226, 207, 138, 227, 208, 143, 229, 209, 147, 231, 209, 151, 232, 210, 155, 235, 211, 159, 237, 211, 164, 238, 212, 168, 240, 212, 172, 243, 213, 175, 243, 214, 179, 245, 214, 183, 248, 215, 186, 248, 216, 189, 248, 218, 193, 247, 219, 195, 247, 220, 198, 247, 222, 201, 248, 223, 204, 247, 224, 206, 247, 226, 209, 247, 227, 211, 247, 229, 214, 247, 230, 216, 247, 231, 218, 247, 232, 220, 248, 234, 224, 247, 235, 225, 247, 236, 229, 247, 238, 231, 247, 239, 232, 248, 240, 235, 248, 242, 237, 247, 243, 239, 248, 244, 241, 248, 246, 244, 248, 247, 246, 248, 248, 248, 249, 249, 249, 251, 251, 251, 252, 252, 252, 253, 253, 253, 254, 254, 254, 255, 255, 255]),
        Hc = a.memoize(function() {
            return Dc([0, 1.5], [
                [0, [0, 0, 0]],
                [1.5, [255, 255, 255]]
            ], arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 10)
        }),
        Gc = a.memoize(function() {
            var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1e3,
                n = [0, 100],
                e = Cc([{
                    color: [0, 0, 0],
                    mode: "lab",
                    p: n[0]
                }, {
                    color: [4, 8, 34],
                    mode: "lab",
                    p: 5
                }, {
                    color: [78, 255, 103],
                    mode: "lab",
                    p: 40
                }, {
                    color: [252, 255, 57],
                    mode: "lab",
                    p: 60
                }, {
                    color: [219, 75, 255],
                    mode: "lab",
                    p: n[1]
                }]);
            return e = Fc(e, 1, [35, 45]), Ic(n, e = Fc(e, 3, [55, 65]), t)
        }),
        Xc = a.memoize(function() {
            return Dc([0, 5e3], [
                [0, [5, 48, 97]],
                [500, [33, 102, 172]],
                [1e3, [67, 147, 195]],
                [1500, [146, 197, 222]],
                [2e3, [209, 229, 240]],
                [2500, [247, 247, 247]],
                [3e3, [253, 219, 199]],
                [3500, [244, 165, 130]],
                [4e3, [214, 96, 77]],
                [4500, [178, 24, 43]],
                [5e3, [103, 0, 31]]
            ], arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1e3)
        }),
        Wc = a.memoize(function() {
            var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1e3,
                n = [3578e-7, 377e-6],
                e = Cc([{
                    color: [0, 0, 0],
                    mode: "hcl",
                    p: n[0]
                }, {
                    color: [100, 0, 0],
                    mode: "hcl",
                    p: 365e-6
                }, {
                    color: [164, 36, 0],
                    mode: "hcl",
                    p: 3675e-7
                }, {
                    color: [255, 220, 140],
                    mode: "hcl",
                    p: 371e-6
                }, {
                    color: [255, 255, 255],
                    mode: "hcl",
                    p: n[1]
                }]);
            return Ic(n, e = Fc(e, 2, [37e-5, 372e-6]), t)
        }),
        Bc = a.memoize(function(t) {
            var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1e3,
                e = [360 + t, 470 + t],
                r = [{
                    color: [0, 0, 0],
                    mode: "hcl",
                    p: e[0]
                }, {
                    color: [100, 0, 0],
                    mode: "hcl",
                    p: 400 + t
                }, {
                    color: [164, 36, 0],
                    mode: "hcl",
                    p: 405 + t
                }, {
                    color: [255, 220, 140],
                    mode: "hcl",
                    p: 420 + t
                }, {
                    color: [255, 255, 255],
                    mode: "hcl",
                    p: 450 + t
                }, {
                    color: [0, 210, 255],
                    mode: "hcl",
                    p: e[1]
                }],
                i = r[3].p,
                o = r[4].p,
                a = r[1].p,
                u = Cc(r);
            return u = Fc(u, 0, [a - 2, a + 2]), u = Fc(u, 3, [i - 2, i + 2]), Ic(e, u = Fc(u, 5, [o - 2, o + 2]), n)
        }),
        Vc = a.memoize(function() {
            var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 2e3,
                n = [40, 2500],
                e = Cc([{
                    color: [0, 38, 40],
                    mode: "lab",
                    p: n[0]
                }, {
                    color: [255, 255, 224],
                    mode: "hcl",
                    p: 400
                }, {
                    color: [0, 0, 154],
                    mode: "lab",
                    p: 1800
                }, {
                    color: [0, 0, 0],
                    mode: "lab",
                    p: n[1]
                }]);
            return e = Fc(e, 0, [340, 460]), Ic(n, e = Fc(e, 2, [1500, 2100]), t)
        }),
        $c = a.memoize(function() {
            return Dc([0, 1.5], [
                [0, [10, 25, 68]],
                [.15, [10, 25, 250]],
                [.4, [24, 255, 93]],
                [.65, [255, 233, 102]],
                [1, [255, 233, 15]],
                [1.5, [255, 15, 15]]
            ], arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1e3)
        }),
        Yc = a.memoize(function() {
            return qc([1e-4, 3], Uc, Math.log, Math.exp)
        }),
        Kc = a.memoize(function() {
            return Dc([0, 15], [
                [0, [8, 29, 88]],
                [1, [37, 52, 148]],
                [2, [34, 94, 168]],
                [3, [29, 145, 192]],
                [4, [65, 182, 196]],
                [5, [127, 205, 187]],
                [6, [199, 233, 180]],
                [7, [237, 248, 177]],
                [8, [254, 204, 92]],
                [10, [253, 141, 60]],
                [12, [240, 59, 32]],
                [14, [189, 0, 38]]
            ], arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1e3)
        }),
        Jc = a.memoize(function() {
            return Dc([236, 332], [
                [241, [255, 255, 255]],
                [245.5, [6, 82, 255]],
                [250, [6, 82, 255]],
                [258, [46, 131, 255]],
                [266, [46, 131, 255]],
                [280, [0, 0, 0]],
                [300, [0, 0, 0]],
                [305, [247, 20, 35]],
                [309.5, [247, 20, 35]],
                [314, [245, 210, 5]],
                [320.5, [245, 210, 5]],
                [327, [255, 255, 255]]
            ], arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1e3)
        }),
        Zc = a.memoize(function() {
            return Dc([92e3, 105e3], [
                [92e3, [40, 0, 0]],
                [95e3, [187, 60, 31]],
                [96500, [137, 32, 30]],
                [98e3, [16, 1, 43]],
                [100500, [36, 1, 93]],
                [101300, [241, 254, 18]],
                [103e3, [228, 246, 223]],
                [105e3, [255, 255, 255]]
            ], arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1e3)
        }),
        Qc = a.memoize(function() {
            var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1e3,
                n = [1e-9, 1e-6],
                e = n.map(Math.log),
                r = Cc([{
                    color: [8, 29, 88],
                    mode: "hcl",
                    p: e[0]
                }, {
                    color: [37, 52, 148],
                    mode: "hcl",
                    p: Math.log(4e-9)
                }, {
                    color: [34, 94, 168],
                    mode: "hcl",
                    p: Math.log(6e-9)
                }, {
                    color: [29, 145, 192],
                    mode: "hcl",
                    p: Math.log(8e-9)
                }, {
                    color: [65, 182, 196],
                    mode: "hcl",
                    p: Math.log(1e-8)
                }, {
                    color: [127, 205, 187],
                    mode: "hcl",
                    p: Math.log(1.6e-8)
                }, {
                    color: [199, 233, 180],
                    mode: "hcl",
                    p: Math.log(2.4e-8)
                }, {
                    color: [237, 248, 177],
                    mode: "hcl",
                    p: Math.log(2.8e-8)
                }, {
                    color: [255, 255, 210],
                    mode: "hcl",
                    p: Math.log(3.2e-8)
                }, {
                    color: [255, 237, 160],
                    mode: "hcl",
                    p: Math.log(4.2e-8)
                }, {
                    color: [254, 217, 118],
                    mode: "hcl",
                    p: Math.log(4.7e-8)
                }, {
                    color: [254, 178, 76],
                    mode: "hcl",
                    p: Math.log(5.7e-8)
                }, {
                    color: [253, 141, 60],
                    mode: "hcl",
                    p: Math.log(6.7e-8)
                }, {
                    color: [252, 78, 42],
                    mode: "hcl",
                    p: Math.log(1.1e-7)
                }, {
                    color: [227, 26, 28],
                    mode: "hcl",
                    p: Math.log(2.5e-7)
                }, {
                    color: [189, 0, 38],
                    mode: "hcl",
                    p: Math.log(5e-7)
                }, {
                    color: [128, 0, 38],
                    mode: "hcl",
                    p: e[1]
                }]);
            return qc(n, Lc(e, r = Fc(r, 7, [Math.log(3e-8), Math.log(3.5e-8)]), t), Math.log, Math.exp)
        }),
        tl = a.memoize(function() {
            var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 2e3,
                n = [0, 150],
                e = Cc([{
                    color: [37, 79, 92],
                    mode: "hcl",
                    p: n[0]
                }, {
                    color: "aliceblue",
                    mode: "hcl",
                    p: 2
                }, {
                    color: [51, 26, 155],
                    mode: "hcl",
                    p: 15
                }, {
                    color: "gold",
                    mode: "hcl",
                    p: 100
                }, {
                    color: "white",
                    mode: "hcl",
                    p: n[1]
                }]);
            return e = Fc(e, 0, [.6, 3.4]), Ic(n, e = Fc(e, 2, [12, 18]), t)
        }),
        nl = a.memoize(function() {
            return Dc([0, 25], [
                [0, [0, 0, 0]],
                [25, [21, 255, 255]]
            ], arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1e3)
        }),
        el = a.memoize(function() {
            return Dc([0, 100], [
                [0, [230, 165, 30]],
                [25, [120, 100, 95]],
                [60, [40, 44, 92]],
                [75, [21, 13, 193]],
                [90, [75, 63, 235]],
                [100, [25, 255, 255]]
            ], arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1e3)
        }),
        rl = a.memoize(function() {
            var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 400,
                n = [1e-13, 8.88e-7],
                e = n.map(Math.log),
                r = Cc([{
                    color: [134, 134, 107],
                    mode: "hcl",
                    p: e[0]
                }, {
                    color: [144, 144, 117],
                    mode: "hcl",
                    p: Math.log(1e-12)
                }, {
                    color: [255, 255, 224],
                    mode: "hcl",
                    p: Math.log(7e-11)
                }, {
                    color: [0, 0, 128],
                    mode: "lab",
                    p: Math.log(1.9e-7)
                }, {
                    color: [23, 20, 18],
                    mode: "lab",
                    p: e[1]
                }]);
            return r = Fc(r, 1, [Math.log(5e-11), Math.log(9e-11)]), qc(n, Lc(e, r = Fc(r, 3, [Math.log(8e-8), Math.log(4e-7)]), t), Math.log, Math.exp)
        }),
        il = a.memoize(function() {
            return Dc([270, 304.65], [
                [270, [255, 255, 255]],
                [271.25, [255, 255, 255]],
                [271.3, [15, 4, 168]],
                [273.15, [15, 54, 208]],
                [273.25, [15, 54, 188]],
                [275.65, [15, 4, 168]],
                [281.65, [24, 132, 14]],
                [291.15, [247, 251, 59]],
                [295, [235, 167, 0]],
                [299.65, [245, 0, 39]],
                [303, [87, 17, 0]],
                [304.65, [238, 0, 242]]
            ], arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1e3)
        }),
        ol = a.memoize(function() {
            return Dc([-6, 6], [
                [-6, [255, 255, 255]],
                [-3, [7, 252, 254]],
                [-1.5, [66, 42, 253]],
                [-.75, [34, 55, 134]],
                [0, [0, 0, 6]],
                [.75, [134, 55, 34]],
                [1.5, [253, 14, 16]],
                [3, [254, 252, 0]],
                [6, [255, 255, 255]]
            ], arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1e3)
        }),
        al = a.memoize(function() {
            var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 500,
                n = [.002, 2.5],
                e = n.map(Math.log);
            return qc(n, Lc(e, [function(t) {
                var n = function(t) {
                    return bc(t)
                };
                return n.domain = function() {
                    return t
                }, n.mode = function() {
                    return "cubehelix"
                }, n
            }(e)], t), Math.log, Math.exp)
        }),
        ul = a.memoize(function() {
            return Dc([0, 1], [
                [0, [5, 5, 89]],
                [.2, [170, 170, 230]],
                [1, [255, 255, 255]]
            ], arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1e3)
        }),
        cl = a.memoize(function() {
            return Dc([193, 328], [
                [193, [37, 4, 42]],
                [206, [41, 10, 130]],
                [219, [81, 40, 40]],
                [233.15, [192, 37, 149]],
                [255.372, [70, 215, 215]],
                [273.15, [21, 84, 187]],
                [275.15, [24, 132, 14]],
                [291, [247, 251, 59]],
                [298, [235, 167, 21]],
                [311, [230, 71, 39]],
                [328, [88, 27, 67]]
            ], arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 2e3)
        }),
        ll = a.memoize(function() {
            return Dc([0, 70], [
                [0, [230, 165, 30]],
                [10, [120, 100, 95]],
                [20, [40, 44, 92]],
                [30, [21, 13, 193]],
                [40, [75, 63, 235]],
                [60, [25, 255, 255]],
                [70, [150, 255, 255]]
            ], arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1e3)
        }),
        sl = a.memoize(function() {
            var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1e3,
                n = new Uint8Array(4 * t);
            return zc(n, [0, 1], [0, 1], Rc), qc([0, 100], n)
        }),
        fl = a.memoize(function() {
            return Dc([0, 8e4], [
                [0, [15, 4, 96]],
                [250, [30, 8, 180]],
                [1e3, [121, 102, 2]],
                [2e3, [118, 161, 66]],
                [4e3, [50, 102, 219]],
                [8e3, [19, 131, 193]],
                [16e3, [59, 204, 227]],
                [64e3, [241, 1, 45]],
                [8e4, [243, 0, 241]]
            ], arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1e4)
        }),
        hl = {};

    function dl(t) {
        var n = t.type,
            e = t.key,
            r = +t.which;
        return function(t, n, e, r) {
            if (n) {
                switch (n) {
                    case "Esc":
                        return "Escape"
                }
                return n
            }
            switch (e) {
                case 27:
                    return "Escape"
            }
            return "keypress" === t && r ? r : "NYI"
        }(n, e, r, String.fromCharCode(r))
    }! function() {
        var t = d.u() ? "" : "(<a href='about.html#aot' class='internal-link'>AOT</a>)";

        function n(t) {
            return d.c({
                descriptionHTML: "",
                paths: [],
                date: function() {
                    return null
                },
                navigate: function(t) {
                    return r(this.date(), t)
                },
                navigateTo: function(t) {
                    return e(t)
                },
                alpha: {
                    single: 160,
                    animated: 112
                }
            }, t)
        }

        function e(t, n) {
            var e = "current" === t ? a.pick(wr.f(nu()), "year", "month", "day", "hour") : a.clone(t);
            return e.hour = 3 * Math.floor(e.hour / 3), e.minute = 0, n && (e = wr.d(wr.a(e, n))), e
        }

        function r(t, n) {
            var e = 3 * (n > 1 ? 8 : n < -1 ? -8 : n);
            return wr.a(t, {
                hour: e
            })
        }

        function o(t, n) {
            if ("current" === t.date) return {
                dir: "current",
                stamp: "current",
                date: e(t.date, n)
            };
            var r = e(t.date, n);
            return {
                dir: wr.g(r, "{yyyy}/{MM}/{dd}"),
                stamp: wr.g(r, "{hh}{mm}"),
                date: r
            }
        }

        function u(t, n, e, r) {
            var i = o(t),
                a = wr.b(i.date),
                u = a >= new Date("2014/11/24") ? ".epak" : ".json",
                c = "0.5";
            a < new Date("2015/03/11") || d.q() && !d.u() ? c = "1.0" : a > new Date("2016/06/22") && t.hd && (c = "0.25");
            var l = [i.stamp, n, e, r, "gfs", c].filter(d.x).join("-") + u;
            return Lu("/data/gfs/" + (i.dir + "/" + l))
        }

        function c(t, n, e) {
            var r = o(t, e),
                i = [r.stamp, n, "geos.epak"].join("-");
            return Lu("/data/geos/" + (r.dir + "/" + i))
        }

        function l(t, n) {
            var e = "current" === t ? wr.f(nu()) : t,
                r = e.year,
                i = e.month,
                o = e.day,
                a = e.hour;
            return {
                year: r,
                month: i,
                day: o,
                hour: Math.floor(a / n) * n,
                minute: 0
            }
        }

        function s(t, n, e) {
            var r = (e > 1 ? 8 : e < -1 ? -8 : e) * n;
            return wr.a(t, {
                hour: r
            })
        }

        function f(t, n, e) {
            var r = l(t.date, e),
                i = "current" === t.date,
                o = i ? "current" : wr.g(r, "{yyyy}/{MM}/{dd}"),
                a = i ? "current" : wr.g(r, "{hh}{mm}");
            return Lu("/data/cams/" + "".concat(o, "/").concat(a, "-").concat(n, "-cams.epak"))
        }

        function h(t, n, e, r) {
            var i = o(t),
                a = [i.stamp, n, e, r, "wave", "30m"].filter(d.x).join("-") + ".epak";
            return Lu("/data/ww3/" + (i.dir + "/" + a))
        }

        function p(t, n, e) {
            if (e = +e || 0, "current" === n) return t[t.length - 1 + e];
            var r = wr.g(n, "{yyyy}{MM}{dd}"),
                i = a.sortedIndex(t, r);
            return t[(i = 0 === (t[i] || "").indexOf(r) ? i : i - 1) + e]
        }

        function v(t, n, e) {
            var r = p(t, n, e > 1 ? 6 : e < -1 ? -6 : e);
            return r ? wr.e(r, /(\d{4})(\d\d)(\d\d)/) : null
        }

        function m(t, n) {
            var e = p(t, n.date);
            return e ? Iu(e) : null
        }

        function y(t) {
            var n;
            if ("current" === t) {
                var e = a.pick(wr.f(nu()), "year", "month", "day");
                n = wr.a(e, {
                    day: -1
                })
            } else n = a.clone(t);
            return n
        }

        function g(t, n) {
            var e = n > 1 ? 5 : n < -1 ? -5 : n;
            return wr.a(t, {
                day: e
            })
        }

        function b(t, n, e, r) {
            var i = "current" === t.date ? "current" : wr.g(t.date, "{yyyy}/{MM}"),
                o = ["current" === i ? "current" : wr.g(t.date, "{yyyy}{MM}{dd}"), n, e, r, "rtg", "0.5"].filter(d.x).join("-") + ".epak";
            return Lu("/data/rtgsst/" + (i + "/" + o))
        }

        function w(t) {
            var n = "current" === t ? wr.f(nu()) : t,
                e = n.year,
                r = n.month,
                i = n.day,
                o = n.hour,
                a = n.minute;
            return {
                year: e,
                month: r,
                day: i,
                hour: o,
                minute: 5 * Math.floor(a / 5)
            }
        }

        function _(t) {
            var n = w(t.date),
                e = "current" === t.date,
                r = e ? "current" : wr.g(n, "{yyyy}/{MM}/{dd}"),
                i = e ? "current" : wr.g(n, "{yyyy}{MM}{dd}{hh}{mm}");
            return Lu("/data/ovation/" + "".concat(r, "/").concat(i, "-ovation.json"))
        }

        function x(t) {
            return "surface" === t.surface ? "Surface" : d.e(t.level)
        }

        function T(t) {
            return "surface" === t.surface ? "地上" : d.e(t.level)
        }

        function k(t) {
            return function(n) {
                var e = {};
                return a.forEach(t, function(t, r) {
                    e[r] = t[n] || t.en || t
                }), e
            }
        }
        var M, E, S = {
            wind: {
                matchesPrimary: function() {
                    return !0
                },
                matchesOverlay: a.matches({
                    overlayType: "wind"
                }),
                create: function(t) {
                    return n({
                        type: "wind",
                        descriptionHTML: k({
                            name: {
                                en: "Wind",
                                ja: "風速"
                            },
                            qualifier: {
                                en: " @ " + x(t),
                                ja: "＠" + T(t)
                            }
                        }),
                        paths: [u(t, "wind", t.surface, t.level)],
                        date: function() {
                            return e(t.date)
                        },
                        builder: function(t) {
                            return qu(t)
                        },
                        units: [{
                            label: "km/h",
                            conversion: function(t) {
                                return 3.6 * t
                            },
                            precision: 0,
                            convention: "into"
                        }, {
                            label: "m/s",
                            conversion: function(t) {
                                return t
                            },
                            precision: 1,
                            convention: "into"
                        }, {
                            label: "kn",
                            conversion: function(t) {
                                return 1.943844 * t
                            },
                            precision: 0,
                            convention: "into"
                        }, {
                            label: "mph",
                            conversion: function(t) {
                                return 2.236936 * t
                            },
                            precision: 0,
                            convention: "into"
                        }],
                        scale: sl(),
                        particles: {
                            velocityScale: .01,
                            maxIntensity: 15
                        }
                    })
                }
            },
            temp: {
                matchesOverlay: a.matches({
                    overlayType: "temp"
                }),
                create: function(t) {
                    return n({
                        type: "temp",
                        descriptionHTML: k({
                            name: {
                                en: "Temp",
                                ja: "気温"
                            },
                            qualifier: {
                                en: " @ " + x(t),
                                ja: " @ " + T(t)
                            }
                        }),
                        paths: [u(t, "temp", t.surface, t.level)],
                        date: function() {
                            return e(t.date)
                        },
                        builder: function(t) {
                            return pu(t, /Temperature/, Tu, ["Temperature"])
                        },
                        units: [{
                            label: "°C",
                            conversion: function(t) {
                                return t - 273.15
                            },
                            precision: 1
                        }, {
                            label: "°F",
                            conversion: function(t) {
                                return 9 * t / 5 - 459.67
                            },
                            precision: 1
                        }, {
                            label: "K",
                            conversion: function(t) {
                                return t
                            },
                            precision: 1
                        }],
                        scale: cl()
                    })
                }
            },
            relative_humidity: {
                matchesOverlay: a.matches({
                    overlayType: "relative_humidity"
                }),
                create: function(t) {
                    return n({
                        type: "relative_humidity",
                        descriptionHTML: k({
                            name: {
                                en: "Relative Humidity",
                                ja: "相対湿度"
                            },
                            qualifier: {
                                en: " @ " + x(t),
                                ja: " @ " + T(t)
                            }
                        }),
                        paths: [u(t, "relative_humidity", t.surface, t.level)],
                        date: function() {
                            return e(t.date)
                        },
                        builder: function(t) {
                            return pu(t, /Relative_humidity/, Tu)
                        },
                        units: [{
                            label: "%",
                            conversion: function(t) {
                                return t
                            },
                            precision: 0
                        }],
                        scale: el()
                    })
                }
            },
            air_density: {
                matchesOverlay: a.matches({
                    overlayType: "air_density"
                }),
                create: function(t) {
                    return n({
                        type: "air_density",
                        descriptionHTML: k({
                            name: {
                                en: "Air Density",
                                ja: "空気密度"
                            },
                            qualifier: {
                                en: " @ " + x(t),
                                ja: " @ " + T(t)
                            }
                        }),
                        paths: [u(t, "air_density", t.surface, t.level)],
                        date: function() {
                            return e(t.date)
                        },
                        builder: function(t) {
                            return pu(t, /air_density/, Tu)
                        },
                        units: [{
                            label: "kg/m³",
                            conversion: function(t) {
                                return t
                            },
                            precision: 2
                        }],
                        scale: Hc()
                    })
                }
            },
            wind_power_density: {
                matchesOverlay: a.matches({
                    overlayType: "wind_power_density"
                }),
                create: function(t) {
                    var r = S.wind.create(t),
                        i = S.air_density.create(t);
                    return n({
                        type: "wind_power_density",
                        descriptionHTML: k({
                            name: {
                                en: "Instant Wind Power Density",
                                ja: "風力エネルギー密度"
                            },
                            qualifier: {
                                en: " @ " + x(t),
                                ja: " @ " + T(t)
                            }
                        }),
                        paths: [r.paths[0], i.paths[0]],
                        date: function() {
                            return e(t.date)
                        },
                        builder: function(t, n) {
                            return function(t, n) {
                                var e = qu(t),
                                    r = pu(n, /air_density/, Tu, ["air_density"]),
                                    i = e.field().valueAt,
                                    o = e.field().nearest,
                                    a = e.field().bilinear,
                                    u = r.field().valueAt,
                                    c = r.field().nearest,
                                    l = r.field().bilinear;

                                function s(t, n) {
                                    var e = t[2];
                                    return .5 * n * e * e * e
                                }

                                function f(t) {
                                    return s(i(t), u(t))
                                }

                                function h(t) {
                                    return s(o(t), c(t))
                                }

                                function p(t) {
                                    return s(a(t), l(t))
                                }
                                return d.c(r, {
                                    field: function() {
                                        return {
                                            type: "scalar",
                                            valueAt: f,
                                            nearest: h,
                                            bilinear: p
                                        }
                                    },
                                    interpolate: function(t) {
                                        return p(t)
                                    }
                                })
                            }(t, n)
                        },
                        units: [{
                            label: "kW/m<sup>2</sup>",
                            tooltip: "kW/m²",
                            conversion: function(t) {
                                return t / 1e3
                            },
                            precision: 1
                        }, {
                            label: "W/m<sup>2</sup>",
                            tooltip: "W/m²",
                            conversion: function(t) {
                                return t
                            },
                            precision: 0
                        }],
                        scale: fl()
                    })
                }
            },
            misery_index: {
                matchesOverlay: a.matches({
                    overlayType: "misery_index"
                }),
                create: function(t) {
                    return n({
                        type: "misery_index",
                        descriptionHTML: k({
                            name: {
                                en: "Misery (Wind Chill & Heat Index)",
                                ja: "体感温度"
                            },
                            qualifier: {
                                en: " @ " + x(t),
                                ja: " @ " + T(t)
                            }
                        }),
                        paths: [u(t, "misery_index")],
                        date: function() {
                            return e(t.date)
                        },
                        builder: function(t) {
                            return pu(t, /misery_index/, Tu)
                        },
                        units: (i = (r = {
                            en: " (feels like)",
                            ja: "（体感温度）"
                        })[d.D()] || r.en, [{
                            label: "°C" + i,
                            conversion: function(t) {
                                return t - 273.15
                            },
                            precision: 1
                        }, {
                            label: "°F" + i,
                            conversion: function(t) {
                                return 9 * t / 5 - 459.67
                            },
                            precision: 1
                        }, {
                            label: "K" + i,
                            conversion: function(t) {
                                return t
                            },
                            precision: 1
                        }]),
                        scale: Jc()
                    });
                    var r, i
                }
            },
            total_cloud_water: {
                matchesOverlay: a.matches({
                    overlayType: "total_cloud_water"
                }),
                create: function(t) {
                    return n({
                        type: "total_cloud_water",
                        descriptionHTML: k({
                            name: {
                                en: "Total Cloud Water",
                                ja: "雲水量"
                            },
                            qualifier: ""
                        }),
                        paths: [u(t, "total_cloud_water")],
                        date: function() {
                            return e(t.date)
                        },
                        builder: function(t) {
                            return pu(t, /Cloud_water/, Tu, ["Cloud_water"])
                        },
                        units: [{
                            label: "kg/m<sup>2</sup>",
                            tooltip: "kg/m²",
                            conversion: function(t) {
                                return t
                            },
                            precision: 3
                        }],
                        scale: ul()
                    })
                }
            },
            total_precipitable_water: {
                matchesOverlay: a.matches({
                    overlayType: "total_precipitable_water"
                }),
                create: function(t) {
                    return n({
                        type: "total_precipitable_water",
                        descriptionHTML: k({
                            name: {
                                en: "Total Precipitable Water",
                                ja: "可降水量"
                            },
                            qualifier: ""
                        }),
                        paths: [u(t, "total_precipitable_water")],
                        date: function() {
                            return e(t.date)
                        },
                        builder: function(t) {
                            return pu(t, /Precipitable_water/, Tu, ["Precipitable_water"])
                        },
                        units: [{
                            label: "kg/m<sup>2</sup>",
                            tooltip: "kg/m²",
                            conversion: function(t) {
                                return t
                            },
                            precision: 3
                        }],
                        scale: ll()
                    })
                }
            },
            mean_sea_level_pressure: {
                matchesOverlay: a.matches({
                    overlayType: "mean_sea_level_pressure"
                }),
                create: function(t) {
                    return n({
                        type: "mean_sea_level_pressure",
                        descriptionHTML: k({
                            name: {
                                en: "Mean Sea Level Pressure",
                                ja: "海面更正気圧"
                            },
                            qualifier: ""
                        }),
                        paths: [u(t, "mean_sea_level_pressure")],
                        date: function() {
                            return e(t.date)
                        },
                        builder: function(t) {
                            return pu(t, /Pressure_reduced_to_MSL/, Tu, ["Pressure_reduced_to_MSL"])
                        },
                        units: [{
                            label: "hPa",
                            conversion: function(t) {
                                return t / 100
                            },
                            precision: 0
                        }, {
                            label: "mmHg",
                            conversion: function(t) {
                                return t / 133.322387415
                            },
                            precision: 0
                        }, {
                            label: "inHg",
                            conversion: function(t) {
                                return t / 3386.389
                            },
                            precision: 1
                        }],
                        scale: Zc()
                    })
                }
            },
            precip_3hr: {
                matchesOverlay: a.matches({
                    overlayType: "precip_3hr"
                }),
                create: function(t) {
                    return n({
                        type: "precip_3hr",
                        descriptionHTML: k({
                            name: {
                                en: "Next 3-hr Precip Accumulation",
                                ja: "3時間の降水量"
                            },
                            qualifier: ""
                        }),
                        paths: [u(t, "precip_3hr")],
                        date: function() {
                            return e(t.date)
                        },
                        builder: function(t) {
                            return pu(t, /precip_accumulation_3hr/, Tu)
                        },
                        units: [{
                            label: "mm",
                            tooltip: "mm",
                            conversion: function(t) {
                                return t
                            },
                            precision: 1
                        }, {
                            label: "in",
                            tooltip: "in",
                            conversion: function(t) {
                                return t / 25.4
                            },
                            precision: 2
                        }, {
                            label: "kg/m<sup>2</sup>",
                            tooltip: "kg/m²",
                            conversion: function(t) {
                                return t
                            },
                            precision: 1
                        }],
                        alpha: {
                            single: 160,
                            animated: 160
                        },
                        scale: tl()
                    })
                }
            },
            cape: {
                matchesOverlay: a.matches({
                    overlayType: "cape"
                }),
                create: function(t) {
                    return n({
                        type: "cape",
                        descriptionHTML: k({
                            name: {
                                en: "CAPE (Surface)",
                                ja: "対流有効位置エネルギー（地上）"
                            },
                            qualifier: ""
                        }),
                        paths: [u(t, "cape")],
                        date: function() {
                            return e(t.date)
                        },
                        builder: function(t) {
                            return pu(t, /Convective_available_potential_energy_surface/, Tu)
                        },
                        units: [{
                            label: "J/kg",
                            tooltip: "J/kg",
                            conversion: function(t) {
                                return t
                            },
                            precision: 0
                        }],
                        alpha: {
                            single: 160,
                            animated: 140
                        },
                        scale: Xc()
                    })
                }
            },
            co2: {
                matchesOverlay: a.matches({
                    overlayType: "co2"
                }),
                create: function(t) {
                    return n({
                        type: "co2",
                        descriptionHTML: k({
                            name: {
                                en: "Carbon Dioxide Mixing Ratio",
                                ja: "二酸化炭素混合比"
                            },
                            qualifier: ""
                        }),
                        paths: [c(t, "co2")],
                        date: function() {
                            return e(t.date)
                        },
                        builder: function(t) {
                            return pu(t, /CO2CL/, _u)
                        },
                        units: [{
                            label: "µmol/mol",
                            conversion: function(t) {
                                return 1e6 * t
                            },
                            precision: 1
                        }],
                        alpha: {
                            single: 160,
                            animated: 160
                        },
                        scale: Wc()
                    })
                }
            },
            cosc: {
                matchesOverlay: a.matches({
                    overlayType: "cosc"
                }),
                create: function(t) {
                    return n({
                        type: "cosc",
                        descriptionHTML: k({
                            name: {
                                en: "Carbon Monoxide Conc.",
                                ja: "一酸化炭素濃度"
                            },
                            qualifier: {
                                en: " @ Surface",
                                ja: "＠地上"
                            }
                        }),
                        paths: [c(t, "cosc")],
                        date: function() {
                            return e(t.date)
                        },
                        builder: function(t) {
                            return pu(t, /COSC/, _u)
                        },
                        units: [{
                            label: "ppbv",
                            conversion: function(t) {
                                return t
                            },
                            precision: 0
                        }, {
                            label: "ppmv",
                            conversion: function(t) {
                                return t / 1e3
                            },
                            precision: 2
                        }],
                        alpha: {
                            single: 160,
                            animated: 140
                        },
                        scale: Vc()
                    })
                }
            },
            so2smass: {
                matchesOverlay: a.matches({
                    overlayType: "so2smass"
                }),
                create: function(t) {
                    return n({
                        type: "so2smass",
                        descriptionHTML: k({
                            name: {
                                en: "Sulfur Dioxide Mass",
                                ja: "二酸化硫黄質量"
                            },
                            qualifier: {
                                en: " @ Surface",
                                ja: "＠地上"
                            }
                        }),
                        paths: [c(t, "so2smass")],
                        date: function() {
                            return e(t.date)
                        },
                        builder: function(t) {
                            return pu(t, /SO2SMASS/, _u)
                        },
                        units: [{
                            label: "µg/m<sup>3</sup>",
                            tooltip: "µg/m³",
                            conversion: function(t) {
                                return 1e9 * t
                            },
                            precision: 2
                        }],
                        alpha: {
                            single: 160,
                            animated: 140
                        },
                        scale: rl()
                    })
                }
            },
            duexttau: {
                matchesOverlay: a.matches({
                    overlayType: "duexttau"
                }),
                create: function(r) {
                    return n({
                        type: "duexttau",
                        descriptionHTML: k({
                            name: {
                                en: "Dust Extinction " + t,
                                ja: "粒子消散係数 " + t
                            },
                            qualifier: ""
                        }),
                        paths: [c(r, "duexttau")],
                        date: function() {
                            return e(r.date)
                        },
                        builder: function(t) {
                            return pu(t, /DUEXTTAU/, _u)
                        },
                        units: [{
                            label: "τ",
                            conversion: function(t) {
                                return t
                            },
                            precision: 4
                        }],
                        alpha: {
                            single: 160,
                            animated: 140
                        },
                        scale: Yc()
                    })
                }
            },
            suexttau: {
                matchesOverlay: a.matches({
                    overlayType: "suexttau"
                }),
                create: function(r) {
                    return n({
                        type: "suexttau",
                        descriptionHTML: k({
                            name: {
                                en: "Sulfate Extinction " + t,
                                ja: "硫酸塩消散係数 " + t
                            },
                            qualifier: ""
                        }),
                        paths: [c(r, "suexttau")],
                        date: function() {
                            return e(r.date)
                        },
                        builder: function(t) {
                            return pu(t, /SUEXTTAU/, _u)
                        },
                        units: [{
                            label: "τ",
                            conversion: function(t) {
                                return t
                            },
                            precision: 3
                        }],
                        alpha: {
                            single: 160,
                            animated: 140
                        },
                        scale: al()
                    })
                }
            },
            co2sc: {
                matchesOverlay: a.matches({
                    overlayType: "co2sc"
                }),
                create: function(t) {
                    var i = e(t.date, {
                            minute: 90
                        }),
                        o = wr.b({
                            year: 2017,
                            month: 1,
                            day: 24,
                            hour: 4,
                            minute: 30
                        }),
                        a = wr.b(i) < o,
                        u = a ? 32 : 0;
                    return n({
                        type: "co2sc",
                        descriptionHTML: k({
                            name: {
                                en: "Carbon Dioxide Concentration",
                                ja: "二酸化炭素濃度"
                            },
                            qualifier: {
                                en: " @ Surface",
                                ja: "＠地上"
                            }
                        }),
                        paths: [c(t, "co2sc", {
                            minute: 90
                        })],
                        date: function() {
                            return i
                        },
                        navigate: function(t) {
                            return r(this.date(), t)
                        },
                        navigateTo: function(t) {
                            return e(t, {
                                minute: 90
                            })
                        },
                        builder: function(t) {
                            return pu(t, /CO2SC/, a ? xu : _u, null, function(t) {
                                for (var n = 0; n < t.length; n++) t[n] += u
                            })
                        },
                        units: [{
                            label: "ppmv",
                            conversion: function(t) {
                                return t
                            },
                            precision: 0
                        }],
                        alpha: {
                            single: 200,
                            animated: 150
                        },
                        scale: Bc(a ? -8 : 0)
                    })
                }
            },
            currents: {
                matchesPrimary: (M = a.matches({
                    surface: "surface",
                    level: "currents"
                }), E = a.matches({
                    param: "argo",
                    surface: "pressure"
                }), function(t) {
                    return M(t) || E(t)
                }),
                matchesOverlay: a.matches({
                    overlayType: "currents"
                }),
                create: function(t) {
                    return Pu(Iu("oscar-catalog.json")).then(function(e) {
                        return n({
                            type: "currents",
                            descriptionHTML: k({
                                name: {
                                    en: "Ocean Currents",
                                    ja: "海流"
                                },
                                qualifier: {
                                    en: " @ Surface",
                                    ja: "＠地上"
                                }
                            }),
                            paths: [m(e, t)],
                            date: function() {
                                return function(t, n) {
                                    var e = p(t, n);
                                    return e ? wr.e(e, /(\d{4})(\d\d)(\d\d)/) : null
                                }(e, t.date)
                            },
                            navigate: function(t) {
                                return v(e, this.date(), t)
                            },
                            navigateTo: function(t) {
                                return v(e, t, 0)
                            },
                            builder: function(t) {
                                return function(t) {
                                    var n = t,
                                        e = n.header.variables,
                                        r = e.u,
                                        i = e.v,
                                        o = e[r.dimensions[0]],
                                        a = e[r.dimensions[2]],
                                        u = e[r.dimensions[3]],
                                        c = d.y(n.blocks[r.data.block], n.blocks[i.data.block]),
                                        l = iu(u.sequence, a.sequence),
                                        s = du(l, c);
                                    return {
                                        sourceHTML: "OSCAR / Earth & Space Research",
                                        date: function() {
                                            return wr.f(o.data[0])
                                        },
                                        grid: function() {
                                            return l
                                        },
                                        field: function() {
                                            return {
                                                type: "vector",
                                                valueAt: function(t) {
                                                    var n = 2 * t,
                                                        e = c[n],
                                                        r = c[n + 1];
                                                    return [e, r, Math.sqrt(e * e + r * r)]
                                                },
                                                nearest: fu(l, c),
                                                bilinear: du(l, c)
                                            }
                                        },
                                        interpolate: function(t) {
                                            return s(t)
                                        }
                                    }
                                }(t)
                            },
                            units: [{
                                label: "m/s",
                                conversion: function(t) {
                                    return t
                                },
                                precision: 2,
                                convention: "with"
                            }, {
                                label: "km/h",
                                conversion: function(t) {
                                    return 3.6 * t
                                },
                                precision: 1,
                                convention: "with"
                            }, {
                                label: "kn",
                                conversion: function(t) {
                                    return 1.943844 * t
                                },
                                precision: 1,
                                convention: "with"
                            }, {
                                label: "mph",
                                conversion: function(t) {
                                    return 2.236936 * t
                                },
                                precision: 1,
                                convention: "with"
                            }],
                            scale: $c(),
                            particles: {
                                velocityScale: 1 / 7,
                                maxIntensity: .7
                            }
                        })
                    })
                }
            },
            primary_waves: {
                matchesPrimary: a.matches({
                    param: "ocean",
                    surface: "primary",
                    level: "waves"
                }),
                matchesOverlay: a.matches({
                    overlayType: "primary_waves"
                }),
                create: function(t) {
                    return n({
                        type: "primary_waves",
                        descriptionHTML: k({
                            name: {
                                en: "Peak Wave Period",
                                ja: "ピーク波周期"
                            },
                            qualifier: ""
                        }),
                        paths: [h(t, "primary")],
                        date: function() {
                            return e(t.date)
                        },
                        builder: function(t) {
                            return function(t) {
                                for (var n = t, e = n.header.variables, r = e.Primary_wave_direction_surface, o = e.Primary_wave_mean_period_surface, a = e[r.dimensions[0]], u = e[r.dimensions[1]], c = e[r.dimensions[2]], l = n.blocks[r.data.block], s = n.blocks[o.data.block], f = new Float32Array(2 * l.length), h = 0; h < l.length; h++) {
                                    var d = 2 * h,
                                        p = l[h] * i.c,
                                        v = s[h];
                                    p < 7e37 && v < 7e37 ? (f[d] = -v * Math.sin(p), f[d + 1] = -v * Math.cos(p)) : f[d] = f[d + 1] = 7e37
                                }
                                var m = iu(c.sequence, u.sequence),
                                    y = du(m, f);
                                return {
                                    sourceHTML: Mu,
                                    date: function() {
                                        return wr.f(a.data[0])
                                    },
                                    grid: function() {
                                        return m
                                    },
                                    field: function() {
                                        return {
                                            type: "vector",
                                            valueAt: function(t) {
                                                var n = 2 * t,
                                                    e = f[n],
                                                    r = f[n + 1];
                                                return [e, r, Math.sqrt(e * e + r * r)]
                                            },
                                            nearest: fu(m, f),
                                            bilinear: du(m, f)
                                        }
                                    },
                                    interpolate: function(t) {
                                        return y(t)
                                    }
                                }
                            }(t)
                        },
                        units: [{
                            label: "sec",
                            conversion: function(t) {
                                return t
                            },
                            precision: 1,
                            convention: "into"
                        }],
                        scale: nl(),
                        particles: {
                            velocityScale: 1 / 612,
                            maxIntensity: 12,
                            waves: !0
                        }
                    })
                }
            },
            sea_surface_temp: {
                matchesOverlay: a.matches({
                    overlayType: "sea_surface_temp"
                }),
                create: function(t) {
                    return n({
                        type: "sea_surface_temp",
                        descriptionHTML: k({
                            name: {
                                en: "Sea Surface Temp",
                                ja: "海面水温"
                            },
                            qualifier: ""
                        }),
                        paths: [b(t, "sea_surface_temp")],
                        date: function() {
                            return y(t.date)
                        },
                        navigate: function(t) {
                            return g(this.date(), t)
                        },
                        navigateTo: function(t) {
                            return g(t, 0)
                        },
                        builder: function(t) {
                            return pu(t, /Temperature_surface_sparse/, ku)
                        },
                        units: [{
                            label: "°C",
                            conversion: function(t) {
                                return t - 273.15
                            },
                            precision: 1
                        }, {
                            label: "°F",
                            conversion: function(t) {
                                return 9 * t / 5 - 459.67
                            },
                            precision: 1
                        }, {
                            label: "K",
                            conversion: function(t) {
                                return t
                            },
                            precision: 1
                        }],
                        scale: il()
                    })
                }
            },
            sea_surface_temp_anomaly: {
                matchesOverlay: a.matches({
                    overlayType: "sea_surface_temp_anomaly"
                }),
                create: function(t) {
                    return n({
                        type: "sea_surface_temp_anomaly",
                        descriptionHTML: k({
                            name: {
                                en: "SST Anomaly",
                                ja: "海面水温異常"
                            },
                            qualifier: ""
                        }),
                        paths: [b(t, "sea_surface_temp_anomaly")],
                        date: function() {
                            return y(t.date)
                        },
                        navigate: function(t) {
                            return g(this.date(), t)
                        },
                        navigateTo: function(t) {
                            return g(t, 0)
                        },
                        builder: function(t) {
                            return pu(t, /Temperature_surface_anomaly_sparse/, ku)
                        },
                        units: [{
                            label: "°C",
                            conversion: function(t) {
                                return t
                            },
                            precision: 1
                        }, {
                            label: "°F",
                            conversion: function(t) {
                                return 9 * t / 5
                            },
                            precision: 1
                        }, {
                            label: "K",
                            conversion: function(t) {
                                return t
                            },
                            precision: 1
                        }],
                        scale: ol()
                    })
                }
            },
            significant_wave_height: {
                matchesOverlay: a.matches({
                    overlayType: "significant_wave_height"
                }),
                create: function(t) {
                    return n({
                        type: "significant_wave_height",
                        descriptionHTML: k({
                            name: {
                                en: "Significant Wave Height",
                                ja: "有義波高"
                            },
                            qualifier: ""
                        }),
                        paths: [h(t, "sig_height")],
                        date: function() {
                            return e(t.date)
                        },
                        builder: function(t) {
                            return pu(t, /Significant_height/, Mu)
                        },
                        units: [{
                            label: "m",
                            conversion: function(t) {
                                return t
                            },
                            precision: 2
                        }, {
                            label: "ft",
                            conversion: function(t) {
                                return 100 * t / 2.54 / 12
                            },
                            precision: 1
                        }],
                        scale: Kc()
                    })
                }
            },
            aurora: {
                matchesOverlay: a.matches({
                    overlayType: "aurora"
                }),
                create: function(t) {
                    function e() {
                        return w(t.date)
                    }
                    return n({
                        type: "aurora",
                        descriptionHTML: k({
                            name: {
                                en: "Probability of Visible Aurora",
                                ja: "オーロラが見える確率"
                            },
                            qualifier: ""
                        }),
                        paths: [_(t)],
                        date: e,
                        navigate: function(t) {
                            return function(t, n) {
                                var e = n > 1 ? 12 : n < -1 ? -12 : n;
                                return wr.d(wr.a(t, {
                                    minute: 5 * e
                                }))
                            }(e(), t)
                        },
                        navigateTo: function(t) {
                            return w(t)
                        },
                        builder: function(t) {
                            return d.c(gu(t), {
                                sourceHTML: "OVATION / SWPC / NCEP / NWS / NOAA"
                            })
                        },
                        units: [{
                            label: "% Visibility Chance",
                            tooltip: "% Visibility Chance",
                            conversion: function(t) {
                                return t
                            },
                            precision: 0
                        }],
                        alpha: {
                            single: 160,
                            animated: 140
                        },
                        scale: Gc()
                    })
                }
            },
            pm1: {
                matchesOverlay: a.matches({
                    overlayType: "pm1"
                }),
                create: function(t) {
                    return n({
                        type: "pm1",
                        descriptionHTML: k({
                            name: {
                                en: "Particulate Matter < 1 µm",
                                ja: "粒子径1µm以下（PM<sub>1</sub>）"
                            },
                            qualifier: {
                                en: " @ Surface",
                                ja: "＠地上"
                            }
                        }),
                        paths: [f(t, "pm1", 1)],
                        date: function() {
                            return l(t.date, 1)
                        },
                        navigate: function(t) {
                            return s(this.date(), 1, t)
                        },
                        navigateTo: function(t) {
                            return l(t, 1)
                        },
                        builder: function(t) {
                            return pu(t, /pm1/, wu)
                        },
                        units: [{
                            label: "µg/m<sup>3</sup>",
                            tooltip: "µg/m³",
                            conversion: function(t) {
                                return 1e9 * t
                            },
                            precision: 0
                        }],
                        alpha: {
                            single: 160,
                            animated: 140
                        },
                        scale: Qc()
                    })
                }
            },
            "pm2.5": {
                matchesOverlay: a.matches({
                    overlayType: "pm2.5"
                }),
                create: function(t) {
                    return n({
                        type: "pm2.5",
                        descriptionHTML: k({
                            name: {
                                en: "Particulate Matter < 2.5 µm",
                                ja: "微小粒子状物質（PM<sub>2.5</sub>）"
                            },
                            qualifier: {
                                en: " @ Surface",
                                ja: "＠地上"
                            }
                        }),
                        paths: [f(t, "pm2p5", 1)],
                        date: function() {
                            return l(t.date, 1)
                        },
                        navigate: function(t) {
                            return s(this.date(), 1, t)
                        },
                        navigateTo: function(t) {
                            return l(t, 1)
                        },
                        builder: function(t) {
                            return pu(t, /pm2p5/, wu)
                        },
                        units: [{
                            label: "µg/m<sup>3</sup>",
                            tooltip: "µg/m³",
                            conversion: function(t) {
                                return 1e9 * t
                            },
                            precision: 0
                        }],
                        alpha: {
                            single: 160,
                            animated: 140
                        },
                        scale: Qc()
                    })
                }
            },
            pm10: {
                matchesOverlay: a.matches({
                    overlayType: "pm10"
                }),
                create: function(t) {
                    return n({
                        type: "pm10",
                        descriptionHTML: k({
                            name: {
                                en: "Particulate Matter < 10 µm",
                                ja: "粒子径10µm以下（PM<sub>10</sub>）"
                            },
                            qualifier: {
                                en: " @ Surface",
                                ja: "＠地上"
                            }
                        }),
                        paths: [f(t, "pm10", 1)],
                        date: function() {
                            return l(t.date, 1)
                        },
                        navigate: function(t) {
                            return s(this.date(), 1, t)
                        },
                        navigateTo: function(t) {
                            return l(t, 1)
                        },
                        builder: function(t) {
                            return pu(t, /pm10/, wu)
                        },
                        units: [{
                            label: "µg/m<sup>3</sup>",
                            tooltip: "µg/m³",
                            conversion: function(t) {
                                return 1e9 * t
                            },
                            precision: 0
                        }],
                        alpha: {
                            single: 160,
                            animated: 140
                        },
                        scale: Qc()
                    })
                }
            },
            off: {
                matchesOverlay: a.matches({
                    overlayType: "off"
                }),
                create: function() {
                    return null
                }
            }
        };
        hl.productsFor = function(t) {
            var n = null,
                e = null;
            a.values(S).forEach(function(r) {
                a.isFunction(r.matchesPrimary) && r.matchesPrimary(t) && (n = r), a.isFunction(r.matchesOverlay) && r.matchesOverlay(t) && r !== n && (e = r)
            });
            var r = [];
            return n && r.push(n.create(t)), e && r.push(e.create(t)), r.filter(d.w)
        }, hl.overlayTypes = function() {
            return Ja(Object.keys(S))
        }
    }();
    var pl = e(14);

    function vl(t, n) {
        for (var e = 0; e < n.length; e++) {
            var r = n[e];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
        }
    }

    function ml(t) {
        var n = Object.keys(t),
            e = h.apply(void 0, ["change"].concat(n.map(function(t) {
                return "change:".concat(t)
            }))),
            r = Object(d.H)(t),
            i = 0;
        return new(function() {
            function t() {
                ! function(t, n) {
                    if (!(t instanceof n)) throw new TypeError("Cannot call a class as a function")
                }(this, t)
            }
            var n, o, u;
            return n = t, (o = [{
                key: "on",
                value: function(t, n) {
                    var r = function(t) {
                            return t.trim().split(/^|\s+/).map(function(t) {
                                return t.replace("?", i++)
                            })
                        }(t),
                        o = e.on(r.join(" "), n);
                    return arguments.length < 2 ? o : r
                }
            }, {
                key: "get",
                value: function(t) {
                    return r[t]
                }
            }, {
                key: "getAll",
                value: function() {
                    return Object(d.H)(r)
                }
            }, {
                key: "save",
                value: function(t, n) {
                    var i = Object(d.H)(),
                        o = Object(d.H)();
                    Object.keys(t).forEach(function(n) {
                        if (!(n in r)) throw new Error("unknown key: ".concat(n));
                        var e = t[n],
                            u = r[n];
                        a.isEqual(e, u) || (i[n] = e, o[n] = u)
                    });
                    var u = Object.keys(i);
                    u.length > 0 && (u.forEach(function(t) {
                        return r[t] = i[t]
                    }), u.forEach(function(t) {
                        return e.call("change:".concat(t), null, i[t], o[t], n)
                    }), e.call("change", null, i, o, n))
                }
            }]) && vl(n.prototype, o), u && vl(n, u), t
        }())
    }
    var yl = hl.overlayTypes();

    function gl() {
        return Object(d.H)({
            date: "current",
            param: "wind",
            surface: "surface",
            level: "level",
            projection: "orthographic",
            orientation: "",
            overlayType: "default",
            showGridPoints: !1,
            animate: !0,
            loc: null,
            argoFloat: null
        })
    }
    var bl, wl = ml((bl = Object(d.H)(), Object.keys(gl()).forEach(function(t) {
        return bl[t] = void 0
    }), bl));

    function _l() {
        var t = function(t) {
            var n, e = /^#(current|(\d{4})\/(\d{1,2})\/(\d{1,2})\/(\d{3,4})Z)\/(\w+)\/(\w+)\/(\w+)([\/].+)?/.exec(t);
            if (!e) return gl();
            var i = "current" === e[1] ? "current" : {
                year: +e[2],
                month: +e[3],
                day: +e[4]
            };
            if ("current" !== i) {
                var o = (3 === e[5].length ? "0" : "") + e[5];
                i.hour = +o.substr(0, 2), i.minute = +o.substr(2)
            }
            var u = gl();
            return u.date = i, u.param = e[6], u.surface = e[7], u.level = e[8], Object(d.f)(e[9], "").split("/").forEach(function(t) {
                if (n = /^(\w+)(=([\d\-.,]*))?$/.exec(t)) {
                    if (a.has(r, n[1])) u.projection = n[1], u.orientation = Object(d.f)(n[3], "");
                    else if ("loc" === n[1]) {
                        var e = a.isString(n[3]) ? n[3].split(",") : [],
                            i = +e[0],
                            o = +e[1];
                        i == i && o == o && (u.loc = [i, o])
                    }
                } else if (n = /^overlay=([\w.]+)$/.exec(t))(yl.has(n[1]) || "default" === n[1]) && (u.overlayType = n[1]);
                else if (n = /^grid=(\w+)$/.exec(t)) "on" === n[1] && (u.showGridPoints = !0);
                else if (n = /^anim=(\w+)$/.exec(t)) "off" === n[1] && (u.animate = !1);
                else if (n = /^argo=(\w+)$/.exec(t)) switch (n[1]) {
                    case "planned":
                    case "recent":
                    case "operational":
                    case "dead":
                        u.argoFloat = n[1]
                }
            }), u
        }(window.location.hash);
        wl.save(t, {
            source: "hash"
        })
    }

    function xl(t, n) {
        var e, r, i, o, a, u, c, l, s, f, h, d, p = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {},
            v = wl.getAll(),
            m = (r = (e = v).date, i = e.param, o = e.surface, a = e.level, u = e.projection, c = e.orientation, l = e.overlayType, s = e.showGridPoints, f = e.animate, h = e.loc, d = e.argoFloat, "#" + ["current" === r ? "current" : wr.g(r, "{yyyy}/{MM}/{dd}/{hh}{mm}Z"), i, o, a, f ? "" : "anim=off", l && "default" !== l ? "overlay=" + l : "", s ? "grid=on" : "", d ? "argo=" + d : "", [u, c].filter(function(t) {
                return t
            }).join("="), h ? "loc=" + h.map(function(t) {
                return t.toFixed(3)
            }).join(",") : ""].filter(function(t) {
                return t
            }).join("/"));
        window.location.hash !== m && "hash" !== p.source && (window.location.hash = m)
    }
    var Tl = {
        year: NaN,
        month: NaN,
        day: NaN
    };

    function kl() {
        return p.a("#data-date").classed("local")
    }

    function Ml(t, n) {
        dr("[".concat(t, "]")).classed("highlighted", !1), isNaN(n) || dr("[".concat(t, '="').concat(n, '"]')).classed("highlighted", !0)
    }

    function El() {
        ! function() {
            if (!isNaN(Tl.year) && !isNaN(Tl.month)) {
                var t = new Date(Tl.year, Tl.month, 0).getDate(),
                    n = new Date(Tl.year, Tl.month - 1, 1).getDay();
                dr("[data-day]").each(function(e, r) {
                    var i = r - n + 1,
                        o = i < 1 || t < i ? 0 : i;
                    p.a(this).text(Object(pl.a)(o, 2)).attr("data-day", o).classed("hidden", 0 === o)
                })
            }
        }(), Ml("data-year", Tl.year), Ml("data-month", Tl.month), Ml("data-day", Tl.day)
    }

    function Sl() {
        var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
            n = {
                year: +t.year,
                month: +t.month,
                day: +t.day,
                hour: +t.hour,
                minute: +t.minute
            },
            e = kl() ? wr.c(wr.b(n)) : n;
        Tl.year = e.year, Tl.month = e.month, Tl.day = e.day, El()
    }

    function Al(t) {
        for (var n = {
                language: "",
                script: "",
                region: ""
            }, e = (t || "").toLowerCase().split("-"), r = 0; r < e.length; r++) {
            var i = e[r];
            if (1 === i.length) break;
            0 === r ? n.language = i : /^[a-z]{4}$/.test(i) ? n.script = i.substring(0, 1).toUpperCase() + i.substring(1) : /^([a-z]{2}|\d{3})$/.test(i) && (n.region = i.toUpperCase())
        }
        return n
    }

    function jl(t) {
        switch (t.language) {
            case "en":
                return "en";
            case "cs":
                return "cs";
            case "fr":
                return "fr";
            case "ja":
                return "ja";
            case "ko":
                return "ko";
            case "pt":
                return "pt";
            case "ru":
                return "ru";
            case "zh":
                switch (t.script) {
                    case "Hant":
                        return "zh-TW";
                    case "Hans":
                        return "zh-CN"
                }
                switch (t.region) {
                    case "HK":
                    case "MO":
                    case "TW":
                        return "zh-TW";
                    case "SG":
                    case "CN":
                        return "zh-CN"
                }
        }
        return ""
    }
    dr("[data-year]").on("click", function() {
        Tl.year = +p.a(this).attr("data-year"), El()
    }), dr("[data-month]").on("click", function() {
        Tl.month = +p.a(this).attr("data-month"), El()
    }), dr("[data-day]").on("click", function() {
        Tl.day = +p.a(this).attr("data-day"), El()
    }), p.a("#calendar-apply").on("click", function() {
        p.a("#calendar-wrapper").classed("invisible", !0);
        var t = kl() ? wr.f(new Date(Tl.year, Tl.month - 1, Tl.day)) : Tl,
            n = t.year,
            e = t.month,
            r = t.day,
            i = t.hour,
            o = t.minute;
        wl.save({
            date: {
                year: n,
                month: e,
                day: r,
                hour: i || 0,
                minute: o || 0
            }
        })
    });
    var Nl = e(19),
        Ol = e(22);

    function Pl(t, n) {
        if (!(t instanceof n)) throw new TypeError("Cannot call a class as a function")
    }

    function Rl(t, n) {
        for (var e = 0; e < n.length; e++) {
            var r = n[e];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
        }
    }

    function Cl(t, n, e) {
        return n && Rl(t.prototype, n), e && Rl(t, e), t
    }
    var Fl = Object(Nl.a)();

    function zl(t) {
        throw new Error(t)
    }
    var Ll = function() {
            function t() {
                Pl(this, t)
            }
            return Cl(t, null, [{
                key: "getWebGL",
                value: function(t, n) {
                    var e;
                    try {
                        e = t.getContext("webgl", n)
                    } catch (t) {}
                    if (!e) try {
                        e = t.getContext("experimental-webgl", n)
                    } catch (t) {}
                    return e || void 0
                }
            }, {
                key: "planeVertexShader",
                value: function() {
                    return Ol
                }
            }, {
                key: "unitPlaneAttributes",
                value: function() {
                    return {
                        a_Position: new Float32Array([-1, -1, 1, -1, -1, 1, -1, 1, 1, -1, 1, 1]),
                        a_TexCoord: new Float32Array([0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1])
                    }
                }
            }, {
                key: "attach",
                value: function(t) {
                    var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : zl,
                        e = {
                            PACK_ALIGNMENT: 1,
                            UNPACK_ALIGNMENT: 1,
                            UNPACK_FLIP_Y_WEBGL: !1,
                            UNPACK_PREMULTIPLY_ALPHA_WEBGL: !1,
                            UNPACK_COLORSPACE_CONVERSION_WEBGL: t.BROWSER_DEFAULT_WEBGL
                        },
                        r = Object.keys(e),
                        i = {
                            TEXTURE_MIN_FILTER: t.NEAREST,
                            TEXTURE_MAG_FILTER: t.NEAREST,
                            TEXTURE_WRAP_S: t.CLAMP_TO_EDGE,
                            TEXTURE_WRAP_T: t.CLAMP_TO_EDGE
                        },
                        o = Object.keys(i);

                    function u(e) {
                        var r = t.getError();
                        r && n("".concat(r, ":").concat(e))
                    }
                    return new(function() {
                        function c() {
                            Pl(this, c)
                        }
                        return Cl(c, [{
                            key: "makePlaneVertexShader",
                            value: function() {
                                return this.makeShader(t.VERTEX_SHADER, Ol)
                            }
                        }, {
                            key: "unitPlaneAttributes",
                            value: function() {
                                return {
                                    a_Position: new Float32Array([-1, -1, 1, -1, -1, 1, -1, 1, 1, -1, 1, 1]),
                                    a_TexCoord: new Float32Array([0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1])
                                }
                            }
                        }, {
                            key: "makeShader",
                            value: function(e, r) {
                                var i = t.createShader(e);
                                u("createShader:".concat(e)), t.shaderSource(i, r), u("shaderSource:".concat(e)), t.compileShader(i), u("compileShader:".concat(e));
                                var o = t.getShaderParameter(i, t.COMPILE_STATUS);
                                if (u("getShaderParameter:".concat(e)), !o) {
                                    var a = t.getShaderInfoLog(i);
                                    return u("getShaderInfoLog:".concat(e)), t.deleteShader(i), u("deleteShader:".concat(e)), n(a), null
                                }
                                return i
                            }
                        }, {
                            key: "makeProgram",
                            value: function(e) {
                                var r = t.createProgram();
                                u("createProgram"), e.forEach(function(n) {
                                    t.attachShader(r, n), u("attachShader")
                                }), t.linkProgram(r), u("linkProgram");
                                var i = t.getProgramParameter(r, t.LINK_STATUS);
                                if (u("getProgramParameter"), !i) {
                                    var o = t.getProgramInfoLog(r);
                                    return u("getProgramInfoLog"), t.deleteProgram(r), u("deleteProgram"), n(o), null
                                }
                                return r
                            }
                        }, {
                            key: "makeFramebufferTexture2D",
                            value: function(n) {
                                var e = t.createFramebuffer();
                                u("createFramebuffer"), t.bindFramebuffer(t.FRAMEBUFFER, e), u("bindFramebuffer"), t.framebufferTexture2D(t.FRAMEBUFFER, t.COLOR_ATTACHMENT0, t.TEXTURE_2D, n, 0), u("framebufferTexture2D");
                                var r = t.checkFramebufferStatus(t.FRAMEBUFFER);
                                return u("checkFramebufferStatus"), r !== t.FRAMEBUFFER_COMPLETE ? (t.deleteFramebuffer(e), u("deleteFramebuffer"), callback("framebuffer: " + r), null) : e
                            }
                        }, {
                            key: "uniforms",
                            value: function(n, e) {
                                var r = {},
                                    i = t.getProgramParameter(n, t.ACTIVE_UNIFORMS);
                                return u("getProgramParameter"), a.range(i).map(function(e) {
                                    var r = t.getActiveUniform(n, e);
                                    return u("getActiveUniform:".concat(e)), r
                                }).filter(function(t) {
                                    return !!t
                                }).forEach(function(e) {
                                    var i = t.getUniformLocation(n, e.name);
                                    u("getUniformLocation:".concat(e.name)), r[e.name] = {
                                        name: e.name,
                                        type: e.type,
                                        size: e.size,
                                        location: i
                                    }
                                }), new(function() {
                                    function n() {
                                        Pl(this, n)
                                    }
                                    return Cl(n, [{
                                        key: "decls",
                                        value: function() {
                                            return r
                                        }
                                    }, {
                                        key: "set",
                                        value: function(n) {
                                            return Object.keys(n).forEach(function(i) {
                                                ! function(n, i) {
                                                    var o = r[n] || {},
                                                        a = o.location;
                                                    switch (o.type) {
                                                        case t.FLOAT:
                                                            return d.n(i) ? t.uniform1fv(a, i) : t.uniform1f(a, i);
                                                        case t.FLOAT_VEC2:
                                                            return t.uniform2fv(a, i);
                                                        case t.FLOAT_VEC3:
                                                            return t.uniform3fv(a, i);
                                                        case t.FLOAT_VEC4:
                                                            return t.uniform4fv(a, i);
                                                        case t.INT:
                                                            return d.n(i) ? t.uniform1iv(a, i) : t.uniform1i(a, i);
                                                        case t.INT_VEC2:
                                                            return t.uniform2iv(a, i);
                                                        case t.INT_VEC3:
                                                            return t.uniform3iv(a, i);
                                                        case t.INT_VEC4:
                                                            return t.uniform4iv(a, i);
                                                        case t.SAMPLER_2D:
                                                            var u = e[i];
                                                            return u ? void t.uniform1i(a, u.unit) : void Fl.warn("uniform '".concat(n, "' refers to unknown texture '").concat(i, "'"));
                                                        default:
                                                            Fl.warn("uniform '".concat(n, "' has unsupported type: ").concat(JSON.stringify(o)))
                                                    }
                                                }(i, n[i]), u("assign-uniform:".concat(i))
                                            }), this
                                        }
                                    }]), n
                                }())
                            }
                        }, {
                            key: "attribs",
                            value: function(n) {
                                var e = {},
                                    r = t.getProgramParameter(n, t.ACTIVE_ATTRIBUTES);
                                return u("getProgramParameter"), a.range(r).map(function(e) {
                                    var r = t.getActiveAttrib(n, e);
                                    return u("getActiveAttrib:".concat(e)), r
                                }).filter(function(t) {
                                    return !!t
                                }).forEach(function(r) {
                                    var i = t.getAttribLocation(n, r.name);
                                    u("getAttribLocation:".concat(r.name)), e[r.name] = {
                                        name: r.name,
                                        type: r.type,
                                        size: r.size,
                                        location: i
                                    }
                                }), new(function() {
                                    function n() {
                                        Pl(this, n)
                                    }
                                    return Cl(n, [{
                                        key: "decls",
                                        value: function() {
                                            return e
                                        }
                                    }, {
                                        key: "set",
                                        value: function(n) {
                                            return Object.keys(n).forEach(function(r) {
                                                ! function(n, r) {
                                                    var i = e[n] || {},
                                                        o = i.location;
                                                    switch (i.type) {
                                                        case t.FLOAT_VEC2:
                                                            var a = t.createBuffer();
                                                            return u("createBuffer:".concat(n)), t.bindBuffer(t.ARRAY_BUFFER, a), u("bindBuffer:".concat(n)), t.bufferData(t.ARRAY_BUFFER, r, t.STATIC_DRAW), u("bufferData:".concat(n)), t.enableVertexAttribArray(o), u("enableVertexAttribArray:".concat(n)), t.vertexAttribPointer(o, 2, t.FLOAT, !1, 0, 0);
                                                        default:
                                                            Fl.warn("attribute '".concat(n, "' has unsupported type: ").concat(JSON.stringify(i)))
                                                    }
                                                }(r, n[r]), u("assign-attrib:".concat(r))
                                            }), this
                                        }
                                    }]), n
                                }())
                            }
                        }, {
                            key: "makeTexture2D",
                            value: function(n) {
                                var a = t.createTexture();
                                u("createTexture"), t.activeTexture(t.TEXTURE0), u("activeTexture"), t.bindTexture(t.TEXTURE_2D, a), u("bindTexture");
                                var c = d.c({}, e, i, n),
                                    l = c.format,
                                    s = c.type,
                                    f = c.width,
                                    h = c.height,
                                    p = c.data;
                                return r.forEach(function(n) {
                                    t.pixelStorei(t[n], c[n]), u("pixelStorei:".concat(n))
                                }), t.texImage2D(t.TEXTURE_2D, 0, l, f, h, 0, l, s, p), u("texImage2D"), o.forEach(function(n) {
                                    t.texParameteri(t.TEXTURE_2D, t[n], c[n]), u("texParameteri:".concat(n))
                                }), t.bindTexture(t.TEXTURE_2D, null), u("bindTexture"), a
                            }
                        }, {
                            key: "updateTexture2D",
                            value: function(n, a) {
                                t.activeTexture(t.TEXTURE0), u("activeTexture"), t.bindTexture(t.TEXTURE_2D, n), u("bindTexture");
                                var c = d.c({}, e, i, a),
                                    l = c.format,
                                    s = c.type,
                                    f = c.width,
                                    h = c.height,
                                    p = c.data;
                                return r.forEach(function(n) {
                                    t.pixelStorei(t[n], c[n]), u("pixelStorei:".concat(n))
                                }), t.texSubImage2D(t.TEXTURE_2D, 0, 0, 0, f, h, l, s, p), u("texSubImage2D"), o.forEach(function(n) {
                                    t.texParameteri(t.TEXTURE_2D, t[n], c[n]), u("texParameteri:".concat(n))
                                }), t.bindTexture(t.TEXTURE_2D, null), u("bindTexture"), n
                            }
                        }, {
                            key: "updateTexture2DParams",
                            value: function(n, e, r) {
                                for (var a = !1, c = 0; c < o.length; c++) {
                                    var l = o[c],
                                        s = i[l],
                                        f = e[l] || s;
                                    f !== (r[l] || s) && (a || (a = !0, t.activeTexture(t.TEXTURE0), u("activeTexture"), t.bindTexture(t.TEXTURE_2D, n), u("bindTexture")), t.texParameteri(t.TEXTURE_2D, t[l], f), u("texParameteri:".concat(l)))
                                }
                                return a && (t.bindTexture(t.TEXTURE_2D, null), u("bindTexture")), a
                            }
                        }, {
                            key: "context",
                            get: function() {
                                return t
                            }
                        }]), c
                    }())
                }
            }]), t
        }(),
        Il = e(40),
        Dl = e(41),
        ql = function(t, n, e, r, i) {
            var o = void 0 !== n,
                u = o ? n : t,
                c = o ? t.getContext("2d") : void 0,
                l = Ll.getWebGL(u),
                s = Ll.attach(l);
            l.getExtension("OES_texture_float"), l.getExtension("OES_texture_float_linear"), l.disable(l.DEPTH_TEST), l.clearColor(0, 0, 0, 0);
            var f = s.makeShader(l.VERTEX_SHADER, Ll.planeVertexShader()),
                h = {},
                p = a.range(8).map(function() {
                    return null
                }),
                v = 1,
                m = [],
                y = null,
                g = -1,
                b = -1;

            function w(t) {
                return Object.keys(t).map(function(n) {
                    return h[n] = function(t, n) {
                        if (n) {
                            var e = n.def;
                            if (t.hash === e.hash) return s.updateTexture2DParams(n.texture, t, e) ? {
                                def: a.omit(t, "data"),
                                texture: n.texture
                            } : n;
                            if (t.width === e.width && t.height === e.height && t.format === e.format && t.type === e.type) return s.updateTexture2D(n.texture, t), {
                                def: a.omit(t, "data"),
                                texture: n.texture
                            };
                            l.deleteTexture(n.texture)
                        }
                        var r = s.makeTexture2D(t);
                        return {
                            def: a.omit(t, "data"),
                            texture: r
                        }
                    }(t[n], h[n])
                })
            }

            function _(t) {
                var n = l.getError();
                if (0 !== n) throw new Error("".concat(n, ":").concat(t))
            }

            function x() {
                var n = r();
                ! function(n) {
                    var e = Math.round(n.width * n.pixelRatio),
                        r = Math.round(n.height * n.pixelRatio);
                    e === g && r === b || (t.width = u.width = e, t.height = u.height = r, l.viewport(0, 0, e, r), g = e, b = r)
                }(n), _("fast_resize"), l.clear(l.COLOR_BUFFER_BIT), c && Sa(c), _("fast_clear");
                var x = i(s);
                if (0 === x.length) return !1;
                var T = a.flatten(x.map(function(t) {
                    return t.shaderSource()
                }));
                for (d.b(m, T) || function(t) {
                        var n = Il + t.join("") + Dl,
                            e = s.makeShader(l.FRAGMENT_SHADER, n),
                            r = s.makeProgram([f, e]);
                        s.attribs(r).set(Ll.unitPlaneAttributes()), m = t, r, y = s.uniforms(r, h), l.useProgram(r)
                    }(T), _("fast_program"), v = 1, x.forEach(function(t) {
                        w(t.textures()).forEach(function(t) {
                            var n = t.texture;
                            p[v] !== n && (p[v] = n, l.activeTexture(l.TEXTURE0 + v), l.bindTexture(l.TEXTURE_2D, n)), t.unit = v++
                        })
                    }); v < p.length;) p[v++] = null;
                return _("fast_textures"), x.forEach(function(t) {
                    return y.set(t.uniforms())
                }), y.set({
                    u_Detail: n.pixelRatio,
                    u_Alpha: e()
                }), _("fast_uniforms"), l.drawArrays(l.TRIANGLES, 0, 6), _("fast_draw"), o && c.drawImage(u, 0, 0), !0
            }
            return {
                draw: function() {
                    try {
                        var t = x();
                        return _("fast_done"), {
                            pass: t
                        }
                    } catch (t) {
                        return {
                            pass: !1,
                            err: t.toString()
                        }
                    }
                }
            }
        },
        Ul = 300,
        Hl = 300,
        Gl = 1,
        Xl = Ma(Ul / 2, 0, 0, Ul / 2, Ul / 2),
        Wl = iu({
            start: 0,
            delta: 120,
            size: 3
        }, {
            start: 60,
            delta: -60,
            size: 3
        }),
        Bl = new Float32Array([1, 0, 2, 0, 3, 0, 4, 0, 5, 0, 8, 0, 6, 0, 8, 0, 7e37, 7e37]),
        Vl = du(Wl, Bl),
        $l = Dc([0, 7], [
            [0, [255, 255, 255]],
            [1, [0, 0, 255]],
            [2, [0, 255, 0]],
            [3, [0, 255, 255]],
            [4, [255, 0, 0]],
            [5, [255, 0, 255]],
            [6, [255, 255, 0]],
            [7, [255, 255, 255]]
        ], 8);
    var Yl = ml({
        hd: void 0,
        topology: void 0
    });

    function Kl(t) {
        return function(t) {
            if (Array.isArray(t)) {
                for (var n = 0, e = new Array(t.length); n < t.length; n++) e[n] = t[n];
                return e
            }
        }(t) || function(t) {
            if (Symbol.iterator in Object(t) || "[object Arguments]" === Object.prototype.toString.call(t)) return Array.from(t)
        }(t) || function() {
            throw new TypeError("Invalid attempt to spread non-iterable instance")
        }()
    }

    function Jl(t, n) {
        return function(t) {
            if (Array.isArray(t)) return t
        }(t) || function(t, n) {
            var e = [],
                r = !0,
                i = !1,
                o = void 0;
            try {
                for (var a, u = t[Symbol.iterator](); !(r = (a = u.next()).done) && (e.push(a.value), !n || e.length !== n); r = !0);
            } catch (t) {
                i = !0, o = t
            } finally {
                try {
                    r || null == u.return || u.return()
                } finally {
                    if (i) throw o
                }
            }
            return e
        }(t, n) || function() {
            throw new TypeError("Invalid attempt to destructure non-iterable instance")
        }()
    }

    function Zl(t) {
        var n = t.log,
            e = t.bridge;
        n.debug("start...");
        var u, c, l, s, f = 150,
            m = 10,
            y = 6,
            b = 750,
            w = 10,
            _ = 1,
            x = 7,
            T = .75,
            k = 40,
            M = [7e37, 7e37, 7e37],
            E = [7e37, 7e37, 0],
            S = [0, 0, 0, 0],
            A = d.F(),
            j = (u = p.a("#status"), c = p.a("#progress"), l = "▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫".length, s = d.d(e, "showMessage") || function(t) {
                u.text(t)
            }, {
                status: function(t) {
                    return u.classed("bad") ? u : s(t, !1)
                },
                error: function(t, e) {
                    var r = t.status ? "".concat(t.status, " ").concat(t.message) : t.message || t;
                    switch (t.status) {
                        case -1:
                            r = "Server Down";
                            break;
                        case 404:
                            r = "No Data"
                    }
                    e && n.error("context", e + ""), n.error("error", t), t.stack && n.error("stack", t.stack), u.classed("bad", !0), s(r, !0)
                },
                reset: function() {
                    u.classed("bad", !1), s("", !1)
                },
                progress: d.d(e, "showProgress") || function(t) {
                    if (0 <= t && t < 100) {
                        var n = Math.ceil(t / 100 * l),
                            e = "▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪".substr(0, n) + "▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫".substr(0, l - n);
                        return c.classed("invisible", !1).text(e)
                    }
                    return c.classed("invisible", !0).text("")
                }
            });

        function N(t, n) {
            return function(t) {
                var n = t.name,
                    e = t.initial,
                    r = t.events,
                    i = (void 0 === r ? [] : r).concat(["submit", "update", "reject", "fail"]),
                    o = h.apply(void 0, i);

                function u() {
                    return function t() {
                        return t.requested = !0, s
                    }
                }
                var c = e,
                    l = a.debounce(function(t, n) {
                        var e;

                        function r(t) {
                            o.call("fail", null, t, s)
                        }
                        try {
                            e = n[0], Promise.all(a.tail(n)).then(function(n) {
                                return t.requested ? null : a.isFunction(e) ? e.apply(s, n) : e
                            }).then(function(n) {
                                t.requested || (c = n, o.call("update", null, n, s))
                            }, function(n) {
                                t.requested || o.call("reject", null, n, s)
                            }).catch(r), o.call("submit", null, s)
                        } catch (t) {
                            r(t)
                        }
                    }, 0),
                    s = d.c(o, {
                        value: function() {
                            return c
                        },
                        cancel: u(),
                        submit: function(t, n, e, r) {
                            return this.cancel(), l(this.cancel = u(), arguments), this
                        },
                        toString: function() {
                            return n
                        }
                    });
                return s
            }({
                name: t,
                events: n
            }).on("reject.affects-report fail.affects-report", j.error)
        }
        var O = function() {
                var t, n = h("moveStart", "move", "moveEnd", "click"),
                    e = null,
                    r = {
                        time: 0,
                        mouse: [0, 0]
                    };

                function i(n, e) {
                    return {
                        type: "click",
                        startMouse: n,
                        startScale: e,
                        manipulator: t.manipulator(n, e)
                    }
                }

                function a() {
                    e = e || i(g(this), t.projection.scale())
                }

                function u() {
                    var r = v.c.transform || {},
                        a = g(this),
                        u = d.f(r.k, t.projection.scale());
                    if ("click" === (e = e || i(a, 1)).type) {
                        var c = Object(o.b)(a, e.startMouse);
                        if (u === e.startScale && (c < y || isNaN(c))) return;
                        n.call("moveStart"), e.type = "drag"
                    }(u !== e.startScale || isNaN(a[0])) && (e.type = "zoom"), e.manipulator.move("zoom" === e.type ? null : a, u), n.call("move")
                }

                function c() {
                    null !== e && (e.manipulator.end(), "click" === e.type ? (Date.now() - r.time > 500 || Object(o.b)(r.mouse, e.startMouse) >= y) && (n.call("click", null, e.startMouse, t.projection.invert(e.startMouse) || []), r = {
                        time: Date.now(),
                        mouse: e.startMouse
                    }) : s(), e = null)
                }
                var l = null;

                function s() {
                    l && clearTimeout(l), l = setTimeout(function() {
                        l = null, (!e || "drag" !== e.type && "zoom" !== e.type) && (wl.save({
                            orientation: t.orientation()
                        }, {
                            source: "moveEnd"
                        }), n.call("moveEnd"))
                    }, b)
                }
                var f = jn().on("start", a).on("zoom", u).on("end", c),
                    m = zn().on("start", a).on("drag", u).on("end", c),
                    w = p.a("#display");
                d.s() ? w.on("click", function() {
                    a.call(this), c.call(this)
                }) : d.q() && !d.u() ? w.call(m) : w.call(f).on("wheel", function() {
                    return v.c.preventDefault()
                });

                function _(e, r) {
                    var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
                    t && "moveEnd" !== i.source && (n.call("moveStart"), t.orientation(wl.get("orientation"), A), f.transform(w, wn.scale(t.projection.scale())), n.call("moveEnd"))
                }
                return p.a("#show-location").on("click", function() {
                    navigator.geolocation && (j.status("Finding current position..."), navigator.geolocation.getCurrentPosition(function(t) {
                        j.status(""), G(t.coords.longitude, t.coords.latitude)
                    }, j.error))
                }), wl.on("change:orientation.?", _), d.c(n, {
                    globe: function(n) {
                        return n && (t = n, f.scaleExtent(t.scaleExtent()), _()), n ? this : t
                    },
                    cancelMove: function() {
                        c()
                    },
                    hotkey: function(e, r) {
                        if ("zoom" === e) return f.scaleBy(w, r);
                        l || n.call("moveStart");
                        var i = t.projection,
                            o = i.rotate(),
                            a = r / 8;
                        switch (e) {
                            case "left":
                                i.rotate([o[0] + a, o[1]]);
                                break;
                            case "right":
                                i.rotate([o[0] - a, o[1]]);
                                break;
                            case "up":
                                i.rotate([o[0], o[1] - a]);
                                break;
                            case "down":
                                i.rotate([o[0], o[1] + a])
                        }
                        n.call("move"), s()
                    }
                })
            }(),
            P = N("mesh"),
            R = N("globe"),
            C = N("grid"),
            F = N("renderer", ["start", "render", "redraw"]),
            z = N("field"),
            L = N("fastoverlay"),
            I = N("animator"),
            D = N("overlay"),
            q = N("overlayGrid"),
            U = N("button");

        function H(t) {
            var n = R.value();
            if (n) {
                var e = n.locate(t);
                e && (n.projection.rotate(e), wl.save({
                    orientation: n.orientation()
                }))
            }
        }

        function G(t, n) {
            var e = +t,
                r = +n,
                i = [e, r];
            e == e && r == r ? (ut(null, i), H(i)) : ct()
        }

        function X(t) {
            var e = this.cancel;
            j.status("Downloading...");
            var r = [];
            return r.push(Ou(t)), "tara" === d.C() && (r.push(Ou(Du("tara-plan-20170829.json"))), r.push(Ou(Du("tara-track.json")))), Promise.all(r).then(function(t) {
                var r = Jl(t, 3),
                    i = r[0],
                    o = r[1],
                    a = r[2];
                if (e.requested) return null;
                n.time("building meshes");
                var u = i.objects,
                    c = yr(i, d.v() ? u.coastline_tiny : u.coastline_110m),
                    l = yr(i, d.v() ? u.coastline_110m : u.coastline_50m),
                    s = yr(i, d.v() ? u.lakes_tiny : u.lakes_110m),
                    f = yr(i, d.v() ? u.lakes_110m : u.lakes_50m),
                    h = yr(i, d.v() ? u.rivers_tiny : u.rivers_110m),
                    p = yr(i, d.v() ? u.rivers_110m : u.rivers_50m);
                return n.timeEnd("building meshes"), {
                    coastLo: c,
                    coastHi: l,
                    lakesLo: s,
                    lakesHi: f,
                    riversLo: h,
                    riversHi: p,
                    tara: {
                        plan: o,
                        track: a
                    }
                }
            })
        }

        function W(t) {
            var n = r[t];
            return n ? n(A) : Promise.reject("Unknown projection: " + t)
        }
        var B = 0,
            V = NaN;

        function $(t) {
            j.status("Downloading..."), n.time("build grids");
            var e = this.cancel;
            B++;
            var r = Object(d.H)(wl.getAll(), Yl.getAll());
            return Promise.all(hl.productsFor(r)).then(function(n) {
                return function(t, n) {
                    return Fu(t.map(function(t) {
                        return {
                            product: t,
                            paths: t.paths
                        }
                    }), n)
                }(n, e).then(function(n) {
                    return {
                        primaryGrid: n[0],
                        overlayGrid: n[1] || n[0],
                        isNewPrimaryGrid: t
                    }
                }).catch(function(e) {
                    return j.error(e), {
                        primaryGrid: n[1] || n[0],
                        overlayGrid: n[1] || n[0],
                        isNewPrimaryGrid: t
                    }
                })
            }).finally(function() {
                B--, n.timeEnd("build grids"), clearInterval(V), V = "current" === wl.get("date") ? setInterval(function() {
                    return C.submit($, !0)
                }, 60 * i.b) : NaN
            })
        }

        function Y(t) {
            if (B > 0) n.debug("Download in progress--ignoring nav request.");
            else {
                var e = C.value().overlayGrid.navigate(t);
                e && wl.save(d.g(e))
            }
        }

        function K(t, e) {
            if (!t || !e) return null;
            j.status("Rendering Globe..."), n.time("rendering map");
            var r = p.a("#map").node().getContext("2d"),
                i = p.a("#foreground").node().getContext("2d"),
                o = p.a("#annotation"),
                u = wl.get("orientation");
            d.A(o.node()), e.orientation(u, A);
            var c = hr().projection(e.projection).pointRadius(function(t) {
                return t.size || 7
            });
            "tara" === d.C() && function(t, n, e) {
                var r = t.append("g"),
                    i = {
                        type: "LineString",
                        coordinates: n.plan.coordinates.filter(function(t, n) {
                            return n > 253
                        })
                    };
                r.append("path").attr("class", "tara-route tara-plan").datum(i);
                var o = n.track.geometries;
                o = o.filter(function(t, n) {
                    return n > o.length - 10 || n % 3 == 0
                });
                var u = {
                        type: "LineString",
                        coordinates: a.map(o, a.property("coordinates"))
                    },
                    c = {
                        type: "LineString",
                        coordinates: u.coordinates.slice(0, 3400)
                    },
                    l = {
                        type: "LineString",
                        coordinates: u.coordinates.slice(3400)
                    };
                r.append("path").attr("class", "tara-route tara-track-border").datum(u), r.append("path").attr("class", "tara-route tara-track-old").datum(c), r.append("path").attr("class", "tara-route tara-track").datum(l);
                var s = {
                    type: "Point",
                    coordinates: a.last(u.coordinates),
                    size: 4
                };
                "" !== e && ",," !== e.substr(0, 2) || H(s.coordinates), r.append("path").attr("class", "tara-loc").datum(s);
                var f = a.last(o),
                    h = {
                        date: f.date,
                        heading: +d.f(f.heading, NaN),
                        speed: 3.6 * +d.f(f.speed, NaN),
                        air_temp: +d.f(f.air_temp, NaN),
                        water_temp: +d.f(f.water_temp, NaN),
                        pressure: +d.f(f.pressure, NaN)
                    },
                    v = {
                        date: wr.g(wr.c(h.date), "{yyyy}-{MM}-{dd} {hh}:{mm}"),
                        heading: isNaN(h.heading) ? "N/A" : h.heading.toFixed(0),
                        speed: isNaN(h.speed) ? "N/A" : h.speed.toFixed(1),
                        air_temp: isNaN(h.air_temp) ? "N/A" : h.air_temp.toFixed(1),
                        water_temp: isNaN(h.water_temp) ? "N/A" : h.water_temp.toFixed(1),
                        pressure: isNaN(h.pressure) ? "N/A" : h.pressure.toFixed(0)
                    },
                    m = p.a("#tara-stats");
                m.selectAll("*").remove(), m.append("p").text("Tara stats:"), m.append("p").classed("stat", !0).text(v.heading + "° @ " + v.speed + " km/h"), m.append("p").classed("stat", !0).text(v.air_temp + " °C (air)"), m.append("p").classed("stat", !0).text(v.water_temp + " °C (water)"), m.append("p").classed("stat", !0).text(v.pressure + " hPa"), m.append("p").text(v.date), m.selectAll(".stat").attr("style", "padding-left: 1em"), m.classed("invisible", !1)
            }(o, t.tara, u), at();
            var l = 5,
                s = a.throttle(function t() {
                    o.selectAll("path").attr("d", c);
                    k(!1);
                    F.call("redraw");
                    s = a.throttle(t, l, {
                        leading: !1
                    })
                }, l, {
                    leading: !1
                }),
                f = e.backgroundRenderer(),
                h = e.graticuleRenderer(),
                v = ja(t.coastLo, {
                    strokeStyle: "#ffffff",
                    lineWidth: 1.25
                }),
                m = ja(t.lakesLo, {
                    strokeStyle: "#ffffff",
                    lineWidth: 1.25
                }),
                y = ja(t.riversLo, {
                    strokeStyle: "#808080",
                    lineWidth: 1.25
                }),
                g = ja(t.coastHi, {
                    strokeStyle: "#ffffff",
                    lineWidth: 1.25
                }),
                b = ja(t.lakesHi, {
                    strokeStyle: "#ffffff",
                    lineWidth: 1.25
                }),
                w = ja(t.riversHi, {
                    strokeStyle: "#808080",
                    lineWidth: 1.25
                }),
                _ = Na([f, h, v, m, y]),
                x = Na([f, h, g, b, w]),
                T = Na([e.foregroundRenderer()]);

            function k(t) {
                (t ? x : _).renderTo(r, c), T.renderTo(i, c), c.context(null)
            }
            return O.on("moveStart.renderer", function() {
                F.call("start")
            }), O.on("move.renderer", function() {
                s()
            }), O.on("moveEnd.renderer", function() {
                o.selectAll("path").attr("d", c), k(!0), F.call("render")
            }), Promise.resolve().then(function() {
                O.globe(e)
            }).catch(j.error), n.timeEnd("rendering map"), "ready"
        }

        function J(t) {
            if (!t) return null;
            n.time("render mask");
            var e = A.width,
                r = A.height,
                i = p.a(document.createElement("canvas")).attr("width", e).attr("height", r).node(),
                o = t.defineMask(i.getContext("2d"));
            o.fillStyle = "rgba(255, 0, 0, 1)", o.fill();
            var u = o.createImageData(e, r),
                c = u.data;
            return function(t, n) {
                if (a.isFunction(t.set)) t.set(n);
                else
                    for (var e = 0; e < n.length; e++) t[e] = n[e]
            }(c, o.getImageData(0, 0, e, r).data), n.timeEnd("render mask"), {
                imageData: u,
                isVisible: function(t, n) {
                    return c[4 * (n * e + t) + 3] > 0
                },
                set: function(t, n, r) {
                    var i = 4 * (n * e + t);
                    return c[i] = r[0], c[i + 1] = r[1], c[i + 2] = r[2], c[i + 3] = r[3], this
                }
            }
        }

        function Z(t, n, e, r, i, o, a) {
            var u = a[0] * o,
                c = a[1] * o,
                l = d.i(t, n, e, r, i);
            return a[0] = l[0] * u + l[2] * c, a[1] = l[1] * u + l[3] * c, a
        }
        var Q = !1;

        function tt(t, e) {
            if (!t || !e || !F.value()) return null;
            var r = L.value(),
                i = void 0 !== r && r.draw() || {
                    pass: !1
                },
                o = i.pass;
            if (i.err && !Q) {
                Q = !0;
                var a = JSON.stringify(i);
                n.debug("fastoverlay failure: ".concat(a)), window.ga("send", "event", "gl", a)
            }
            var u = J(t),
                c = e.primaryGrid,
                l = e.overlayGrid,
                s = c !== l;
            if (!c.field || !l.field) return null;
            var h = c.field(),
                p = l.field(),
                v = h.bilinear,
                y = p.bilinear;
            n.time("interpolating field");
            var g = this.cancel,
                b = t.optimizedProjection(),
                w = b.invert.bind(b),
                _ = t.bounds(A),
                x = c.particles.velocityScale,
                T = [],
                k = [],
                N = _.y,
                O = l.scale,
                P = Yl.get("hd"),
                R = P ? 1 : 2;

            function C(t) {
                for (var n = t === _.yMax, e = new Float32Array(3 * _.width), r = _.x, i = 0; r <= _.xMax; r += R, i += 3 * R) {
                    var a = r === _.xMax,
                        c = M;
                    if (u.isVisible(r, t)) {
                        k[0] = r, k[1] = t;
                        var f = w(k),
                            p = S;
                        if (f) {
                            var m = f[0],
                                g = f[1];
                            if (m == m) {
                                var A = (c = v(f))[2];
                                A < 7e37 ? A = (c = Z(b, m, g, r, t, x, c))[2] : c = E, o || ((s || "scalar" === h.type) && (A = d.B(y(f))), A < 7e37 && ((p = O.rgba(A))[3] = l.alpha.animated))
                            }
                        }
                        u.set(r, t, p), P || (a || (u.set(r + 1, t, p), n || u.set(r + 1, t + 1, p)), n || u.set(r, t + 1, p))
                    }
                    e[i] = c[0], e[i + 1] = c[1], e[i + 2] = c[2], P || a || (e[i + 3] = c[0], e[i + 4] = c[1], e[i + 5] = c[2])
                }
                T[t] = e, P || (T[t + 1] = e)
            }
            return j.status(""), j.progress(0), new Promise(function(t, e) {
                ! function r() {
                    try {
                        if (!g.requested)
                            for (var i = Date.now(); N <= _.yMax;)
                                if (C(N), N += R, Date.now() - i > f) return j.progress(Math.round((N - _.y) / (_.yMax - _.y) * 100)), void setTimeout(r, m);
                        t(function(t, n, e) {
                            var r = e.x,
                                i = {
                                    move: function(n, e, i, o) {
                                        var a = Math.round(e);
                                        if (0 <= a && a < t.length) {
                                            var u = t[a],
                                                c = 3 * (Math.round(n) - r);
                                            if (u && 0 <= c && c < u.length) return i[o] = n, i[o + 1] = e, i[o + 2] = u[c], i[o + 3] = u[c + 1], void(i[o + 4] = u[c + 2])
                                        }
                                        i[o] = n, i[o + 1] = e, i[o + 2] = 7e37, i[o + 3] = 7e37, i[o + 4] = 7e37
                                    },
                                    isDefined: function(n, e) {
                                        var i = Math.round(e);
                                        if (0 <= i && i < t.length) {
                                            var o = t[i],
                                                a = 3 * (Math.round(n) - r);
                                            if (o && 0 <= a && a < o.length) return o[a] < 7e37
                                        }
                                        return !1
                                    },
                                    isInsideBoundary: function(t, n) {
                                        var e = new Float32Array(5);
                                        return i.move(t, n, e, 0), e[4] < 7e37
                                    }
                                };
                            return i.overlay = n.imageData, i
                        }(T, u, _))
                    } catch (t) {
                        e(t)
                    }
                    j.progress(100), n.timeEnd("interpolating field")
                }()
            })
        }

        function nt(t, e) {
            if (!(t && z.value() && e && wl.get("animate"))) return !1;
            e.isNewPrimaryGrid && Aa(p.a("#animation").node());
            var r = this.cancel,
                o = t.bounds(A),
                u = d.G(w, e.primaryGrid.particles.maxIntensity),
                c = Math.round(o.width * x);
            d.v() && (c = Math.floor(c * T)), n.debug("particle count: %s", c);
            var l, s, f = new Float32Array(5 * c),
                h = new Int32Array(c),
                v = u.map(function() {
                    return new Float32Array(4 * c)
                }),
                m = new Int32Array(v.length),
                y = o.x,
                g = o.y,
                b = o.width,
                M = o.height,
                E = t.projection.scale();

            function S(t, n) {
                var e = y + Math.random() * b,
                    r = g + Math.random() * M;
                n.move(e, r, f, t)
            }

            function j(t, n) {
                for (var e = 0; e < 10; e++)
                    if (S(t, n), f[t + 2] < 7e37) return
            }
            var N = p.a("#animation").node().getContext("2d");
            e.primaryGrid.particles.waves ? (l = 40, s = function() {
                for (var t = z.value(), n = 600 / E * Math.pow(Math.log(E) / Math.log(600), 2.5), e = 0; e < m.length; e++) m[e] = 0;
                for (var r = 0, i = 0; r < c; r += 1, i += 5) {
                    ++h[r] >= l && (h[r] = 0, S(i, t));
                    var o = f[i],
                        a = f[i + 1],
                        s = f[i + 2],
                        d = f[i + 3],
                        p = o + s * n,
                        y = a + d * n,
                        g = f[i + 4];
                    if (g == g && t.isDefined(p, y)) {
                        f[i] = p, f[i + 1] = y;
                        var b = Math.sqrt(s * s + d * d) / 2.5;
                        s /= b, d /= b;
                        var w = u.indexFor(g * R[h[r]]),
                            _ = 4 * m[w]++,
                            x = v[w];
                        x[_] = o - d, x[_ + 1] = a + s, x[_ + 2] = o + d, x[_ + 3] = a - s
                    } else h[r] = l
                }
            }, N.fillStyle = "rgba(0, 0, 0, 0.90)") : (l = 100, s = function() {
                for (var t = z.value(), n = 0; n < m.length; n++) m[n] = 0;
                for (var e = 0, r = 0; e < c; e += 1, r += 5) {
                    ++h[e] >= l && (h[e] = 0, S(r, t));
                    var i = f[r],
                        o = f[r + 1],
                        a = i + f[r + 2],
                        s = o + f[r + 3],
                        d = f[r + 4];
                    if (a < 7e37) {
                        t.move(a, s, f, r);
                        var p = f[r + 2];
                        if (p < 7e37) {
                            var y = u.indexFor(d),
                                g = 4 * m[y]++,
                                b = v[y];
                            b[g] = i, b[g + 1] = o, b[g + 2] = a, b[g + 3] = s
                        } else h[e] = l
                    } else h[e] = l
                }
            }, N.fillStyle = d.r() ? "rgba(0, 0, 0, 0.95)" : "rgba(0, 0, 0, 0.97)"), N.lineWidth = _;
            for (var O = 0, P = 0; O < c; O += 1, P += 5) h[O] = a.random(0, l), j(P, z.value());
            for (var R = new Float32Array(l), C = 0; C < R.length; C++) R[C] = Math.sin(-i.d / 2 + C / 7) / 2 + .5;

            function F() {
                return !r.requested && (s(), function() {
                    N.globalCompositeOperation = "destination-in", N.fillRect(o.x, o.y, o.width, o.height), N.globalCompositeOperation = "source-over";
                    for (var t = 0; t < v.length; t++) {
                        var n = v[t],
                            e = 4 * m[t];
                        if (e > 0) {
                            N.beginPath(), N.strokeStyle = u[t];
                            for (var r = 0; r < e; r += 4) N.moveTo(n[r], n[r + 1]), N.lineTo(n[r + 2], n[r + 3]);
                            N.stroke()
                        }
                    }
                }(), setTimeout(F, k), !0)
            }
            return F(), {
                frame: F
            }
        }

        function et(t, n, e) {
            if (n && e && wl.get("showGridPoints")) {
                t.fillStyle = "rgba(255, 255, 255, 0.75)";
                var r = A.width,
                    i = A.height,
                    a = e.projection.stream({
                        point: function(n, e) {
                            0 <= n && n < r && 0 <= e && e < i && t.fillRect(Math.round(n), Math.round(e), 1, 1)
                        }
                    }),
                    u = this.cancel,
                    c = n.grid(),
                    l = n.field().valueAt,
                    s = 0;
                ! function t() {
                    if (!u.requested) {
                        var n = Date.now() + f / 4;
                        (s = c.forEach(function(t, e, r) {
                            return d.B(l(r)) < 7e37 && (t = Object(o.c)(180 + t, 360) - 180, a.point(t, e)), Date.now() > n
                        }, s)) == s && setTimeout(t, m)
                    }
                }()
            }
        }

        function rt(t, n, e) {
            if (t && F.value()) {
                var r = p.a("#overlay").node().getContext("2d"),
                    i = (C.value() || {}).overlayGrid;
                if (Sa(r), Aa(p.a("#scale").node()), n && ("off" !== n && (e || function(t, n) {
                        for (var e = 3; e < t.length; e += 4) 0 !== t[e] && (t[e] = n)
                    }(t.overlay.data, i.alpha.single), r.putImageData(t.overlay, 0, 0)), q.submit(et, r, i, R.value())), i) {
                    for (var o = p.a("#scale"), a = o.node(), u = a.getContext("2d"), c = a.width - 1, l = i.scale, s = l.colors, f = s.length / 4 - 1, h = 0; h < a.width; h++) {
                        var v = 4 * Math.round(h / c * f);
                        u.fillStyle = "rgb(".concat(s[v], ",").concat(s[v + 1], ",").concat(s[v + 2], ")"), u.fillRect(h, 0, 1, a.height)
                    }
                    o.on("mousemove", function() {
                        var t = Math.floor(g(this)[0]);
                        if (t < 0 || c < t) return o.attr("title", null);
                        var n = Math.round(t / c * f),
                            e = l.valueFor(n),
                            r = ot("wind" === i.type ? "#location-wind-units" : "#location-value-units", i).value();
                        o.attr("title", d.k(e, r) + " " + (r.tooltip || r.label))
                    })
                }
            }
        }

        function it(t) {
            var n = function(t) {
                    if (t) return t.overlayGrid.date();
                    var n = wl.get("date");
                    return "current" === n ? null : a.clone(n)
                }(t),
                e = p.a("#data-date").classed("local"),
                r = "";
            return n && (r = wr.g((e ? wr.c : wr.f)(wr.b(n)), "{yyyy}-{MM}-{dd} {hh}:{mm}"), Sl(n)), p.a("#data-date").text(r + " " + (e ? "Local" : "UTC")), p.a("#toggle-zone").text("⇄ " + (e ? "UTC" : "Local")), n
        }

        function ot(t, n) {
            var e = n.units,
                r = n.type,
                i = e.length;

            function o() {
                return JSON.parse(p.a(t).attr("data-index") || "{}")
            }

            function a(t) {
                return +t[r] || 0
            }
            return {
                value: function() {
                    return e[a(o())]
                },
                next: function() {
                    var n = o();
                    n[r] = (a(n) + 1) % i, p.a(t).attr("data-index", JSON.stringify(n))
                }
            }
        }

        function at() {
            dr(".location").text(""), p.a("#location-close").classed("invisible", !0);
            var t = wl.get("loc") || [],
                n = +t[0],
                r = +t[1];
            if (n != n || r != r) return p.a(".location-mark").remove(), void(e.showLocationDetails && e.showLocationDetails("", "{}"));
            var i = C.value(),
                o = z.value(),
                u = R.value();
            if (i && o && u) {
                var c = i.primaryGrid,
                    l = i.overlayGrid,
                    s = {},
                    f = d.j(n, r);
                p.a("#location-coord").text(f), p.a("#location-close").classed("invisible", !1);
                var h, v, m = c.interpolate([n, r]);
                d.n(m) ? (v = c, (h = m)[0] < 7e37 && (function t(n, e) {
                    var r = ot("#location-wind-units", e),
                        i = r.value();
                    p.a("#location-wind").text(d.l(n, i)), p.a("#location-wind-units").html(i.label).on("click", function() {
                        r.next(), t(n, e)
                    })
                }(h, v), s[v.type] = a.object(v.units.map(function(t) {
                    return [t.label, d.l(h, t)]
                })))) : b(m, c), b(l !== c ? d.B(l.interpolate([n, r])) : 7e37, l);
                var y = hr().projection(u.projection).pointRadius(7),
                    g = p.a(".location-mark");
                g.node() || (g = p.a("#annotation").append("path").attr("class", "location-mark")), g.datum({
                    type: "Point",
                    coordinates: [n, r]
                }).attr("d", y), e.showLocationDetails && e.showLocationDetails(f, JSON.stringify(s))
            }

            function b(t, n) {
                t < 7e37 && (! function t(n, e) {
                    var r = ot("#location-value-units", e),
                        i = r.value();
                    p.a("#location-value").text(d.k(n, i)), p.a("#location-value-units").html(i.label).on("click", function() {
                        r.next(), t(n, e)
                    })
                }(t, n), s[n.type] = a.object(n.units.map(function(n) {
                    return [n.label, d.k(t, n)]
                })))
            }
        }

        function ut(t, n) {
            var e = +n[0],
                r = +n[1],
                i = z.value();
            t && i && !i.isInsideBoundary(t[0], t[1]) || e == e && r == r && wl.save({
                loc: [e, r]
            })
        }

        function ct() {
            wl.save({
                loc: null
            })
        }

        function lt(t) {
            I.value() && I.submit(!1), t && Aa(p.a("#animation").node())
        }

        function st(t, n, e) {
            e = e || [n], p.a(t).on("click", function() {
                    p.a(t).classed("disabled") || wl.save(n)
                }),
                function(t, n) {
                    wl.on("change.?", function() {
                        var e = wl.getAll(),
                            r = !1;
                        n.forEach(function(t) {
                            r |= a.isEqual(a.pick(e, Object.keys(t)), t)
                        }), p.a(t).classed("highlighted", r)
                    })
                }(t, e)
        }

        function ft(t) {
            a.isFunction(window.ga) && window.ga("send", "event", "sponsor", t)
        }

        function ht() {
            var t = window.devicePixelRatio || 1;
            dr(".fill-screen").attr("width", A.width).attr("height", A.height), dr(".max-screen").style("width", "".concat(A.width, "px")).style("height", "".concat(A.height, "px")).attr("width", A.width * t).attr("height", A.height * t).each(function() {
                this.getContext("2d").scale(t, t)
            })
        }

        function dt(t) {
            var n = wl.get("param");
            return ("space" === n || "space" !== t) && ("space" === n && "space" !== t || wl.get("animate"))
        }

        function pt() {
            return (C.value() || {}).overlayGrid
        }
        Promise.resolve().then(function() {
            j.status("Initializing..."), p.a("#sponsor-link").attr("target", d.q() && "tara" !== d.C() ? "_new" : null).on("click", function() {
                    return ft("click")
                }).on("contextmenu", function() {
                    return ft("right-click")
                }), p.a("#sponsor-hide").on("click", function() {
                    p.a("#sponsor").classed("invisible", !0)
                }), p.a("#notice-hide").on("click", function() {
                    p.a("#notice").classed("invisible", !0)
                }), p.a("#show-settings").on("click", function() {
                    p.a("#settings-wrap").classed("invisible", !1), p.a("#menu").classed("invisible") || Zl.click("show-menu")
                }), p.a("#settings-hide").on("click", function() {
                    p.a("#settings-wrap").classed("invisible", !0)
                }), p.a("#show-calendar").on("click", function() {
                    var t = p.a("#calendar-wrapper").classed("invisible");
                    p.a("#calendar-wrapper").classed("invisible", !t), t && !p.a("#menu").classed("invisible") && Zl.click("show-menu")
                }), p.a("#calendar-hide").on("click", function() {
                    p.a("#calendar-wrapper").classed("invisible", !0)
                }),
                function() {
                    var t = p.a("html").attr("lang");
                    p.a("#settings").selectAll("a[lang='" + t + "']").classed("highlighted", !0);
                    var n = function(t) {
                        for (var n = function(t) {
                                return t.languages || [t.language || t.userLanguage || "en"]
                            }(t), e = 0; e < n.length; e++) {
                            var r = jl(Al(n[e]));
                            if (r) return r
                        }
                        return ""
                    }(window.navigator);
                    n !== t && p.a("#tools").select("a[lang='" + n + "']").classed("invisible", !1)
                }(), ht();
            var t = p.a("#scale-label").node();

            function i() {
                dr("a[lang]").attr("href", function() {
                    var t = p.a(this),
                        n = t.attr("data-link");
                    return n ? "".concat(n).concat(d.u() ? "?kiosk" : "").concat(window.location.hash) : t.attr("href")
                })
            }
            p.a("#scale").attr("width", Math.round(.95 * (p.a("#menu").node().offsetWidth - t.offsetWidth))).attr("height", Math.round(t.offsetHeight / 2)), p.a("#show-menu").on("click", function() {
                if (d.q() && !d.u() && "tara" !== d.C()) window.open("https://earth.nullschool.net/" + window.location.hash, "_blank");
                else {
                    var t = p.a("#menu").classed("invisible");
                    p.a("#menu").classed("invisible", !t), t && a.isFunction(window.ga) && window.ga("send", "event", "menu", "open")
                }
            }), "ontouchstart" in document.documentElement ? p.a(document).on("touchstart", function() {}) : p.a(document.documentElement).classed("no-touch", !0), i(), p.a(window).on("hashchange.affects-lang", function() {
                n.debug("hashchange"), i()
            }), wl.on("change.?", function() {
                j.reset(), U.submit(function() {
                    var t = [],
                        n = [];
                    dr(".highlighted").each(function() {
                        t.push(this.id)
                    }), dr(".disabled").each(function() {
                        n.push(this.id)
                    }), e.buttonStateChange && e.buttonStateChange(JSON.stringify(t), JSON.stringify(n))
                })
            });
            var o = !0;

            function u() {
                F.submit(K, P.value(), R.value())
            }

            function c() {
                z.submit(tt, R.value(), C.value())
            }
            wl.on("change.?", function(t) {
                    if (!a.isFunction(window.ga) || o) return o = !1;
                    var n = wl.getAll();
                    a.has(t, "projection") && window.ga("send", "event", "projection", n.projection), a.has(t, "overlayType") && window.ga("send", "event", "overlay", n.overlayType), (a.has(t, "param") || a.has(t, "surface") || a.has(t, "level")) && window.ga("send", "event", "layer", [n.param, n.surface, n.level].join("-"))
                }), Yl.on("change:topology.?", function(t) {
                    P.submit(X, t)
                }), Yl.on("change:hd.?", function() {
                    C.submit($, !0)
                }), wl.on("change:projection.?", function(t) {
                    R.submit(W, t)
                }), wl.on("change.?", function(t) {
                    var n = Object.keys(t),
                        e = !1,
                        r = !1;
                    a.intersection(n, ["date", "param", "surface", "level"]).length > 0 && (e = !0, r = !0);
                    var i = wl.get("overlayType") || "default";
                    if (a.indexOf(n, "overlayType") >= 0 && "off" !== i) {
                        var o = C.value() || {},
                            u = o.primaryGrid,
                            c = o.overlayGrid;
                        c && (c.type === i || "default" === i && u === c) || (e = !0)
                    }
                    e && C.submit($, r)
                }), C.on("update.affects-grid", function(t) {
                    ! function(t) {
                        var n = it(t),
                            r = "",
                            i = "";
                        if (t) {
                            var o = d.D(),
                                a = t.primaryGrid.descriptionHTML(o),
                                u = t.overlayGrid.descriptionHTML(o);
                            r = u.name + u.qualifier, t.primaryGrid !== t.overlayGrid && (r = (a.qualifier === u.qualifier ? a.name : a.name + a.qualifier) + " + " + r), i = t.overlayGrid.sourceHTML || ""
                        }
                        p.a("#data-layer").html(r), p.a("#data-center").html(i), e.productChange && e.productChange(wr.b(n).getTime(), r, i)
                    }(t)
                }), p.a("#toggle-zone").on("click", function() {
                    p.a("#data-date").classed("local", !p.a("#data-date").classed("local")), it(C.cancel.requested ? null : C.value())
                }), P.on("update.affects-renderer", u), R.on("update.affects-renderer", u), C.on("update.affects-field", c), F.on("render.affects-field", c), F.on("start.affects-field redraw.affects-field", function() {
                    z.cancel(), q.cancel()
                }), z.on("update.affects-animator", function() {
                    I.submit(nt, R.value(), C.value())
                }), F.on("start.affects-animator", function() {
                    return lt(!0)
                }), C.on("submit.affects-animator", function() {
                    return lt(!1)
                }), z.on("submit.affects-animator", function() {
                    return lt(!1)
                }), z.on("update.affects-overlay", function() {
                    D.submit(rt, z.value(), wl.get("overlayType"), wl.get("animate"))
                }), F.on("start.affects-overlay", function() {
                    Aa(p.a("#overlay").node()), D.submit(rt, z.value(), null, null)
                }), wl.on("change.?", function(t) {
                    var n = Object.keys(t);
                    a.intersection(n, ["overlayType", "showGridPoints", "animate"]).length > 0 && D.submit(rt, z.value(), wl.get("overlayType"), wl.get("animate"))
                }), wl.on("change:animate.?", function(t) {
                    t ? c() : lt(!0)
                }), O.on("click.affects-location", ut), p.a("#location-close").on("click", ct), z.on("update.affects-location", at), wl.on("change:loc.?", at), wl.on("change:param.?", function(t) {
                    switch (dr(".ocean-mode").classed("invisible", "ocean" !== t), dr(".wind-mode").classed("invisible", "wind" !== t).selectAll(".text-button").classed("disabled", "wind" !== t), dr(".chem-mode").classed("invisible", "chem" !== t), dr(".particulates-mode").classed("invisible", "particulates" !== t), dr(".space-mode").classed("invisible", "space" !== t), t) {
                        case "chem":
                        case "particulates":
                        case "wind":
                            p.a("#nav-backward-more").attr("title", "-1 Day"), p.a("#nav-backward").attr("title", "-3 Hours"), p.a("#nav-forward").attr("title", "+3 Hours"), p.a("#nav-forward-more").attr("title", "+1 Day");
                            break;
                        case "ocean":
                            p.a("#nav-backward-more").attr("title", "-1 Month"), p.a("#nav-backward").attr("title", "-5 Days"), p.a("#nav-forward").attr("title", "+5 Days"), p.a("#nav-forward-more").attr("title", "+1 Month")
                    }
                }), p.a("#air-mode").on("click", function() {
                    "wind" !== wl.get("param") && wl.save({
                        param: "wind",
                        surface: "surface",
                        level: "level",
                        overlayType: "default",
                        animate: dt("wind")
                    })
                }), wl.on("change:param.?", function(t) {
                    p.a("#air-mode").classed("highlighted", "wind" === t)
                }), p.a("#ocean-mode").on("click", function() {
                    if ("ocean" !== wl.get("param")) {
                        var t = {
                                param: "ocean",
                                surface: "primary",
                                level: "waves",
                                overlayType: "significant_wave_height",
                                animate: dt("ocean")
                            },
                            n = wl.getAll();
                        "current" === n.date ? wl.save(t) : Promise.all(hl.productsFor(d.c(n, t))).then(function(n) {
                            var e = Jl(n, 1)[0];
                            e.date() && wl.save(d.c(t, d.g(e.date())))
                        }).catch(j.error)
                    }
                }), wl.on("change:param.?", function(t) {
                    p.a("#ocean-mode").classed("highlighted", "ocean" === t)
                }), p.a("#chem-mode").on("click", function() {
                    "chem" !== wl.get("param") && wl.save({
                        param: "chem",
                        surface: "surface",
                        level: "level",
                        overlayType: "cosc",
                        animate: dt("chem")
                    })
                }), wl.on("change:param.?", function(t) {
                    p.a("#chem-mode").classed("highlighted", "chem" === t)
                }), p.a("#particulates-mode").on("click", function() {
                    "particulates" !== wl.get("param") && wl.save({
                        param: "particulates",
                        surface: "surface",
                        level: "level",
                        overlayType: "duexttau",
                        animate: dt("particulates")
                    })
                }), wl.on("change:param.?", function(t) {
                    p.a("#particulates-mode").classed("highlighted", "particulates" === t)
                }), p.a("#space-mode").on("click", function() {
                    "space" !== wl.get("param") && wl.save({
                        param: "space",
                        surface: "surface",
                        level: "level",
                        overlayType: "aurora",
                        animate: dt("space")
                    })
                }), wl.on("change:param.?", function(t) {
                    p.a("#space-mode").classed("highlighted", "space" === t)
                }), wl.on("change:overlayType.?", function(t) {
                    dr(".surface").classed("disabled", function() {
                        return "wind" !== wl.get("param") || ("surface-level" === this.getAttribute("id") ? "wind_power_density" === t : "misery_index" === t)
                    })
                }), wl.on("change:surface.?", function(t) {
                    p.a("#wind_power_density").classed("disabled", "surface" === t)
                }), wl.on("change:date.?", function(t) {
                    Sl(t)
                }), p.a("#nav-backward-more").on("click", function() {
                    return Y(-10)
                }), p.a("#nav-forward-more").on("click", function() {
                    return Y(10)
                }), p.a("#nav-backward").on("click", function() {
                    return Y(-1)
                }), p.a("#nav-forward").on("click", function() {
                    return Y(1)
                }), p.a("#nav-now").on("click", function() {
                    return wl.save({
                        date: "current"
                    })
                }), p.a("#option-show-grid").on("click", function() {
                    wl.save({
                        showGridPoints: !wl.get("showGridPoints")
                    })
                }), wl.on("change:showGridPoints.?", function(t) {
                    p.a("#option-show-grid").classed("highlighted", t)
                }), p.a("#animate-start").on("click", function() {
                    wl.save({
                        animate: !wl.get("animate")
                    })
                }), wl.on("change:animate.?", function(t) {
                    p.a("#animate-start").classed("highlighted", t)
                }), p.a("#hd").on("click", function() {
                    Yl.save({
                        hd: !Yl.get("hd")
                    })
                }), Yl.on("change:hd.?", function(t) {
                    p.a("#hd").classed("highlighted", t)
                }), dr(".surface").each(function() {
                    var t = this.id,
                        n = t.split("-");
                    st("#" + t, {
                        param: "wind",
                        surface: n[0],
                        level: n[1]
                    })
                }), st("#animate-currents", {
                    param: "ocean",
                    surface: "surface",
                    level: "currents",
                    animate: !0,
                    overlayType: "default"
                }, [{
                    param: "ocean",
                    surface: "surface",
                    level: "currents"
                }]), st("#animate-waves", {
                    param: "ocean",
                    surface: "primary",
                    level: "waves",
                    animate: !0,
                    overlayType: "default"
                }, [{
                    param: "ocean",
                    surface: "primary",
                    level: "waves"
                }]), hl.overlayTypes().each(function(t) {
                    var n = {
                            overlayType: t
                        },
                        e = [n];
                    "misery_index" === t ? d.c(n, {
                        surface: "surface",
                        level: "level"
                    }) : "currents" === t ? e.push({
                        param: "ocean",
                        surface: "surface",
                        level: "currents",
                        overlayType: "default"
                    }) : "primary_waves" === t && e.push({
                        param: "ocean",
                        surface: "primary",
                        level: "waves",
                        overlayType: "default"
                    }), st("#".concat(t.replace(".", "")), n, e)
                }), st("#wind", {
                    param: "wind",
                    overlayType: "default"
                }), st("#no-overlay", {
                    overlayType: "off"
                }), Object.keys(r).forEach(function(t) {
                    st("#" + t, {
                        projection: t,
                        orientation: ""
                    }, [{
                        projection: t
                    }])
                }), p.a(window).on("orientationchange", function() {
                    window.scrollTo(0, 0), A = d.F(), ht(), L.value() && p.a("#fastoverlay").style("width", "".concat(A.width, "px")).style("height", "".concat(A.height, "px")), R.submit(W, wl.get("projection"))
                }), d.u() ? dr(".kiosk").classed("invisible", !0) : setTimeout(function() {
                    p.a("#menu-ham").transition().style("opacity", "0").remove()
                }, 15e3),
                function() {
                    var t = function(t) {
                            console.time("glTest");
                            var n = {
                                pass: !1
                            };
                            try {
                                var e = function(t, n) {
                                        var e = new Uint8Array(4);
                                        return i.readPixels(t, n, 1, 1, i.RGBA, i.UNSIGNED_BYTE, e), e
                                    },
                                    r = Ea(Ul, Hl);
                                t && (p.a(r).style("width", "".concat(Ul / Gl, "px")).style("height", "".concat(Hl / Gl, "px")).style("position", "absolute").style("top", "0").style("left", "0"), p.a("#display").node().appendChild(r));
                                var i = Ll.getWebGL(r);
                                if (!i) return n.hasContext = !1, n;
                                var o = +i.getParameter(i.MAX_TEXTURE_SIZE) || -1;
                                if (o < 4096) return n.maxTexSize = o, n;
                                var a = +i.getShaderPrecisionFormat(i.FRAGMENT_SHADER, i.HIGH_FLOAT).precision || -1;
                                if (a < 23) return n.precision = a, n;
                                n.scenario = 1;
                                var u = ql(r, void 0, function() {
                                    return 1
                                }, function() {
                                    return {
                                        width: Ul,
                                        height: Hl,
                                        pixelRatio: Gl
                                    }
                                }, function(t) {
                                    return [Xl.webgl(t), Wl.webgl(t), Vl.webgl(t), $l.webgl(t)]
                                }).draw();
                                if (u.err) return n.err = u.err, n;
                                var c = [Object(d.b)(e(195, 280), [0, 0, 255, 255]), Object(d.b)(e(195, 252), [0, 255, 0, 255]), Object(d.b)(e(195, 210), [0, 255, 255, 255]), Object(d.b)(e(195, 150), [255, 0, 0, 255]), Object(d.b)(e(195, 100), [255, 0, 255, 255]), Object(d.b)(e(195, 40), [255, 255, 0, 255]), Object(d.b)(e(195, 15), [255, 255, 255, 255]), Object(d.b)(e(145, 15), [0, 0, 0, 0])];
                                if (c.some(function(t) {
                                        return !1 === t
                                    })) return n.colorMatch = c, n;
                                var l = i.getError();
                                0 !== l ? n.err = l : n.pass = !0
                            } catch (t) {
                                n.err = t.toString()
                            } finally {
                                console.timeEnd("glTest")
                            }
                            return n
                        }(d.o()),
                        e = t.pass ? "ok" : JSON.stringify(t);
                    if (n.debug("test gl: ".concat(e)), a.isFunction(window.ga) && window.ga("send", "event", "gl", e), t.pass) {
                        var r = p.a("#fastoverlay").style("width", "".concat(A.width, "px")).style("height", "".concat(A.height, "px")).node(),
                            i = ql(r, d.t() ? Ea() : void 0, function() {
                                var t = (C.value() || {}).overlayGrid;
                                return (wl.get("animate") ? t.alpha.animated : t.alpha.single) / 255
                            }, function() {
                                return {
                                    width: A.width,
                                    height: A.height,
                                    pixelRatio: Yl.get("hd") ? 1 : .5
                                }
                            }, function(t) {
                                if ("off" === wl.get("overlayType") || !F.value()) return [];
                                var n = [u(t), c(t), l(t), s(t)].filter(function(t) {
                                    return !!t
                                });
                                return 4 === n.length ? n : []
                            });
                        wl.on("change:overlayType.?", i.draw), Yl.on("change:hd.?", i.draw), R.on("update.affects-fastoverlay", i.draw), C.on("update.affects-fastoverlay", i.draw), F.on("redraw.affects-fastoverlay", i.draw), F.on("render.affects-fastoverlay", i.draw), I.on("update.affects-fastoverlay", i.draw), L.submit(i)
                    }

                    function o() {
                        return (C.value() || {}).overlayGrid || {}
                    }

                    function u(t) {
                        var n = R.value(),
                            e = n && n.optimizedProjection();
                        return e && e.webgl && e.webgl(t)
                    }

                    function c(t) {
                        var n = o(),
                            e = n.grid && n.grid() || {};
                        return e.webgl && e.webgl(t)
                    }

                    function l(t) {
                        var n = o(),
                            e = n.field && n.field().bilinear || {};
                        return e.webgl && e.webgl(t)
                    }

                    function s(t) {
                        var n = o().scale || {};
                        return n.webgl && n.webgl(t)
                    }
                }();
            var l = ["surface-level", "isobaric-1000hPa", "isobaric-850hPa", "isobaric-700hPa", "isobaric-500hPa", "isobaric-250hPa", "isobaric-70hPa", "isobaric-10hPa"];

            function s() {
                var t = wl.getAll(),
                    n = t.surface + "-" + t.level;
                return "wind" === t.param ? a.indexOf(l, n) : -1
            }
            p.a("body").on("keydown", function() {
                var t = v.c,
                    n = dl(t);
                if (!(t.defaultPrevented || t.altKey || t.ctrlKey || t.metaKey || t.shiftKey)) {
                    switch (n) {
                        case "Escape":
                            if (!(p.a("#settings-wrap").classed("invisible") ? p.a("#calendar-wrapper").classed("invisible") ? p.a("#location-close").classed("invisible") ? p.a("#menu").classed("invisible") ? p.a("#notice").classed("invisible") ? p.a("#sponsor").classed("invisible") ? void 0 : (Zl.click("sponsor-hide"), 1) : (Zl.click("notice-hide"), 1) : (Zl.click("show-menu"), 1) : (Zl.click("location-close"), 1) : (Zl.click("calendar-hide"), 1) : (Zl.click("settings-hide"), 1))) return;
                            break;
                        default:
                            return
                    }
                    t.preventDefault()
                }
            }), p.a("body").on("keypress", function() {
                var t = v.c,
                    n = dl(t);
                if (!(t.defaultPrevented || t.altKey || t.ctrlKey || t.metaKey)) {
                    switch (n) {
                        case "e":
                            Zl.click("show-menu");
                            break;
                        case "I":
                            Zl.click(l[l.length - 1]);
                            break;
                        case "i":
                            Zl.click(l[s() + 1]);
                            break;
                        case "m":
                            Zl.click(l[s() - 1]);
                            break;
                        case "M":
                            Zl.click(l[0]);
                            break;
                        case "J":
                            Zl.click("nav-backward-more");
                            break;
                        case "j":
                            Zl.click("nav-backward");
                            break;
                        case "k":
                            Zl.click("nav-forward");
                            break;
                        case "K":
                            Zl.click("nav-forward-more");
                            break;
                        case "n":
                            Zl.click("nav-now");
                            break;
                        case "p":
                            Zl.click("animate-start");
                            break;
                        case "g":
                            Zl.click("option-show-grid");
                            break;
                        case "H":
                            Zl.click("hd");
                            break;
                        case "C":
                            Zl.click("show-calendar");
                            break;
                        case "d":
                            O.hotkey("zoom", 1.003);
                            break;
                        case "x":
                            O.hotkey("zoom", .997);
                            break;
                        case "D":
                            O.hotkey("zoom", 1.05);
                            break;
                        case "X":
                            O.hotkey("zoom", .95);
                            break;
                        case "w":
                            O.hotkey("up", 1);
                            break;
                        case "W":
                            O.hotkey("up", 8);
                            break;
                        case "z":
                            O.hotkey("down", 1);
                            break;
                        case "Z":
                            O.hotkey("down", 8);
                            break;
                        case "a":
                            O.hotkey("left", 1);
                            
                            break;
                        case "A":
                            O.hotkey("left", 8);
                            break;
                        case "s":
                            O.hotkey("right", 1);
                            break;
                        case "S":
                            O.hotkey("right", 8);
                            break;
                        case "Enter":
                            if (! function() {
                                    if (!p.a("#calendar-wrapper").classed("invisible")) return Zl.click("calendar-apply"), !0
                                }()) return;
                            break;
                        default:
                            return
                    }
                    t.preventDefault()
                }
            })
        }).then(function() {
            wl.on("change.affects-hash", xl), p.a(window).on("hashchange.affects-config", _l), _l(), Yl.save({
                hd: !1,
                topology: Object(d.v)() ? "/earth-topo-mobile.json?v3" : "/earth-topo.json?v3"
            })
        }).catch(j.error), d.c(Zl, {
            url: function() {
                return window.location.href.toString()
            },
            scale: {
                valueAt: function(t) {
                    var n = pt(),
                        e = {};
                    if (n) {
                        var r = {},
                            i = o.h.apply(void 0, [t / 100].concat(Kl(n.scale.bounds)));
                        n.units.forEach(function(t) {
                            r[t.label] = d.k(i, t)
                        }), e[n.type] = r
                    }
                    return JSON.stringify(e)
                },
                palette: function() {
                    var t, n, e, r = pt();
                    return JSON.stringify(r ? (t = {}, n = r.type, e = d.E(r.scale.colors), n in t ? Object.defineProperty(t, n, {
                        value: e,
                        enumerable: !0,
                        configurable: !0,
                        writable: !0
                    }) : t[n] = e, t) : {})
                }
            },
            navToDate: function(t) {
                var n = pt(),
                    e = new Date(t);
                return !n || a.isNaN(e.getUTCFullYear()) ? 0 : (e = n.navigateTo(wr.f(e))) ? (a.defer(function() {
                    wl.save(d.g(e))
                }), wr.b(e).getTime()) : 0
            },
            click: function(t) {
                a.defer(function() {
                    var n = p.a("#" + t).node();
                    return null !== n ? n.dispatchEvent(d.z()) : void 0
                })
            },
            locate: function(t, n) {
                a.defer(G, t, n)
            },
            orient: function(t) {
                a.defer(function() {
                    var n = R.value();
                    if (void 0 === t) return n.projection.rotate();
                    n.projection.rotate(t), wl.save({
                        orientation: n.orientation()
                    })
                })
            },
            stop: function() {
                a.defer(function() {
                    wl.save({
                        animate: !1
                    })
                })
            },
            cancelMove: function() {
                O.cancelMove()
            }
        })
    }
    e.d(n, "a", function() {
        return Zl
    })
}, function(t, n, e) {
    "use strict";
    var r = e(7);
    n.a = function(t) {
        return "string" == typeof t ? new r.a([
            [document.querySelector(t)]
        ], [document.documentElement]) : new r.a([
            [t]
        ], r.c)
    }
}, , function(t, n, e) {
    (function(t, n) {
        ! function(t, e) {
            "use strict";
            if (!t.setImmediate) {
                var r, i, o, a, u, c = 1,
                    l = {},
                    s = !1,
                    f = t.document,
                    h = Object.getPrototypeOf && Object.getPrototypeOf(t);
                h = h && h.setTimeout ? h : t, "[object process]" === {}.toString.call(t.process) ? r = function(t) {
                    n.nextTick(function() {
                        p(t)
                    })
                } : ! function() {
                    if (t.postMessage && !t.importScripts) {
                        var n = !0,
                            e = t.onmessage;
                        return t.onmessage = function() {
                            n = !1
                        }, t.postMessage("", "*"), t.onmessage = e, n
                    }
                }() ? t.MessageChannel ? ((o = new MessageChannel).port1.onmessage = function(t) {
                    p(t.data)
                }, r = function(t) {
                    o.port2.postMessage(t)
                }) : f && "onreadystatechange" in f.createElement("script") ? (i = f.documentElement, r = function(t) {
                    var n = f.createElement("script");
                    n.onreadystatechange = function() {
                        p(t), n.onreadystatechange = null, i.removeChild(n), n = null
                    }, i.appendChild(n)
                }) : r = function(t) {
                    setTimeout(p, 0, t)
                } : (a = "setImmediate$" + Math.random() + "$", u = function(n) {
                    n.source === t && "string" == typeof n.data && 0 === n.data.indexOf(a) && p(+n.data.slice(a.length))
                }, t.addEventListener ? t.addEventListener("message", u, !1) : t.attachEvent("onmessage", u), r = function(n) {
                    t.postMessage(a + n, "*")
                }), h.setImmediate = function(t) {
                    "function" != typeof t && (t = new Function("" + t));
                    for (var n = new Array(arguments.length - 1), e = 0; e < n.length; e++) n[e] = arguments[e + 1];
                    var i = {
                        callback: t,
                        args: n
                    };
                    return l[c] = i, r(c), c++
                }, h.clearImmediate = d
            }

            function d(t) {
                delete l[t]
            }

            function p(t) {
                if (s) setTimeout(p, 0, t);
                else {
                    var n = l[t];
                    if (n) {
                        s = !0;
                        try {
                            ! function(t) {
                                var n = t.callback,
                                    r = t.args;
                                switch (r.length) {
                                    case 0:
                                        n();
                                        break;
                                    case 1:
                                        n(r[0]);
                                        break;
                                    case 2:
                                        n(r[0], r[1]);
                                        break;
                                    case 3:
                                        n(r[0], r[1], r[2]);
                                        break;
                                    default:
                                        n.apply(e, r)
                                }
                            }(n)
                        } finally {
                            d(t), s = !1
                        }
                    }
                }
            }
        }("undefined" == typeof self ? void 0 === t ? this : t : self)
    }).call(this, e(9), e(45))
}, function(t, n, e) {
    "use strict";
    (function(t) {
        var r = e(13);

        function i(t) {
            return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
                return typeof t
            } : function(t) {
                return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
            })(t)
        }
        var o = setTimeout;

        function a() {}

        function u(t) {
            if (!(this instanceof u)) throw new TypeError("Promises must be constructed via new");
            if ("function" != typeof t) throw new TypeError("not a function");
            this._state = 0, this._handled = !1, this._value = void 0, this._deferreds = [], d(t, this)
        }

        function c(t, n) {
            for (; 3 === t._state;) t = t._value;
            0 !== t._state ? (t._handled = !0, u._immediateFn(function() {
                var e = 1 === t._state ? n.onFulfilled : n.onRejected;
                if (null !== e) {
                    var r;
                    try {
                        r = e(t._value)
                    } catch (t) {
                        return void s(n.promise, t)
                    }
                    l(n.promise, r)
                } else(1 === t._state ? l : s)(n.promise, t._value)
            })) : t._deferreds.push(n)
        }

        function l(t, n) {
            try {
                if (n === t) throw new TypeError("A promise cannot be resolved with itself.");
                if (n && ("object" === i(n) || "function" == typeof n)) {
                    var e = n.then;
                    if (n instanceof u) return t._state = 3, t._value = n, void f(t);
                    if ("function" == typeof e) return void d((r = e, o = n, function() {
                        r.apply(o, arguments)
                    }), t)
                }
                t._state = 1, t._value = n, f(t)
            } catch (n) {
                s(t, n)
            }
            var r, o
        }

        function s(t, n) {
            t._state = 2, t._value = n, f(t)
        }

        function f(t) {
            2 === t._state && 0 === t._deferreds.length && u._immediateFn(function() {
                t._handled || u._unhandledRejectionFn(t._value)
            });
            for (var n = 0, e = t._deferreds.length; n < e; n++) c(t, t._deferreds[n]);
            t._deferreds = null
        }

        function h(t, n, e) {
            this.onFulfilled = "function" == typeof t ? t : null, this.onRejected = "function" == typeof n ? n : null, this.promise = e
        }

        function d(t, n) {
            var e = !1;
            try {
                t(function(t) {
                    e || (e = !0, l(n, t))
                }, function(t) {
                    e || (e = !0, s(n, t))
                })
            } catch (t) {
                if (e) return;
                e = !0, s(n, t)
            }
        }
        u.prototype.catch = function(t) {
            return this.then(null, t)
        }, u.prototype.then = function(t, n) {
            var e = new this.constructor(a);
            return c(this, new h(t, n, e)), e
        }, u.prototype.finally = r.a, u.all = function(t) {
            return new u(function(n, e) {
                if (!t || void 0 === t.length) throw new TypeError("Promise.all accepts an array");
                var r = Array.prototype.slice.call(t);
                if (0 === r.length) return n([]);
                var o = r.length;

                function a(t, u) {
                    try {
                        if (u && ("object" === i(u) || "function" == typeof u)) {
                            var c = u.then;
                            if ("function" == typeof c) return void c.call(u, function(n) {
                                a(t, n)
                            }, e)
                        }
                        r[t] = u, 0 == --o && n(r)
                    } catch (t) {
                        e(t)
                    }
                }
                for (var u = 0; u < r.length; u++) a(u, r[u])
            })
        }, u.resolve = function(t) {
            return t && "object" === i(t) && t.constructor === u ? t : new u(function(n) {
                n(t)
            })
        }, u.reject = function(t) {
            return new u(function(n, e) {
                e(t)
            })
        }, u.race = function(t) {
            return new u(function(n, e) {
                for (var r = 0, i = t.length; r < i; r++) t[r].then(n, e)
            })
        }, u._immediateFn = "function" == typeof t && function(n) {
            t(n)
        } || function(t) {
            o(t, 0)
        }, u._unhandledRejectionFn = function(t) {
            "undefined" != typeof console && console && console.warn("Possible Unhandled Promise Rejection:", t)
        }, n.a = u
    }).call(this, e(47).setImmediate)
}, function(t, n, e) {
    "use strict";

    function r() {
        return []
    }
    n.a = function(t) {
        return null == t ? r : function() {
            return this.querySelectorAll(t)
        }
    }
}, function(t, n, e) {
    "use strict";
    n.a = function(t) {
        return function() {
            return this.matches(t)
        }
    }
}, function(t, n, e) {
    "use strict";
    e.d(n, "b", function() {
        return i
    });
    var r = e(17);

    function i(t, n) {
        return t.style.getPropertyValue(n) || Object(r.a)(t).getComputedStyle(t, null).getPropertyValue(n)
    }
    n.a = function(t, n, e) {
        return arguments.length > 1 ? this.each((null == n ? function(t) {
            return function() {
                this.style.removeProperty(t)
            }
        } : "function" == typeof n ? function(t, n, e) {
            return function() {
                var r = n.apply(this, arguments);
                null == r ? this.style.removeProperty(t) : this.style.setProperty(t, r, e)
            }
        } : function(t, n, e) {
            return function() {
                this.style.setProperty(t, n, e)
            }
        })(t, n, null == e ? "" : e)) : i(this.node(), t)
    }
}, function(t, n) {
    t.exports = "\nuniform vec2 u_translate;   // screen coords translation (x0, y0)\nuniform float u_R2;         // scale R, squared\nuniform float u_lon0;       // origin longitude\nuniform float u_sinlat0;    // sin(lat0)\nuniform float u_Rcoslat0;   // R * cos(lat0)\nuniform float u_coslat0dR;  // cos(lat0) / R\nuniform float u_flip;       // 1.0 if lat0 in range [-90deg, +90deg], otherwise -1.0\n\n// Handbook of Mathematical Functions, M. Abramowitz and I.A. Stegun, Ed. For input on range [-1, +1]\n// http://http.developer.nvidia.com/Cg/asin.html\nfloat arcsin(in float v) {\n    float x = abs(v);\n    float ret = -0.0187293;\n    ret *= x;\n    ret += 0.0742610;\n    ret *= x;\n    ret -= 0.2121144;\n    ret *= x;\n    ret += 1.5707288;\n    ret = PI / 2.0 - sqrt(1.0 - x) * ret;\n    return sign(v) * ret;\n}\n\n/** @returns [lon, lat] in radians for the specified point [x, y], or [7e37, 7e37] if the point is unprojectable. */\nvec2 invert(in vec2 point) {\n    vec2 pt = (point - u_translate) * u_flip;\n    float d = 1.0 - dot(pt, pt) / u_R2;\n    if (d >= 0.0) {  // CONSIDER: step() to remove branch... worth it?\n        float cosc = sqrt(d);\n        float lon = u_lon0 + atan(pt.x, cosc * u_Rcoslat0 - pt.y * u_sinlat0);  // u_lon0 + [-pi/2, pi/2]\n        float lat = arcsin(cosc * u_sinlat0 + pt.y * u_coslat0dR);              // [-π/2, π/2] [-90°, +90°]\n        return vec2(lon, lat);\n    }\n    return vec2(7e37);  // outside of projection\n}\n"
}, function(t, n) {
    t.exports = "\nuniform vec2 u_Low;\nuniform vec2 u_Size;\n\nvec2 grid(in vec2 coord) {\n    vec2 tex = (coord - u_Low) / u_Size;\n    float s = tex.s;\n    float t = tex.t;\n\n    if (t < 0.0 || 1.0 < t) discard;  // lat out of bounds, so nothing to draw\n\n    return vec2(fract(s), t);  // UNDONE: fract used here only because lon is circular.\n}\n"
}, function(t, n) {
    t.exports = "\nuniform sampler2D u_Data;\n\nfloat lookup(in vec2 st) {\n    vec4 h = texture2D(u_Data, st);\n    return scalarize(h);\n}\n"
}, function(t, n) {
    t.exports = "\nuniform sampler2D u_Data;\nuniform vec2 u_TextureSize;\n\nvec4 getSample(in vec2 st) {\n    // Use of fract below assumes cylindrical x axis (usually lon) and non-cylindrical y axis (usually lat).\n    return texture2D(u_Data, vec2(fract(st.s), st.t));\n}\n\nfloat lookup(in vec2 st) {\n    // adapted from http://www.iquilezles.org/www/articles/hwinterpolation/hwinterpolation.htm\n    vec2 uv = st * u_TextureSize - 0.5;\n    vec2 iuv = floor(uv);\n    vec2 fuv = fract(uv);\n    vec2 ruv = 1.0 - fuv;\n\n    vec4 a = getSample((iuv + vec2(0.5, 0.5)) / u_TextureSize);  // LL\n    vec4 b = getSample((iuv + vec2(1.5, 0.5)) / u_TextureSize);  // LR\n    vec4 c = getSample((iuv + vec2(0.5, 1.5)) / u_TextureSize);  // UL\n    vec4 d = getSample((iuv + vec2(1.5, 1.5)) / u_TextureSize);  // UR\n    vec4 h;\n\n    int tag = int(dot(step(7e37, vec4(a.x, b.x, c.x, d.x)), vec4(1.0, 2.0, 4.0, 8.0)));\n    if (tag == 0) {\n        // a b c d\n        h = mix(mix(a, b, fuv.x), mix(c, d, fuv.x), fuv.y);\n    } else if (tag == 1 && ruv.y < fuv.x) {\n        // d b c\n        h = d + ruv.x * (c - d) + ruv.y * (b - d);\n    } else if (tag == 2 && fuv.x < fuv.y) {\n        // c a d\n        h = c + fuv.x * (d - c) + ruv.y * (a - c);\n    } else if (tag == 4 && fuv.x >= fuv.y) {\n        // b a d\n        h = b + ruv.x * (a - b) + fuv.y * (d - b);\n    } else if (tag == 8 && fuv.x <= ruv.y) {\n        // a b c\n        h = a + fuv.x * (b - a) + fuv.y * (c - a);\n    } else {\n        // not enough points to interpolate\n        h = vec4(7e37);\n    }\n\n    return scalarize(h);\n}\n"
}, function(t, n) {
    t.exports = "\nfloat scalarize(in vec4 h) {\n    return h.x;\n}\n"
}, function(t, n) {
    t.exports = "\nfloat scalarize(in vec4 h) {\n    float isMissing = step(7e37, h.x);\n    return length((1.0 - isMissing) * h.xw) + isMissing * 7e37;\n}\n"
}, function(t, n) {
    t.exports = "\nfloat fmap(in float v) {\n    return log(v);\n}\n"
}, function(t, n) {
    t.exports = "\nfloat fmap(in float v) {\n    return v;\n}\n"
}, function(t, n) {
    t.exports = "\nuniform vec2 u_Range;  // [min, size]\nuniform lowp sampler2D u_Palette;\nuniform lowp float u_Alpha;\n\nlowp vec4 colorize(in float v) {\n    vec2 st = vec2((fmap(v) - u_Range.x) / u_Range.y, 0.5);\n    lowp vec4 color = texture2D(u_Palette, st);\n    lowp float alpha = (1.0 - step(7e37, v)) * u_Alpha;\n    return vec4(color.rgb * alpha, alpha);  // premultiply alpha\n}\n"
}, function(t, n) {
    t.exports = "precision highp float;\nprecision highp sampler2D;\n\nconst float TAU = 6.283185307179586;\nconst float PI = 3.141592653589793;\n"
}, function(t, n) {
    t.exports = "\nuniform float u_Detail;\n\nvoid main() {\n    vec2 coord = invert(gl_FragCoord.xy / u_Detail);\n    vec2 st = grid(coord);\n    float v = lookup(st);\n    lowp vec4 color = colorize(v);\n    gl_FragColor = color;\n}\n"
}, , function(t, n, e) {
    "use strict";
    e.r(n),
        function(t) {
            e(44);
            var n = e(0),
                r = e.n(n),
                i = e(24),
                o = e(1),
                a = e(21),
                u = e(23),
                c = e(19);
            window.addEventListener("touchmove", function() {}), t.earth = u.a, t.main = function(t) {
                t = t || {};
                var n = Object(c.a)(t.console),
                    e = {
                        log: n,
                        bridge: t
                    };
                o.p() && n.debug("dev mode enabled"), r.a.defer(u.a, e)
            }, o.q() && r.a.isFunction(window.ga) && window.ga("send", "event", "iframe", document.referrer.split("/")[2] || document.referrer), o.q() && a.a(document.referrer) ? a.b() : o.m() ? i.a("#details").classed("invisible", !0) : t.main()
        }.call(this, e(9))
}, function(t, n, e) {
    "use strict";
    e(26), e(46);
    Math.sign || (Math.sign = function(t) {
        return (t > 0) - (t < 0) || +t
    })
}, function(t, n) {
    var e, r, i = t.exports = {};

    function o() {
        throw new Error("setTimeout has not been defined")
    }

    function a() {
        throw new Error("clearTimeout has not been defined")
    }

    function u(t) {
        if (e === setTimeout) return setTimeout(t, 0);
        if ((e === o || !e) && setTimeout) return e = setTimeout, setTimeout(t, 0);
        try {
            return e(t, 0)
        } catch (n) {
            try {
                return e.call(null, t, 0)
            } catch (n) {
                return e.call(this, t, 0)
            }
        }
    }! function() {
        try {
            e = "function" == typeof setTimeout ? setTimeout : o
        } catch (t) {
            e = o
        }
        try {
            r = "function" == typeof clearTimeout ? clearTimeout : a
        } catch (t) {
            r = a
        }
    }();
    var c, l = [],
        s = !1,
        f = -1;

    function h() {
        s && c && (s = !1, c.length ? l = c.concat(l) : f = -1, l.length && d())
    }

    function d() {
        if (!s) {
            var t = u(h);
            s = !0;
            for (var n = l.length; n;) {
                for (c = l, l = []; ++f < n;) c && c[f].run();
                f = -1, n = l.length
            }
            c = null, s = !1,
                function(t) {
                    if (r === clearTimeout) return clearTimeout(t);
                    if ((r === a || !r) && clearTimeout) return r = clearTimeout, clearTimeout(t);
                    try {
                        r(t)
                    } catch (n) {
                        try {
                            return r.call(null, t)
                        } catch (n) {
                            return r.call(this, t)
                        }
                    }
                }(t)
        }
    }

    function p(t, n) {
        this.fun = t, this.array = n
    }

    function v() {}
    i.nextTick = function(t) {
        var n = new Array(arguments.length - 1);
        if (arguments.length > 1)
            for (var e = 1; e < arguments.length; e++) n[e - 1] = arguments[e];
        l.push(new p(t, n)), 1 !== l.length || s || u(d)
    }, p.prototype.run = function() {
        this.fun.apply(null, this.array)
    }, i.title = "browser", i.browser = !0, i.env = {}, i.argv = [], i.version = "", i.versions = {}, i.on = v, i.addListener = v, i.once = v, i.off = v, i.removeListener = v, i.removeAllListeners = v, i.emit = v, i.prependListener = v, i.prependOnceListener = v, i.listeners = function(t) {
        return []
    }, i.binding = function(t) {
        throw new Error("process.binding is not supported")
    }, i.cwd = function() {
        return "/"
    }, i.chdir = function(t) {
        throw new Error("process.chdir is not supported")
    }, i.umask = function() {
        return 0
    }
}, function(t, n, e) {
    "use strict";
    (function(t) {
        var n = e(27),
            r = e(13),
            i = function() {
                if ("undefined" != typeof self) return self;
                if ("undefined" != typeof window) return window;
                if (void 0 !== t) return t;
                throw new Error("unable to locate global object")
            }();
        "Promise" in i ? i.Promise.prototype.finally || (i.Promise.prototype.finally = r.a) : i.Promise = n.a
    }).call(this, e(9))
}, function(t, n, e) {
    (function(t) {
        var r = void 0 !== t && t || "undefined" != typeof self && self || window,
            i = Function.prototype.apply;

        function o(t, n) {
            this._id = t, this._clearFn = n
        }
        n.setTimeout = function() {
            return new o(i.call(setTimeout, r, arguments), clearTimeout)
        }, n.setInterval = function() {
            return new o(i.call(setInterval, r, arguments), clearInterval)
        }, n.clearTimeout = n.clearInterval = function(t) {
            t && t.close()
        }, o.prototype.unref = o.prototype.ref = function() {}, o.prototype.close = function() {
            this._clearFn.call(r, this._id)
        }, n.enroll = function(t, n) {
            clearTimeout(t._idleTimeoutId), t._idleTimeout = n
        }, n.unenroll = function(t) {
            clearTimeout(t._idleTimeoutId), t._idleTimeout = -1
        }, n._unrefActive = n.active = function(t) {
            clearTimeout(t._idleTimeoutId);
            var n = t._idleTimeout;
            n >= 0 && (t._idleTimeoutId = setTimeout(function() {
                t._onTimeout && t._onTimeout()
            }, n))
        }, e(26), n.setImmediate = "undefined" != typeof self && self.setImmediate || void 0 !== t && t.setImmediate || this && this.setImmediate, n.clearImmediate = "undefined" != typeof self && self.clearImmediate || void 0 !== t && t.clearImmediate || this && this.clearImmediate
    }).call(this, e(9))
}, function(t, n) {
    t.exports = function(t) {
        return t.webpackPolyfill || (t.deprecate = function() {}, t.paths = [], t.children || (t.children = []), Object.defineProperty(t, "loaded", {
            enumerable: !0,
            get: function() {
                return t.l
            }
        }), Object.defineProperty(t, "id", {
            enumerable: !0,
            get: function() {
                return t.i
            }
        }), t.webpackPolyfill = 1), t
    }
}]);
//# sourceMappingURL=bundle.js.map